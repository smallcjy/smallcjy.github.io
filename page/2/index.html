<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
  
<meta name="generator" content="Hexo 7.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"><span class="fa fa-bars"></span></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
        
          <a class="nav-icon" href="/atom.xml" title="RSS Feed"><span class="fa fa-rss"></span></a>
        
        <a class="nav-icon nav-search-btn" title="Search"><span class="fa fa-search"></span></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-链路层" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/16/%E9%93%BE%E8%B7%AF%E5%B1%82/" class="article-date">
  <time class="dt-published" datetime="2024-06-16T07:46:26.000Z" itemprop="datePublished">2024-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/16/%E9%93%BE%E8%B7%AF%E5%B1%82/">链路层</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="1-edc-error-detection-and-correction-tech"><a class="anchor" href="#1-edc-error-detection-and-correction-tech">#</a> 1 EDC Error Detection and Correction tech</h1>
<p>有三个检测错误的技术：</p>
<ul>
<li>Parity Checks 奇偶校验</li>
<li>Checksum Methods</li>
<li>Cyclic Redundancy Check</li>
</ul>
<h2 id="11-parity-checks"><a class="anchor" href="#11-parity-checks">#</a> 1.1 Parity Checks</h2>
<p>思想：</p>
<p>在 d 位的 data 位后一位设置为 Parity bit。如何设置这个 Parity bit 呢？如果 d 位 data 中有偶数位 1 则 P bit 赋值为 0；否则赋值为 1；跟随 packet 一起发送到目标地址。目标主机接收 packet 后会对接收到的 data 进行重新的 Parity bit 计算，并比较和发送过来的 Parity bit，如果不同则说明发生了错误。</p>
<p>问题：</p>
<ul>
<li>不能保证发送过来的 Parity bit 没有发生腐化</li>
<li>如果发生了偶数次相同的位变化，Parity bit 没有变化但是实际上已经发生了错误</li>
</ul>
<p>改进：使用二维矩阵改进</p>
<p>原本的 data 为一个向量，现在把它划分为一个 ixj 的矩阵，每一行每一列计算它的 Parity bit，使得这个矩阵扩展为 i+1 x j+1 的矩阵，打包进 packet 发送出去。接收端和之前一样计算所有的 Parity bits 进行比较，如果有一个出现不同则发生了错误。</p>
<h2 id="12-checksum"><a class="anchor" href="#12-checksum">#</a> 1.2 Checksum</h2>
<p>思想：</p>
<p>同样是有一个 data 向量，将这 k 位 data 当成一个个 int 整数，把这些整数相加得到一个数，取其补码作为这个 data 向量的 checksum。接收端接收到 packet 后，重新对 k 位 data 进行求和，得到的数和 checksum 相加看看是不是等于 0，如果是则说明没有出错，如果不是说明出现错误。</p>
<h2 id="13-cycling-redundancy-check-循环冗沉检测"><a class="anchor" href="#13-cycling-redundancy-check-循环冗沉检测">#</a> 1.3 Cycling Redundancy Check 循环冗沉检测</h2>
<p><img data-src="CRC.png" alt="CRC"><br>
 如何计算 R？</p>
<p>R=remainder D * 2 的 r 次方 / G（就是用左移 r 位的 D 除以 G，R 是余数）</p>
<p>这个 G 是人为设定的，通常是四位，比如 1001</p>
<p>接收端如何检测：收到的 CRC 码（DR）除以 G，如果余数为 0，没有错误；否则出现错误。</p>
<h1 id="2-arp-mav翻译成ip"><a class="anchor" href="#2-arp-mav翻译成ip">#</a> 2 ARP MAV 翻译成 IP</h1>
<h2 id="21-mac"><a class="anchor" href="#21-mac">#</a> 2.1 MAC</h2>
<p>作用：用来在局域网内寻址</p>
<ul>
<li>6 个字节组成，一共 48 位</li>
<li>每个网卡在制作出厂时就具有全球唯一的 MAC，IEEE 决定前 24 位，制造厂商决定后 24 位</li>
</ul>
<h2 id="22-实现mac-ip-arp"><a class="anchor" href="#22-实现mac-ip-arp">#</a> 2.2 实现 MAC-&gt;IP ARP</h2>
<p>ARP module 接收 IP 地址作为输入，输出局域网内该 ip 的网卡的 MAC。注意：<strong>ARC 只为局域网内的 router 和 host 服务</strong></p>
<p>每一个 host 和 router 有一个 ARP table，作为哈希表储存着 IP 和 MAC 的键值对。也具有 TTL 表式这个映射的有效期，因为局域网内的 ip 不是长期有效的。</p>
<p>举个例子：现在，有个 sender222.222.222.220 想要向 222.222.222.222 发送 datagram。sender 如何查询 222.222.222.222 的 MAC 呢</p>
<ol>
<li>sender 构建特殊的 packet 叫做 ARP packet，包含源 ip 和 mac，目的地 ip 和 mac（暂时是乱写的），称为 ARP query packet。ARP query packet 的目的是查询所有的局域网内的其他 host 和 router 的 MAC 地址根据提供的 IP 地址</li>
<li>sender 会向 adapter 发送这个 query packet，adapter 识别到后会把 FF-FF-FF-FF-FF-FF 这个最大的 MAC 地址和 query packet 封装进 frame 发送出去。这个 MAC 具有特殊作用，它可以被子网内的所有 host 和 router 接收，其他的 host 或 router 接收到后，检查 query packet 里的目标 ip 是否是自己，如果是查询自己的 ARP table，把正确的 mapper 写入一个 response packet 发送回 sender。</li>
<li>sender 接收到 response packet，就实现了 ip 向 mac 的翻译。</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/16/%E9%93%BE%E8%B7%AF%E5%B1%82/" data-id="clypfitva001kiodif46v9m6g" data-title="链路层" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-数据层控制平面" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/16/%E6%95%B0%E6%8D%AE%E5%B1%82%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/" class="article-date">
  <time class="dt-published" datetime="2024-06-16T07:44:46.000Z" itemprop="datePublished">2024-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/16/%E6%95%B0%E6%8D%AE%E5%B1%82%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/">数据层控制平面</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/16/%E6%95%B0%E6%8D%AE%E5%B1%82%E6%8E%A7%E5%88%B6%E5%B9%B3%E9%9D%A2/" data-id="clypfitv4000riodihkai6yjj" data-title="数据层控制平面" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-IO输入输出设备" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/16/IO%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87/" class="article-date">
  <time class="dt-published" datetime="2024-06-16T04:56:26.000Z" itemprop="datePublished">2024-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/16/IO%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87/">IO输入输出设备</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-principle-of-io-software"><a class="anchor" href="#1-principle-of-io-software">#</a> 1 Principle of IO Software</h2>
<h3 id="11-goals-of-io-software"><a class="anchor" href="#11-goals-of-io-software">#</a> 1.1 Goals of IO Software</h3>
<ul>
<li>设备独立性
<ul>
<li>程序可以访问任何的 IO 设备</li>
<li>不会提前对设备进行特殊处理</li>
</ul>
</li>
<li>Uniform naming 通用命名
<ul>
<li>文件和设备的名字是字符串或者数字</li>
<li>不会依赖某个机器</li>
</ul>
</li>
<li>Error handling
<ul>
<li>处理错误</li>
</ul>
</li>
<li>同步和异步传输数据</li>
<li>Buffering
<ul>
<li>有缓存机制，数据来到设备不会直接储存到最终目的地</li>
</ul>
</li>
<li>可共享设备和私有设备</li>
</ul>
<h3 id="12-io-operations"><a class="anchor" href="#12-io-operations">#</a> 1.2 IO Operations</h3>
<h4 id="121-programmed-io"><a class="anchor" href="#121-programmed-io">#</a> 1.2.1 Programmed IO</h4>
<p>CPU 经常被 IO 设备占用知道 IO 设备任务完成，这在多处理器设备中是不高效的。</p>
<p>Polling 轮询：CPU 轮询设备的寄存器查看它的状态是 ready 还是 busy 还是 error</p>
<h4 id="122-interrupt-driven-io"><a class="anchor" href="#122-interrupt-driven-io">#</a> 1.2.2 Interrupt-Driven IO</h4>
<p>IO 中断设备</p>
<p>在应用 Buffer 的 content copy 到内核的 buffer 后会允许中断，如果设备忙，cpu 不会 wait 而是 Scheduling 其他的进程。当设备使用完毕后，设备的 controller 会发送 hardware Interrupt 启动中断服务：</p>
<p>当内核 buffer 的 content 写进 设备时，设备状态恢复 ready。</p>
<h4 id="123-io-using-dma"><a class="anchor" href="#123-io-using-dma">#</a> 1.2.3 IO using DMA</h4>
<p>中断驱动 IO 设备的缺点是中断发生在每一个字符的传输，每个字符写入设备寄存器都会经历完成的中断流程。</p>
<p>DMA 控制器会负责内核 buffer 到 Device buffer 的字符传输，CPU 不需要关心这个传输过程。</p>
<p>当 DMA 传输完成后 CPU 会被中断，通知 CPU 传输完成。</p>
<h2 id="2-io-software-layers"><a class="anchor" href="#2-io-software-layers">#</a> 2 IO software layers</h2>
<h3 id="21硬件和驱动之间的一层-interrupt-handlers"><a class="anchor" href="#21硬件和驱动之间的一层-interrupt-handlers">#</a> 2.1 硬件和驱动之间的一层 --Interrupt handlers</h3>
<p>当中断发生时，CPU 会保存必要的数据和状态然后跳转到 Interrupt-handler routine，它存放在内存中存放中断服务的地方。具体位置由 Interrupt vector 决定。</p>
<p>中断完成后 OS 会执行的事件：</p>
<ol>
<li>保存 regs（数据、状态、地址）</li>
<li>设置中断服务程序的上下文：TLB，MMU and page table</li>
<li>设置中断服务的 stack</li>
<li>修改中断控制器，允许中断</li>
<li>复制保存进程表的寄存器</li>
<li>运行中断服务</li>
<li>调度下一个运行进程</li>
<li>设置下一个运行进程 MMU 上下文</li>
<li>加载新的 PC</li>
<li>开始运行新的进程</li>
</ol>
<h3 id="22-设备驱动"><a class="anchor" href="#22-设备驱动">#</a> 2.2 设备驱动</h3>
<p>设备驱动是设备控制器和 OS 之间的接口</p>
<p><strong>设备驱动函数</strong><br>
作用：</p>
<ul>
<li>接受来自 os 的 Abstract 读写请求，把这些抽象请求重写成适配与设备的具体的请求。</li>
<li>初始化设备</li>
<li>检查设备使用状态，推送请求队列</li>
<li>issue 控制设备的命令序列</li>
<li>检查错误</li>
</ul>
<h3 id="23-device-independent-io-software-设备独立软件"><a class="anchor" href="#23-device-independent-io-software-设备独立软件">#</a> 2.3 Device-Independent IO software 设备独立软件</h3>
<p>设备独立软件的作用：</p>
<ul>
<li>Uniform interfacing for device drivers</li>
<li>buffers</li>
<li>error reporting</li>
<li>allocating and releasing dedicate device</li>
<li>providing a device-independent block size</li>
</ul>
<h4 id="231-uniform-interfacing"><a class="anchor" href="#231-uniform-interfacing">#</a> 2.3.1 Uniform interfacing</h4>
<p>设备驱动需要有一个统一的接口规范。</p>
<p>好处：</p>
<ul>
<li>驱动开发者会知道希望开发什么样的驱动服务</li>
<li>系统开发者可以开发设备独立软件在驱动层之上，为驱动提供服务</li>
</ul>
<p>设备号连接一个合适的设备驱动</p>
<h4 id="232-buffering"><a class="anchor" href="#232-buffering">#</a> 2.3.2 buffering</h4>
<h4 id="233-error-reporting"><a class="anchor" href="#233-error-reporting">#</a> 2.3.3 error reporting</h4>
<h4 id="234-allocating-dedicate-device"><a class="anchor" href="#234-allocating-dedicate-device">#</a> 2.3.4 allocating dedicate device</h4>
<h2 id="3-disk"><a class="anchor" href="#3-disk">#</a> 3 Disk</h2>
<h3 id="31-magnetic-disk-磁盘"><a class="anchor" href="#31-magnetic-disk-磁盘">#</a> 3.1 magnetic disk 磁盘</h3>
<p>由多个 cylinder（柱面）组成，每个柱面包含多个 tracks 道，track 又可以分为多个 sector 扇区。</p>
<h3 id="32disk格式化"><a class="anchor" href="#32disk格式化">#</a> 3.2<strong>disk 格式化</strong></h3>
<p>disk 格式化后，disk 只有 empty bits<br>
 每个 platter 盘片都需要有 low-level format 和 high-level format</p>
<p>low-level format：把 disk 分成 sectors 可以被 disk 控制器识别读写。由 vendors 完成</p>
<p>track 的格式化：把 track 按 inter-sector-gap 分隔成一个个 sector。sector 由 preamble（前导号，由位模式、柱面号、扇区号组成）、data（512 bytes）、ECC 组成</p>
<h3 id="33-cylinder-skew-柱面斜进"><a class="anchor" href="#33-cylinder-skew-柱面斜进">#</a> 3.3 cylinder skew 柱面斜进</h3>
<p>不同磁道的同一个扇区号不是分布在同一个半径上的，而是有一定的斜度，保证每次 disk header 在切换磁道后都是从 0 号扇区开始。这是由于不同磁道的周长是不一样的</p>
<p>下面是计算斜进量的公式</p>
<p>cylinder skew = seek time / per sectors time</p>
<h3 id="34-interleaving"><a class="anchor" href="#34-interleaving">#</a> 3.4 interleaving</h3>
<p>扇区在磁道中不是按顺序排列的，是交错排列的。</p>
<ul>
<li>single interleaving</li>
<li>double interleaving</li>
</ul>
<h3 id="35-disk-arm-scheduling-算法"><a class="anchor" href="#35-disk-arm-scheduling-算法">#</a> 3.5 Disk ARM Scheduling 算法</h3>
<p>用于管理磁盘的磁头臂移动的算法</p>
<p>读写磁盘块的时间 = seek time+rotational time+data transfer time</p>
<p>算法会对磁道的访问请求进行排序来减小磁盘臂的移动</p>
<h4 id="351-fcfs算法"><a class="anchor" href="#351-fcfs算法">#</a> 3.5.1 FCFS 算法</h4>
<h4 id="352-ssf算法"><a class="anchor" href="#352-ssf算法">#</a> 3.5.2 SSF 算法</h4>
<p>当前位置移动到目标柱面所需 seek time 最小的优先选择</p>
<h4 id="353-elevator-算法"><a class="anchor" href="#353-elevator-算法">#</a> 3.5.3 Elevator 算法</h4>
<p>算法思想：单方向的移动磁盘臂，处理这个方向上的柱面请求，处理完成后换个方向重复执行。</p>
<h4 id="354-错误处理"><a class="anchor" href="#354-错误处理">#</a> 3.5.4 错误处理</h4>
<p>小的错误由 ECC correct，整个扇区损坏需要由 Disk controller 或者 OS 处理。</p>
<p>处理错误的两个方法：</p>
<ul>
<li>Disk controller：在传入时检查，发现错误的扇区进行标记并用空格取代，每个磁道会预留几个空白扇区用来取代 bad section。</li>
<li>OS：检查错误的扇区并记录他们</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/16/IO%E8%BE%93%E5%85%A5%E8%BE%93%E5%87%BA%E8%AE%BE%E5%A4%87/" data-id="clypfituu0004iodi7aumeedv" data-title="IO输入输出设备" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-可靠传输" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/16/%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/" class="article-date">
  <time class="dt-published" datetime="2024-06-16T04:09:00.000Z" itemprop="datePublished">2024-06-16</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/16/%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/">可靠传输</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <hr>
<h2 id="title-rdtprinciplesdate-2024-06-14-213706tags计算机网络"><a class="anchor" href="#title-rdtprinciplesdate-2024-06-14-213706tags计算机网络">#</a> title: RDTPrinciples<br>
date: 2024-06-14 21:37:06<br>
tags：计算机网络</h2>
<h2 id="重点principles-of-reliable-data-transfer"><a class="anchor" href="#重点principles-of-reliable-data-transfer">#</a> 重点：Principles of Reliable Data Transfer</h2>
<h3 id="1-可靠数据传输服务模型搭建和服务实现"><a class="anchor" href="#1-可靠数据传输服务模型搭建和服务实现">#</a> 1 可靠数据传输服务模型搭建和服务实现</h3>
<ul>
<li>提供服务：主机通过应用层在某个进程发送数据到传输层，数据通过可靠的通道 channel 到达另一个主机的应用层的某个接收进程。</li>
<li>服务实现：主机发送进程调用 rdt_send () 发送数据到传输层，传输层通过可靠的数据传输协议，使用 udt_send () 发送到链路层，经过不可靠的链路传输到目标主机下的传输层然后调用 rdt_rcv () 进入传输层，最终进入应用层进程。</li>
</ul>
<p><strong>reliable data transfer protocol</strong></p>
<p>上面提到的可靠的数据传输协议，就是实现上述的服务的过程。比如 TCP 就是一种可靠的数据传输协议。</p>
<h3 id="2-建立一个可靠的数据传输协议"><a class="anchor" href="#2-建立一个可靠的数据传输协议">#</a> 2 建立一个可靠的数据传输协议</h3>
<p>这里我们会循序渐进的介绍几种 rdt，每一种都是前一种的完善和升级。</p>
<h4 id="21-rdt10"><a class="anchor" href="#21-rdt10">#</a> 2.1 rdt1.0</h4>
<p>发送端和接送端各有一个只有一个状态的 FSM，当接收到应用层发送来的数据时，打包成 package 发送到链路层；接收端从链路层接收到 package 解包成 data 发送给上层应用层。</p>
<p><img data-src="rdt1.0.png" alt="rdt1.0"></p>
<h4 id="22-rdt20"><a class="anchor" href="#22-rdt20">#</a> 2.2 rdt2.0</h4>
<p>rdt1.0 是建立在链路层的传输通道不会发生丢包的基础上的，这是不可能的事情，包传递的过程中发生位错误是非常常见的。</p>
<p>rdt2.0 是建立在发送的 package 一定会被接收到但是允许发生 bit 错误。</p>
<ul>
<li>positive acknowledgements：确认收到消息</li>
<li>negative acknowledgements：未收到请求重发消息</li>
</ul>
<p>使用这两个信息可以使得 sender 针对这两个情况进行不同的动作，这是 rdt2.0 中非常重要的基础。这种可能重传的机制被称为 ARQ</p>
<p>ARQ 协议需要三个额外的协议来处理位错误的问题：</p>
<ul>
<li>Error detection 错误检测</li>
<li>Receiver feedback 接收端反馈</li>
<li>Retransmission 重传</li>
</ul>
<p>接下来正式介绍 rdt2.0，首先来看他的 FSM，与 rdt1.0 不同的是，rdt2.0 的 sender side 的 FSM 有两个状态，receiver side 的 FSM 只有一个状态</p>
<p>先看 sender side：两个状态分别为 wait for call from above（1） 和 wait for ack or nak（2）。当处于 1 状态时，当 rdt_send (data) 消息到来时，执行  <code>sndpkt = make_pkg(data, checksum); udt_send(sndpkt);</code>  进入状态 2；当处于状态 2 时，如果收到 rdt_rcv (rcvpkt) &amp;&amp; isNAK (rcvpkt), 执行 <code>udt_send(sndpkt)</code>  重新发包；如果收到 rdt_rcv (rcvpkt) &amp;&amp; isACK (rcvpkt), 进入状态（1）</p>
<p>再看 receiver side：检查到包损坏，发送 NAK；检查到包完好，发送 ACK 并把 package 解包的 data 发送到应用层。</p>
<p><img data-src="rdt2.0.png" alt="alt text"></p>
<p>看上去没什么问题，但实际上有个致命的错误！我们无法保证 ACK 或者 NAK 的位上没有发生损坏。所以我们仍然需要在包含 ACK 后 NAK 的包上添加 checksum。如果确认损坏，我们又该如何处理这种情况呢？</p>
<p>解决方法：<br>
在 data package 中添加 sequence number 序列号，这样 receiver 就可以知道接收的包是不是重发的。</p>
<p>举个例子：stop-and-wait protocol，接收的 package 的 sn 之前遇到过则是重发的，不一样或者增加则是新发的</p>
<p>应用这个解决方法，rdt2.1 产生了，能够很好的解决 ACKNAK 消息丢失的问题。</p>
<h4 id="221-rdt21"><a class="anchor" href="#221-rdt21">#</a> 2.2.1 rdt2.1</h4>
<p>sender side：<br>
<img data-src="rdt2.1.png" alt="alt text"></p>
<p>初始状态是 wait for call 0 from above，接收到上层发来的 data，和 0（sn）、checksum 一起打包发送给链路层，进入状态 wait for ACK or NAK 0。</p>
<p>如果接收到反馈的 package，查看发生了损坏或者是 NAK package 重发包；如果没有发生损坏或者是 ACK 进入下一个状态：wait for call 1 from above。</p>
<p>接收到上层发来的 data，和<strong> 1</strong>（sn）、checksum 一起打包发送给链路层，进入状态 wait for ACK or NAK 1。</p>
<p>如果接收到反馈的 package，查看发生了损坏或者是 NAK package 重发包；如果没有发生损坏或者是 ACK 进入下一个状态：wait for call 0 from above。完成闭环。</p>
<p>这个 FSM 用到的 sn 码只有 0 和 1。</p>
<p>receiver side：<br>
<img data-src="rdt2.1.1.png" alt="alt text"></p>
<p>只有两个状态。</p>
<p>初始状态是 wait for 0 from below，接收到链路层发来的包，检查包没有发生错误并且 sn 是 0，解压包把 data 向上层传递。把 ACK 消息<strong>和 checksum</strong> 打包发送给 sender side，进入下一个状态 wait for 1 from below；</p>
<p>如果接收到链路层发来的包，检查包发生错误，则把 NAK 和 checksum 打包发送给 receiver side； 如果接收到链路层发来的包，检查包没错误但是是序号为 1 的包，把 ACK 和 checksum 打包发送给 sender side。状态没有发生变化；</p>
<p>状态是 wait for 1 from below 时，处理流程和上面是完全对称的。</p>
<h4 id="222-rdt22"><a class="anchor" href="#222-rdt22">#</a> 2.2.2 rdt2.2</h4>
<p>rdt2.2，与 rdt2.1 不同的是：接收端必须包括被 ACK 消息确认的 packet 的 sequence number，sender 必须检查被接收的 ACK 消息确认的 package 的 sn。也就是说接收端返回的 ACK 和 NAK 消息也带有 sn 序列号，只有符合当前状态的 sn 才可以做出 rdt2.1 的反应。也就是处于状态 1 时收到序号为 0 的包会发送 ACK 但不会把 data 接收而是丢弃了</p>
<p><img data-src="rdt2.2.1.png" alt="alt text"></p>
<p><img data-src="rdt2.2.2.png" alt="alt text"></p>
<h4 id="23-rdt30"><a class="anchor" href="#23-rdt30">#</a> 2.3 rdt3.0</h4>
<p>现在要开始考虑链路层的传输会有丢包的情况，这是最可能发生的事情，所以现在的应用大多是 rdt3.0 的协议。</p>
<p>伴随着这个问题产生的还有两个顾虑：如何检测丢包以及当丢包时需要做出的反应</p>
<p>我们会把检测丢包和恢复重发的任务放在 sender side</p>
<p>那么如何检测丢包呢？sender side 在一段固定的时间内没有收到发送的 package 的 ACK，就可以认为这个包丢失了，开始重传。如果发送的 package 没有丢失，只是在链路层中遭遇了拥塞导致延迟时间超过设定的 timeout，也会触发重发，这样就会导致 duplicate data packets。幸运的是，可以采用 rdt2.2 的序号机制来无视多余的重发包。</p>
<p>具体流程可以看 FSM</p>
<p><img data-src="rdt3.0sender.png" alt="alt text"></p>
<h3 id="3-pipelined-reliable-data-transfer-protocols"><a class="anchor" href="#3-pipelined-reliable-data-transfer-protocols">#</a> 3 Pipelined Reliable Data Transfer Protocols</h3>
<p>stop-and-wait 类型的协议性能无法满足需求，使用流水线 rdt 协议能提高性能。</p>
<p>流水线模式 sender 和 receiver 都可以发送多个 packet，不需要等待 ACK。为了实现这样的特性采用流水线技术。</p>
<p>实现方法：</p>
<ol>
<li>sequence number 的范围可以增长，且每一个在传输的 packet 都有一个独特的 sn。</li>
<li>sender 和 receiver 设立 buffer 用来发送或者接收多个包。sender 必须设立 buffer 来缓存没有 ACK 的包用来重发。receiver 也需要为接收的 packet 设立 buffer 来缓存</li>
</ol>
<h3 id="4-go-back-n-gbn"><a class="anchor" href="#4-go-back-n-gbn">#</a> 4 Go-Back-N GBN</h3>
<p>首先确定一点，GBN 协议是一个流水线 RDT 协议。但是，GBN 协议中 sender 会限制 buffer 中未 ACK 的 packet 的数量为 N。<br>
<img data-src="GBN.png" alt="alt text"><br>
sn 的范围分为三部分。一是已经发送且 ACK 的 sn [0~base-1]，二是已经发送但是没有 ACK 的 sn [ base~nextseqnum-1]，第三是未发送的待分配的 sn [ nextseqnum~n-1]。第二和第三部分之和为 N。</p>
<p>N 也被称为 window size；GBN 也被称为 sliding-window protocol。window size 是可以变化的，比如在 tcp 协议中，发生 congest 时会减小。sn 码在实际操作中是被封装在 section 中的，有位数限制。k 位的 sn 码最大为 2 的 k 次方 - 1。tcp 的 sn 码一共 32bits</p>
<p>GBN 协议的 FSM 表示如下：<br>
<img data-src="GBNsender.png" alt="alt text"><br>
sender 在 timeout 后，会从 base 开始重新一轮发包；如果某个 ACK 没收到，那么后面收到的 ACK 是不会更新 base 的，所以就会导致发了很多冗余的 packet。这是个问题。<br>
<img data-src="GBNreceiver.png" alt="alt text"><br>
<img data-src="GBNOp.png" alt="alt text"></p>
<h3 id="4-selective-repeat-sr"><a class="anchor" href="#4-selective-repeat-sr">#</a> 4 Selective Repeat SR</h3>
<p>GBN 协议也是存在缺陷的，一个 GBN 协议包的出错或导致大量的包重发活动。SR 协议能够避免不必要的包重发通过让 sender 只重发那些被发送端认为是出错的丢包的 packet。</p>
<p>为解决这个问题，SR 升级了 sn 码的属性，在【base~nextseqnum 中允许存在 ack 的 sn 并且做上标记】。SR 的 receiver 会承认 out-order 的 packet 并且发送 ACK，sender 也会接收这些 ACK。但是 receiver 的 buffer 仍然会保留这些被接受的 packet 直到比他的 sn 小的 miss 的 packet 都被接收到才不保留。</p>
<p><img data-src="SRsn.png" alt="alt text"><br>
rcv_base 取决于期望接收到的 packet 的 sn，也就是被接受且发送 ack 的下一个 sn<br>
<img data-src="SRsendereventandactor.png" alt="alt text"><br>
<img data-src="SRreceivereventandactor.png" alt="alt text"></p>
<p>SR 和 GNB 的不同在于，所有的接收到 packet 都会被打上 ack，base 会跳跃到最小的未被接收到的 sn 上，可能一跳一大段！但是 GBN 就不行，他没有处理 out-order 的 packet 所以一旦丢包 base 就会卡住，并且 timeout 后又从 base 开始发包一步一步的递增。SR 的 base 是具有跳跃性的！</p>
<h4 id="42-todosr的lack"><a class="anchor" href="#42-todosr的lack">#</a> 4.2 TODO：SR 的 lack</h4>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/16/%E5%8F%AF%E9%9D%A0%E4%BC%A0%E8%BE%93/" data-id="clypfituw000aiodiaehxhyob" data-title="可靠传输" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-设计模式与UML" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8EUML/" class="article-date">
  <time class="dt-published" datetime="2024-06-15T04:12:44.000Z" itemprop="datePublished">2024-06-15</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8EUML/">设计模式与UML</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-初始阶段中确定用例-use-case"><a class="anchor" href="#1-初始阶段中确定用例-use-case">#</a> 1 初始阶段中确定用例 use case</h2>
<p><strong>用例是一组相关的成功和失败场景的集合，用来描述参与者如何使用系统来实现其目标。</strong></p>
<p><strong>参与者：</strong> 某些具有行为的事务。</p>
<p><strong>场景：</strong> 使用系统的一个特定情节或用例的一条执行路径。如使用现金购买商品的场景。</p>
<p>** 用例模型是文本的形式存在的。** 用例编写是涉及的领域：场景、范围、级别、主要参与者 main actor、<strong>涉众及其关注列表</strong>、前置条件、后置条件、<strong>主成功场景（完成某个目标进行的场景的集合，有顺序）</strong>、扩展（替代流程）、技术和数据变元表</p>
<ul>
<li>UML 用例图<br>
<img data-src="%E7%94%A8%E4%BE%8B%E5%9B%BE.png" alt="用例图"><br>
 main actor 放在左边，辅助 actor 放在右边。中间是一个一个用例。</li>
</ul>
<h2 id="2-细化迭代一"><a class="anchor" href="#2-细化迭代一">#</a> 2 细化迭代一</h2>
<h3 id="21-grasp-设计模式"><a class="anchor" href="#21-grasp-设计模式">#</a> 2.1 GRASP 设计模式</h3>
<p>目标：学习面向对象设计的 5 个 GRASP 原则或模式。</p>
<h4 id="211-creator-模式"><a class="anchor" href="#211-creator-模式">#</a> 2.1.1 Creator 模式</h4>
<p>解决 OOD 中对象的创建问题</p>
<p>建议：当以下条件部分存在时，将创建类 A 对象的职责分配给类 B</p>
<ul>
<li>B 包含 A，或者说 A 是 B 的组成部分之一；</li>
<li>B 记录 A</li>
<li>B 紧密地使用 A</li>
<li>B 具有 A 初始化时使用的数据</li>
</ul>
<h4 id="212-information-expert-模式"><a class="anchor" href="#212-information-expert-模式">#</a> 2.1.2 Information Expert 模式</h4>
<p>类对象信息的持有者，可以充当信息专家。</p>
<p>问题：给对象分配职责的基本原则是什么？</p>
<p>建议：把职责分配给具有完成该职责所需信息的那个类。完成某个职责尽量不要去访问别的类的信息，而是使用自己的类的信息。可以调用专家类来查询所需的信息。</p>
<h4 id="213-low-coupling-低耦合模式"><a class="anchor" href="#213-low-coupling-低耦合模式">#</a> 2.1.3 Low Coupling 低耦合模式</h4>
<p>coupling：元素与其他元素之间的连接、感知及依赖的程度的度量。</p>
<p>问题：如何减少因变化产生的影响？</p>
<p>解决方案：分配职责以使不必要的耦合保持在较低的水平。用该原则对可选方案进行评估。</p>
<p>信息专家的设计同时也能体现低耦合的设计。</p>
<h4 id="214-controller-模式"><a class="anchor" href="#214-controller-模式">#</a> 2.1.4 Controller 模式</h4>
<p>问题：在 UI 层（前端）之上的那个对象应该首先从 UI 层接收该消息呢？也就是 user 在 UI 界面触发的事件会发送请求，这些请求最先会被领域层中接收。</p>
<p>解决方案：把这个职责分配给能代表下列选择之一的对象：</p>
<ol>
<li>代表全部 “系统”，“根对象”，运行软件的设备或主要的子系统</li>
<li>代表发生系统操作的用例场景（用例或者对话）</li>
</ol>
<h4 id="215-high-cohesion-模式"><a class="anchor" href="#215-high-cohesion-模式">#</a> 2.1.5 High Cohesion 模式</h4>
<p>问题：怎样使对象保持有内聚、可理解和可管理，同时具有支持低耦合的附加作用</p>
<p>解决方案：选择保持高内聚的方案，将工作委派和分配给其他的合适的对象。在一个模块或者类中的元素紧密联系，共同完成该模块的任务。即类中的元素的存在都是为了该类所负责的职责而存在的，不能与其他的模块产生联系。</p>
<h4 id="216-indirection-模式"><a class="anchor" href="#216-indirection-模式">#</a> 2.1.6 Indirection 模式</h4>
<p>间接性是在两个事物或多个事物中间作为中介，将提供服务方的接口隐藏到自己的接口中，并对接收服务端开放，达到避免直接耦合的作用。</p>
<p>计算机科学中有句名言：**“计算机科学中的大部分问题都可以通过添加一层间接性来解决。”** 降低事物之间的耦合性的重要性可见一斑。</p>
<p>实现构件之间的低耦合，涉及到大量的 GoF 模式，而且大量的间接性中介都是纯虚构的。</p>
<h4 id="217-pure-fabrication-纯虚构"><a class="anchor" href="#217-pure-fabrication-纯虚构">#</a> 2.1.7 Pure Fabrication 纯虚构</h4>
<p>问题：当你不想违背高内聚和低耦合时，但是基于专家模式所提供的方案不合适时，那些对象应该承担这一职责？</p>
<p>解决方案：对人为制造的类分配一组高内聚的职责，该类并不代表问题领域的概念，是一个虚构的事务，用来支持高内聚和低耦合。这种类是凭空虚构的。</p>
<h4 id="218-polymorphism-多态性"><a class="anchor" href="#218-polymorphism-多态性">#</a> 2.1.8 Polymorphism 多态性</h4>
<p>问题：如何处理基于类型的选择？如何创建可插拔的软件构件</p>
<p>解决方案：当相关选择或行为随类型（类）有所不同时，使用多态操作作为变化的行为类型分配职责。</p>
<p>准则：何时使用接口进行设计</p>
<p>多态要求大量使用抽象类或接口，当你想要支持多态，又不想约束与特定的类层次结构时，使用接口，反之使用超类。</p>
<h4 id="219-protected-variations-防止变异"><a class="anchor" href="#219-protected-variations-防止变异">#</a> 2.1.9 Protected Variations 防止变异</h4>
<p>问题：如何设计对象、子系统和系统，使其内部的变化或不稳定性不会对其他元素产生不良影响？</p>
<p>解决方案：</p>
<ul>
<li>识别预计变化或不稳定之处，分配职责用以在这些变化之外创建稳定接口。</li>
</ul>
<p><strong>源于防止变异的机制</strong></p>
<ul>
<li>Data-Driven Design</li>
<li>Service Lookup</li>
<li>Interpreter-Driven Design</li>
<li>Reflective or Meta-Level Design</li>
<li>Uniform Access</li>
</ul>
<p>不要跟陌生人讲话原则</p>
<h2 id="3-uml-类图"><a class="anchor" href="#3-uml-类图">#</a> 3 UML 类图</h2>
<p><img data-src="%E5%B8%B8%E7%94%A8%E7%9A%84UML%E7%B1%BB%E5%9B%BE%E8%A1%A8%E7%A4%BA%E6%B3%95.png" alt="常用的UML类图表示法"></p>
<h2 id="4-类关系"><a class="anchor" href="#4-类关系">#</a> 4 类关系</h2>
<h3 id="41-依赖-dependence"><a class="anchor" href="#41-依赖-dependence">#</a> 4.1 依赖 dependence</h3>
<ul>
<li>依赖在 UML 类图中使用从客户到提供者的虚线箭头表示</li>
</ul>
<p>如何确定一个类是另一个类的依赖呢？</p>
<ul>
<li>拥有提供者类型的属性，客户类拥有提供者类的实例作为其属性</li>
<li>向提供者发送消息。调用提供者的方法</li>
<li>接收提供者类型的参数，类方法中接收提供者实例作为参数</li>
<li>提供者是超类和接口，自己是子类或接口的实现者。</li>
</ul>
<h3 id="42-聚合-aggregation"><a class="anchor" href="#42-聚合-aggregation">#</a> 4.2 聚合 aggregation</h3>
<p>模糊的关联，不精确的暗示了整体 - 部分的关系。</p>
<h3 id="43-组合-composition"><a class="anchor" href="#43-组合-composition">#</a> 4.3 组合 composition</h3>
<p>一种很强的整体 - 部分聚合关系。组合有着以下几层含义：</p>
<ol>
<li>在某一时刻，部分的实例只属于一个组成实例</li>
<li>部分必须总是属于组成，不能脱离组成单独存在</li>
<li>组成负责创建和删除部分，能保证部分不会脱离组成而存在；组成销毁，到导致部分的销毁。</li>
<li>用带有实心菱形箭头的关联线表示组合关系，箭头方向指向组成类。</li>
</ol>
<h3 id="44-泛化-generalization"><a class="anchor" href="#44-泛化-generalization">#</a> 4.4 泛化 generalization</h3>
<p>在多个概念中识别共性和定义超类和子类关系的活动。</p>
<h2 id="5-特殊类"><a class="anchor" href="#5-特殊类">#</a> 5 特殊类</h2>
<h3 id="51-单实例类"><a class="anchor" href="#51-单实例类">#</a> 5.1 单实例类</h3>
<p>在系统中只允许存在一个实例的类，比如 GoF 设计模式里的工厂类，在 UML 类图中该类的视图的右上角标注 1.</p>
<h3 id="52-模板类和接口"><a class="anchor" href="#52-模板类和接口">#</a> 5.2 模板类和接口</h3>
<p>模板类的右上角表面模板符号</p>
<h3 id="6-gof-设计模式"><a class="anchor" href="#6-gof-设计模式">#</a> 6 GoF 设计模式</h3>
<p><strong>设计模式一共有 23 种，接下来我会一一介绍。由于设计模式并非全部都是实用的，所以我会针对常见的 15 种模式进行详细的介绍，其他模式做简单的介绍。</strong></p>
<p>在介绍 GoF 设计模式之前，我先阐述一些基本的概念。</p>
<h2 id="适配器-adapter"><a class="anchor" href="#适配器-adapter">#</a> 适配器 Adapter</h2>
<p>问题：如何解决不相容的接口问题，或者如何为具有不同接口的类似构建提供稳定的接口？</p>
<p>解决方案：通过适配器将构件的原有的接口转换为其他的接口。使用接口和多态</p>
<p>一个事物可能会使用到不同的第三方服务，可能存在类似服务但接口都不尽相同。为了提供稳定的接口，可以采用增加一层间接性对象，也就是适配器，把不同的外部接口调整为在应用程序内使用的一致接口。</p>
<h3 id="工厂factory"><a class="anchor" href="#工厂factory">#</a> 工厂（Factory）</h3>
<p>工厂，也叫简单工厂或者具体工厂。</p>
<p>介绍 Factory 设计模式之前，引出一个问题。前面介绍的适配器，有没有想过在实际编程中，是由什么对象进行创建的。如果把适配器的创建交由需要这个适配器的对象进行创建，则又会使得该对象的职责越位，这是不建议的。</p>
<p>这一点可以在一个基本设计原则中反映，<strong>设计要保持关注分离（separation of concern）</strong>。</p>
<p>为解决这个问题，便需要工厂模式。Factory 可以分离复杂的创建的职责，并将器分配给内聚的帮助者对象；同时隐藏潜在的复杂创建逻辑；允许引入提高性能的内存管理策略（对象缓存和再生）。</p>
<p>具体做法：<strong>创建一个工厂的纯虚构对象来处理这些创建职责</strong></p>
<h3 id="单实例类singleton"><a class="anchor" href="#单实例类singleton">#</a> 单实例类 (Singleton)</h3>
<p>不知道读到这里有没有发现，适配器上存在的问题，在工厂上也同时存在（U・ェ・U），谁来创建工厂对象实例呢？</p>
<p>这里介绍一种解决方案：单实例类</p>
<p>单实例类是只能拥有唯一实例的类。且实例的创建要对全局可见和单点访问，对类定义静态方法 getInstance 用以返回单实例。</p>
<h3 id="策略设计模式"><a class="anchor" href="#策略设计模式">#</a> 策略设计模式</h3>
<p>问题：</p>
<p>如何设计变化但相关的算法或政策？如何设计才能使这些算法或政策具有可变更的能力</p>
<p>解决方案：</p>
<p>在单独类中分别定义每种算法、政策、策略，并且使其具有共同接口</p>
<p><img data-src="Strategy.png" alt="Strategy"></p>
<p>利用多态设计根据对象进行动态变化的不同策略，这里的策略可以是解决某问题的算法，或者政策，针对不同的对象实例的相同问题需要不同的算法。</p>
<p>创建这些算法对象同样的可以采用工厂模式进行分发。</p>
<h3 id="组合-composition-设计模式"><a class="anchor" href="#组合-composition-设计模式">#</a> 组合 Composition 设计模式</h3>
<p>问题：</p>
<p>如何能够像处理非组合（原子）对象一样，多态地处理（多个）一组对象或者具有组合结构的对象呢？</p>
<p>解决方案：</p>
<p>定义组合和原子对象的类，是他们能够实现相同的接口。定义一个具有组合性质的类，实现接口，在多个子类中重写接口</p>
<p>基类是组合，子类是部分，重写基类的部分方法</p>
<h3 id="外观-facade"><a class="anchor" href="#外观-facade">#</a> 外观 Facade</h3>
<p>问题：</p>
<p>对一组完全不同实现或接口需要公共的、统一的接口。可能会与子系统内部的大量事物产生耦合，或者子系统的实现会被改变，怎么处理？</p>
<p>解决方案：</p>
<p>对子系统定义的唯一的接触点 --- 使用 Facade 对象封装子系统。该 Facade 对象提供了唯一和统一的接口，并负责与子系统构件进行写作。就是将子系统隐藏在一个对象之后，防止子系统产生编译</p>
<h3 id="observer-publish-subscribe"><a class="anchor" href="#observer-publish-subscribe">#</a> Observer （Publish-Subscribe）</h3>
<p>问题：不同类型的 Subscriber 对象关注着 Publisher 对象的状态变化或事件，并且想要在 Publisher 对象产生事件时，自己以特殊的方式做出响应，同时 Publisher 想要和 Subscriber 保持低耦合，即 Subscriber 并不知道 Publisher 的存在。</p>
<p>解决方案：定义一个 Watch 接口（监听器），Subscriber 实现该接口，发布者动态注册关注某事件的 Subscriber，并在事件发生时通知。</p>
<p>就是将订阅者的一部分需要发布者的功能提取出来当做接口，这样发布者就是和接口耦合而不是订阅者。</p>
<h2 id="历年考试简答题常考"><a class="anchor" href="#历年考试简答题常考">#</a> 历年考试简答题常考</h2>
<ol>
<li>What is design pattern?</li>
</ol>
<p>A pattern is a named problem / solution pair that can be applied in new contexts, with advice on how to apply it in novel situations and discussion of its trade-offs</p>
<ol start="2">
<li>
<p>explain GRASP and GoF<br>
GRASP: General Responsibility Assignment Software Patterns. 描述了对象设计和职责分配的基本原则</p>
</li>
<li>
<p>What is an iteration?</p>
</li>
</ol>
<p>iteration refers to a single development cycle in which a set of tasks or activities are completed. It is a single execution of a set of instruction that are to be repeated until a specified result is obtained</p>
<p>What are the benefits of Iterative Development?</p>
<p>① Critical risks are resolved before making large investments.</p>
<p>② Initial iterations enable early user feedback.</p>
<p>③ Testing and integration are continuous.</p>
<p>④ Objective milestones focus on the short term.</p>
<p>⑤ Progress is measured by assessing implementations.</p>
<p>⑥ Partial implementations can be deployed.</p>
<p>⑦ Each iteration produces an executable release, an additional increment of the system an it includes integration and test.</p>
<ol start="3">
<li>What is Liskov substitutability principle? 里欧替换原则</li>
</ol>
<ul>
<li>Objects of a superclass should be replaceable with objects of a subclass with affecting the correctness of the grogram</li>
</ul>
<ol start="4">
<li><img data-src="%E7%AE%80%E7%AD%94%E9%A2%98.png" alt="简答题"></li>
<li>What is Open-Close principle</li>
</ol>
<p>Software entities should be open for extension but closed for modification</p>
<ol start="6">
<li>What is UML</li>
</ol>
<ul>
<li>The UML is a language for visualizing, specifying, constructing, documenting the artifacts of a software-intensive system</li>
</ul>
<p>benefits:</p>
<ul>
<li>构建 UML 模型可以帮助我们更好的理解软件</li>
<li>UML 构建的模型是精确的，是不荒料的，是可实现的</li>
<li>UML 模型可以被编程语言实现</li>
</ul>
<ol start="7">
<li>什么是 RUP，列举 4 个 phase 和 9 个 workflows</li>
</ol>
<ul>
<li>RUP（rational 统一过程）强调使用迭代和增量开发方法，旨在通过一系列预定义的阶段来管理软件项目的各个方面，包括需求、设计、编码和测试。</li>
<li>inception elaboration construction transition</li>
<li>principle,business modeling,requirements,analyse and design,implementation test,deployment,configuration and change management,project management,environment</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/15/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E4%B8%8EUML/" data-id="clypfitv9001diodi0rgf53vj" data-title="设计模式与UML" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%9E%B6%E6%9E%84%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">架构和设计模式</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-数字逻辑总复习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/12/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E6%80%BB%E5%A4%8D%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2024-06-12T08:29:44.000Z" itemprop="datePublished">2024-06-12</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/12/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E6%80%BB%E5%A4%8D%E4%B9%A0/">数字逻辑总复习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-二进制"><a class="anchor" href="#1-二进制">#</a> 1 二进制</h2>
<h3 id="11-the-art-of-managing-complexity"><a class="anchor" href="#11-the-art-of-managing-complexity">#</a> 1.1 The Art of Managing Complexity</h3>
<ul>
<li>Abstraction</li>
</ul>
<p>隐藏不重要的细节</p>
<ul>
<li>Discipline 约束</li>
</ul>
<p>一种内在限制，可以帮助我们更高度地抽象化</p>
<ul>
<li>The Three -y's
<ul>
<li>Hierarchy 层次化</li>
</ul>
</li>
</ul>
<p>系统划分为模块和子模块</p>
<ul>
<li>Modularity 模块化</li>
</ul>
<p>所有模块都有定义好的功能和接口</p>
<ul>
<li>Regularity 规整化</li>
</ul>
<p>模块追求 uniformity，可以被 reused</p>
<h3 id="12-数制"><a class="anchor" href="#12-数制">#</a> 1.2 数制</h3>
<p><strong>内容：</strong></p>
<p>进制数之间的转化：整数和小数</p>
<p>浮点数的 IEEE 格式化</p>
<p>可以去看计组或者计概的笔记</p>
<h3 id="13-二进制运算"><a class="anchor" href="#13-二进制运算">#</a> 1.3 二进制运算</h3>
<p>二进制加减、二进制原型的反码、补码</p>
<h3 id="14-logic-gates"><a class="anchor" href="#14-logic-gates">#</a> 1.4 Logic Gates</h3>
<p>常见的逻辑门有：NOT AND OR NAND NOR ，其中被分为单输入、多输入</p>
<h4 id="141-logic-level"><a class="anchor" href="#141-logic-level">#</a> 1.4.1 Logic Level</h4>
<p>使用 Discrete Voltages 来代表 0（低电平）和 1（高电平）</p>
<p>输入端和输出端的最小可视为高（低）电平的电压的差值（记住大减小即可）被称为噪声容限（noise margin），分为高电平噪声容限和低电平噪声容限</p>
<h3 id="15-晶体管transistor"><a class="anchor" href="#15-晶体管transistor">#</a> 1.5 晶体管 Transistor</h3>
<ul>
<li>nMOS：接低电平 输入端 0 不可过、1 可过</li>
<li>pMOS：接高电平 输入端 1 可过、0 不可过</li>
</ul>
<p>组合成逻辑门：</p>
<ul>
<li>非门<br>
<img data-src="image.png" alt="alt text"></li>
<li>与非门：nMos 串联，pMos 并联<br>
<img data-src="image-1.png" alt="alt text"></li>
<li>或非门：nMos 并联，pMos 串联<br>
<img data-src="image-2.png" alt="alt text"></li>
<li>如果要构造与门或门，就在与非门和或非门输入端加上非门</li>
<li>要多输入就并串几个</li>
</ul>
<h2 id="2-组合逻辑电路"><a class="anchor" href="#2-组合逻辑电路">#</a> 2 组合逻辑电路</h2>
<h3 id="21-主题总览"><a class="anchor" href="#21-主题总览">#</a> 2.1 主题总览</h3>
<ul>
<li>
<p>Boolean Equations</p>
</li>
<li>
<p>Boolean Algebra</p>
</li>
<li>
<p>From Logic to Gates</p>
</li>
<li>
<p>Multilevel Combinational Logic</p>
</li>
<li>
<p>X's and Z's</p>
</li>
<li>
<p>Karnaugh Maps</p>
</li>
<li>
<p>Combinational Building Blocks</p>
</li>
<li>
<p>Timing</p>
</li>
<li>
<p>node： A node is a wire, whose voltage conveys a discrete-valued variable</p>
<ul>
<li>input</li>
<li>output</li>
<li>internal</li>
</ul>
</li>
</ul>
<h3 id="22-boolean-equations-布尔表达式"><a class="anchor" href="#22-boolean-equations-布尔表达式">#</a> 2.2 Boolean Equations 布尔表达式</h3>
<p>取反：A'；取与（积）：A.B；取或（和）：A+B</p>
<ul>
<li>最小项 Minterm：化简后全部积起来</li>
<li>最大项 Maxterm：化简后全部和起来</li>
</ul>
<p><strong>SOP form: 使用和式将与式连接起来的模式</strong></p>
<ul>
<li>每一行都有最小项</li>
<li>所有的布尔表达式都可以写成 SOPform</li>
<li>最小项之和</li>
<li>Y 值为 1 的需要</li>
</ul>
<p><strong>POS form：使用积式将和式连接起来</strong></p>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>max</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>0</td>
<td>A+B</td>
</tr>
<tr>
<td>1</td>
<td>0</td>
<td>A'+B</td>
</tr>
<tr>
<td>0</td>
<td>1</td>
<td>A+B'</td>
</tr>
<tr>
<td>1</td>
<td>1</td>
<td>A'+B'</td>
</tr>
</tbody>
</table>
<ul>
<li>每一行都有最大项</li>
<li>所有的布尔表达式都可以写成 POSform</li>
<li>最大项之积</li>
<li>Y 值为 0 的需要</li>
</ul>
<p><strong>Normalterm form：变量只出现一次的式子</strong></p>
<h3 id="23-boolean-algebra-布尔代数"><a class="anchor" href="#23-boolean-algebra-布尔代数">#</a> 2.3 Boolean Algebra 布尔代数</h3>
<p>布尔运算规律</p>
<ul>
<li>同一性：B・1=B；B+0=B；</li>
<li>零元律</li>
<li>重叠率</li>
<li>回旋</li>
<li>互补：B・B'=0；B+B'=1</li>
<li>交换律</li>
<li>结合律</li>
<li>分配律</li>
<li><strong>吸收律</strong>：<strong>B·（B+C）=B；B+B·C=B</strong></li>
<li><strong>合并律：（B・C）+（B・C'）=B；（B+C）・（B+C'）=B</strong></li>
<li><strong>一致律：</strong>
<ul>
<li>（B·C）+（B'·D）+（C·D）=（B·C）+（B'·D）</li>
<li>（B+C）·（B'+D）·（C+D）=（B+C）·（B'+D）</li>
</ul>
</li>
<li>德摩根律</li>
</ul>
<h3 id="24-schematic-逻辑电路原理图"><a class="anchor" href="#24-schematic-逻辑电路原理图">#</a> 2.4 Schematic 逻辑电路原理图</h3>
<p>按数电的经验来完成</p>
<h3 id="25-multilevel-combinational-logic"><a class="anchor" href="#25-multilevel-combinational-logic">#</a> 2.5 Multilevel Combinational Logic</h3>
<h4 id="251-hardware-reduction"><a class="anchor" href="#251-hardware-reduction">#</a> 2.5.1 Hardware Reduction</h4>
<p><strong>NANDs 和 NORs 的使用能提高效率，所以需要把布尔表达式化成与非或非式，这个翻译过程称为 Circuit Manipulations</strong></p>
<p>使用前面介绍的布尔代数规律进行转换</p>
<h4 id="252-bubble-pushing-气泡推进"><a class="anchor" href="#252-bubble-pushing-气泡推进">#</a> 2.5.2 Bubble Pushing 气泡推进</h4>
<p>大量的与非门和或非门使得表达式的阅读变得困难，使用气泡推进使得 node 两边要么没有取反要么都取反</p>
<p>原理：</p>
<ul>
<li>Y=（AB）’=A'+B'</li>
<li>Y=（A+B）’=A'·B'<br>
 两种推进方式：</li>
<li>Backward：<br>
<img data-src="Backward.png" alt="alt text"></li>
<li>Forward：<br>
<img data-src="Forward.png" alt="alt text"></li>
</ul>
<p>技巧：推进的时候，负号移动，变元器件</p>
<h3 id="26-x和z"><a class="anchor" href="#26-x和z">#</a> 2.6 X 和 Z</h3>
<ul>
<li>
<p>X<br>
Content：电路尽力同时将输出置为 1 和 0，此时输出值被称为 X，也叫做非法值。</p>
</li>
<li>
<p>Z<br>
Floating 浮空值：Z 表示某输出值既没有被驱动为 0 也没有被驱动为 1，常见于三台缓冲器（带有 enable 的原件）</p>
</li>
</ul>
<h3 id="27-卡诺式图"><a class="anchor" href="#27-卡诺式图">#</a> 2.7 卡诺式图</h3>
<p>目的：化简布尔表达式</p>
<p>详见数电</p>
<h3 id="28-组合逻辑模块-combinational-building-blocks"><a class="anchor" href="#28-组合逻辑模块-combinational-building-blocks">#</a> 2.8 组合逻辑模块 Combinational Building Blocks</h3>
<h4 id="281-decorders-译码器"><a class="anchor" href="#281-decorders-译码器">#</a> 2.8.1 Decorders 译码器</h4>
<p>译码器是多输入、多输出的逻辑电路，用来把一段编码转换成另一段编码。</p>
<p>译码器有 enable inputs，用来选择功能</p>
<p>常见的译码器有：N-to-2N Decoders</p>
<ul>
<li>N inputs and 2N outputs</li>
<li>One-hot outputs：在一个时间段里只有多个输出中只有一个高电平</li>
</ul>
<p>2-4 Decoder 的实现：<br>
<img data-src="2-4decoder.png" alt="alt text"></p>
<p>就是在输入端加一个置反的和不置反的一起加到 AND 门下，有多少个输出就有多少个 AND 门</p>
<p>可以使用 decoder 的输出来组合成各种各样的逻辑电路，因为一个 a-b decoder 实际上就是 ab 的所有 minterm 的组合</p>
<h4 id="282-multiplexers-多路复用器"><a class="anchor" href="#282-multiplexers-多路复用器">#</a> 2.8.2 Multiplexers 多路复用器</h4>
<p>与译码器的少变多不同，mux 是在多个输入中选择特定的输入输出 1，也就是多变少。</p>
<p>MUX 不仅需要输入端，也需要选择端 select（S） ，有 N 个 select 就选择 2 的 N 次方个输入连接输出</p>
<p><strong>4-to-1 MUX</strong></p>
<p>原理图：<br>
<img data-src="4-1MUX.png" alt="alt text"></p>
<p>小的 MUX 可以组合成大的 MUX</p>
<p>MUX 可以使用 lookup table 来实现逻辑内容，Y=F（S1，S2，・・・），可以根据查找表决定要选择的输入，置为 1，或者是逻辑变量也为 1 的逻辑变量；其他的输入置为 0 或者逻辑变量也为 0 的逻辑变量；就可以实现逻辑表达式。</p>
<h3 id="29-timing-时序"><a class="anchor" href="#29-timing-时序">#</a> 2.9 Timing 时序</h3>
<ul>
<li>输入改变后输出作出改变时发生的延迟</li>
<li>Timing diagram（时序图）：描述一个电路在输入端发生变化时产生的瞬间变化。</li>
</ul>
<p><img data-src="%E6%97%B6%E5%BA%8F%E5%9B%BE.png" alt="alt text"></p>
<ul>
<li>Propagation delay（传播延迟）：tpd = 从 input 到 output 的最大延迟；</li>
<li>Contamination delay（最小延迟）：tcd = 从 input 到 output 的最小延迟。</li>
</ul>
<p>delay 产生的原因：</p>
<ul>
<li>电路中的电容和电阻</li>
<li>光速的限制</li>
</ul>
<p>为什么 tpd 和 tcd 通常是不一样的：</p>
<ul>
<li>
<p>上升沿延迟和下降沿延迟是不一样的</p>
</li>
<li>
<p>多个输入和输出之间延迟不同</p>
</li>
<li>
<p>电路的温度</p>
</li>
<li>
<p><strong>Critical Path 关键路径</strong><br>
 the longest,slowest path</p>
</li>
<li>
<p><strong>Short Path 最短路径</strong><br>
 the shortest,fastest path</p>
</li>
</ul>
<p><strong>Glitch 毛刺</strong></p>
<p>当一次输入端改变引起输出端多次改变时就会发生毛刺</p>
<p>如何修正：</p>
<p>卡诺式图的圈连接起来</p>
<h2 id="3-时序逻辑电路"><a class="anchor" href="#3-时序逻辑电路">#</a> 3 时序逻辑电路</h2>
<p>主题：</p>
<ul>
<li>Latches and Flip-Flops</li>
<li>Synchronous Logic Design</li>
<li>Finite State Machines</li>
<li>Timing of Sequential Logic</li>
<li>Parallelism</li>
</ul>
<p>时序逻辑电路的输出取决于之前的输入和当前的输入，所以具有记忆功能 memory。</p>
<ul>
<li>state：记住之前的输入，就是当前电路的状态</li>
<li>Latches and flip-flops：储存一个状态的状态元素集合</li>
<li>synchronous sequential circuits：由 flip-flops 组合成的组合逻辑电路</li>
</ul>
<h3 id="31-锁存器latch"><a class="anchor" href="#31-锁存器latch">#</a> 3.1 锁存器 Latch</h3>
<p><strong>Bistable Circuit：双稳态元件，可以输出一正一反两个输出，没有输入，用于储存。</strong></p>
<ul>
<li><strong>SR Latch SR 锁存器</strong></li>
</ul>
<p>特性：S 是 set 位，R 是 reset 位，S=1R=0 时 Q 被设置为 1，当 S=0R=1 时 Q 被重置为 0；S=0R=0 时 Q 保持不变，储存；S=1R=1 是非法状态</p>
<ul>
<li><strong>D Latch D 锁存器</strong></li>
</ul>
<p>特性：</p>
<ul>
<li>两个输入：D 和 CLK 时钟信号</li>
<li>当 CLK=1 时，Q 变成和 D 一样；当 CLK=0 时，Q 保持不变</li>
</ul>
<h3 id="32-触发器flip-flops"><a class="anchor" href="#32-触发器flip-flops">#</a> 3.2 触发器 flip-flops</h3>
<ul>
<li><strong>D Flip-Flop</strong></li>
</ul>
<p>D 寄存器，两个输入：CLK 和 D；CLK 上升沿时，D 赋值给 Q；CLK 下降沿时，保持。</p>
<p>注意和 D Latch 的区别：D 锁存器是在 CLK 是 1 时候发生作用，在这期间 D 的变化都会引起 Q 的变化；而 D 触发器只有在 CLK 上升时，时间只有一刹那。</p>
<p><strong>Enable Flip-flops 带使能端的触发器</strong></p>
<p>当 E 是 1 时，触发器是普通的触发器；当 E 是 0 时，触发器只有保持功能。</p>
<p><strong>Resettable Flip-Flops 带重置端的触发器</strong></p>
<p>当 Reset=1 时，Q 被重置为 0；当 Reset=0 时，触发器为普通的 D 触发器</p>
<p>两种类型：</p>
<ul>
<li>Synchronous 同步的：只有在 CLK 上升沿发生作用</li>
<li>Asynchronous 异步的：即时的</li>
</ul>
<p><strong>Settable Flip-Flops 带重置端的触发器</strong></p>
<p>当 Set=1 时，Q 被重置为 1；当 Set=0 时，触发器为普通的 D 触发器</p>
<p>两种类型：</p>
<ul>
<li>Synchronous 同步的：只有在 CLK 上升沿发生作用</li>
<li>Asynchronous 异步的：即时的</li>
</ul>
<h3 id="33-synchronous-logic-design-同步逻辑电路设计"><a class="anchor" href="#33-synchronous-logic-design-同步逻辑电路设计">#</a> 3.3 synchronous logic design 同步逻辑电路设计</h3>
<p>特性：</p>
<ul>
<li>使用寄存器来切开环路</li>
<li>寄存器保存着系统的状态</li>
<li>在上升沿时系统的状态发生改变</li>
<li>同步时序电路组成规则：
<ul>
<li>所有的元件是寄存器或者组合元器件</li>
<li>至少由一个元件是寄存器</li>
<li>所有的寄存器都接收同一个时钟信号 CLK</li>
<li>所有的环路都有一个寄存器</li>
</ul>
</li>
</ul>
<p>两种常见的 SSC：</p>
<ul>
<li>FSMs 有限状态机</li>
<li>Pipeline 流水线</li>
</ul>
<h4 id="331-必考重点fsms"><a class="anchor" href="#331-必考重点fsms">#</a> 3.3.1 必考重点：FSMs</h4>
<p>组成：由 M 个输入，N 个输出和 k 位状态。同时接收一个 CLK 和可选择的复位信号。</p>
<p>寄存器：</p>
<p><img data-src="%E5%AF%84%E5%AD%98%E5%99%A8.png" alt="alt text"></p>
<p>next 在左，current 在右！</p>
<p>FSM = next state logic + output logic</p>
<p>next state logic：用来产生下一个状态；<br>
output logic：用来确定结束状态</p>
<p>两种常见的 FSM：<strong>Moore FSM 和 Mealy FSM</strong></p>
<ul>
<li>Moore FSM：output 取决于当前 state</li>
<li>Mealy FSM：output 取决于当前 state 和输入<br>
<img data-src="%E4%B8%A4%E7%A7%8DFSM.png" alt="alt text"></li>
</ul>
<h5 id="3311-moore-fsm"><a class="anchor" href="#3311-moore-fsm">#</a> 3.3.1.1 Moore FSM</h5>
<p>创建 moore FSM 的流程：</p>
<ol>
<li>根据实际情况确定状态集合以及状态转换条件，确定状态机图</li>
<li>根据状态机图绘制状态转换表</li>
<li>对状态和输出进行二进制编码</li>
<li>使用状态的编码结果来表示状态转换表重写状态转换表，可以把输入拆开，写成卡诺图的形式，用卡诺图来化简</li>
<li>根据这个表确定 next state 的布尔表达式，使用 SOP form，最后对布尔表达式进行化简</li>
<li>确定输出表</li>
<li>根据这个表确定 output state 的布尔表达式，使用 SOP form，最后对布尔表达式进行化简</li>
<li>就可以根据 next state 和 output state 的布尔表达式进行电路设计</li>
</ol>
<p><strong>上面步骤中的状态编码环节有别的方法：one-hot encoding</strong></p>
<p>对 N 个状态的编码有 N 位，其中只有一位是 1</p>
<p>注意绘制状态机图的思想：</p>
<ol>
<li>先假设一个初始状态，这个状态表示输入对靠近结果没有作用时进入的状态</li>
<li>针对不同的输入，初始状态会进入什么样的等待状态</li>
<li>等待的值是输入值，就进入输出状态，这样所有的状态就确定完成</li>
<li>确定每个状态的不同输入会导致进入什么状态</li>
</ol>
<h5 id="3312-mealy-fsm"><a class="anchor" href="#3312-mealy-fsm">#</a> 3.3.1.2 Mealy FSM</h5>
<p>Mealy FSM 各个输出会被标记在弧上而不是当前状态上，表明其受输入和状态的影响。</p>
<p>创建 Mealy FSM 的步骤：</p>
<ol>
<li>同样是画出状态机图</li>
<li>确定状态转换表</li>
<li>对状态和输出进行编码</li>
<li>重写状态转换表，可以把输入拆开，写成卡诺图的形式，用卡诺图来化简</li>
<li>确定 next state 和 output 的布尔表达式</li>
<li>设计电路</li>
</ol>
<p>注意绘制状态机图的思想：</p>
<ol>
<li>先假设一个初始状态，这个状态表示输入对靠近结果没有作用时进入的状态</li>
<li>针对不同的输入，初始状态会进入什么样的等待状态</li>
<li>等待的值是输入值，就回到初始状态，连接的边上的输出为 1</li>
<li>确定每个状态的不同输入会导致进入什么状态</li>
</ol>
<h4 id="332-fsm-factor-拆解"><a class="anchor" href="#332-fsm-factor-拆解">#</a> 3.3.2 FSM Factor 拆解</h4>
<h4 id="333-重点从一个电路推导出一个fsm逆向"><a class="anchor" href="#333-重点从一个电路推导出一个fsm逆向">#</a> 3.3.3 重点：从一个电路推导出一个 FSM（逆向）</h4>
<p><strong>步骤：</strong></p>
<ol>
<li>Examine circuit, <strong>stating inputs</strong>, <strong>outputs</strong>, and <strong>state</strong> bits.</li>
<li>Write** next state and output equations**.</li>
<li>Create <strong>next state and output tables</strong>.</li>
<li>Reduce the next state table to** eliminate unreachable<br>
states**.</li>
<li>Assign each valid state bit combination a <strong>name</strong>.</li>
<li><strong>Rewrite</strong> next state and output tables with state names.</li>
<li>Draw state transition diagram.</li>
<li>State in words what the FSM does.</li>
</ol>
<h3 id="34-timing-of-sequential-logic"><a class="anchor" href="#34-timing-of-sequential-logic">#</a> 3.4 Timing of Sequential Logic</h3>
<ul>
<li>
<p>Input Timing Constraints</p>
<ul>
<li>Setup time 建立时间：时钟上升沿到前 data 稳定的时间</li>
<li>Hold time 保持时间：时钟上升沿到后 data 稳定的时间</li>
<li>Aperture time 孔径时间：setup time + hold time</li>
</ul>
</li>
<li>
<p>Propagation delay 传播延迟：tpcq 时钟上升沿到来后确定 data 保持稳定的时间</p>
</li>
<li>
<p>Contamination delay 最小延迟：tccq 时钟上升沿到来后不稳定开始的时间</p>
</li>
</ul>
<h4 id="341-dynamic-discipline-动态约束"><a class="anchor" href="#341-dynamic-discipline-动态约束">#</a> 3.4.1 Dynamic Discipline 动态约束</h4>
<ul>
<li>输入端数据在 CLK 上升沿到来时需要在孔径时间内保持稳定</li>
<li>特殊情况下，至少在 CLK 上升沿到来前的建立时间和后的保持时间内保持稳定</li>
</ul>
<h5 id="3411-setup-time-discipline"><a class="anchor" href="#3411-setup-time-discipline">#</a> 3.4.1.1 Setup Time DIscipline</h5>
<p>两个寄存器中间的延迟 Tc &gt;= tpcq + tpq + t-setup</p>
<p>=&gt; tpd &lt;= TC - tpcq - t-setup（tpd 是寄存器之间组合逻辑电路传播延迟）（Tc 是一次时钟周期）</p>
<p>(tpcq + tsetup): sequencing overhead</p>
<h5 id="3412-hold-time-discipline"><a class="anchor" href="#3412-hold-time-discipline">#</a> 3.4.1.2 Hold Time Discipline</h5>
<p>t-hold &lt;tccq + tcd (tccq 是最小传播延迟，tcd 是两个寄存器之间的组合电路的最小传播延迟)<br>
tcd &gt; t-hold -tccq</p>
<h4 id="342-timing-analysis"><a class="anchor" href="#342-timing-analysis">#</a> 3.4.2 Timing Analysis</h4>
<p>使用上面介绍的几个不等式对时序电路进行时序分析</p>
<p>一个时序电路的 tccq、tpcq、t-setup、t-hold、tpd、tcd 是确定的，求解建立时间约束和保持时间约束。前者计算查看 Tc 是否在约束内，后者计算查看 t-hold 是否在约束内。</p>
<h4 id="343-解决违反不做要求"><a class="anchor" href="#343-解决违反不做要求">#</a> 3.4.3 解决违反（不做要求）</h4>
<h2 id="4-硬件描述语言"><a class="anchor" href="#4-硬件描述语言">#</a> 4 硬件描述语言</h2>
<p>主题：</p>
<ol>
<li>Combinational Logic</li>
<li>Structural Modeling</li>
<li>Sequential Logic</li>
<li>More Combination Logic</li>
<li>Finite State Machines</li>
<li>Parameterized Modules</li>
<li>Testbenches</li>
</ol>
<h3 id="41-systemverilog-modules"><a class="anchor" href="#41-systemverilog-modules">#</a> 4.1 SystemVerilog Modules</h3>
<p>模块分为两种：Behavioral（描述一个模型干什么）、Structural（描述一个模块这样从更简单的模块构成）</p>
<ul>
<li><strong>Behavioral Modeling</strong><br>
y=a'b'c'+ab'c'+ab'c</li>
</ul>
<p>SystemVerilog:<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">module example(input logic a,b,c, output logic y);</span><br><span class="line">    assign y = ~a &amp; ~b ~c | a &amp; ~b &amp; ~c | a &amp; ~b &amp; c;</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<ul>
<li>
<p>module/endmodule:  required to begin/end module</p>
</li>
<li>
<p>example:  name of the module</p>
</li>
<li>
<p>Operators:<br>
~:  NOT<br>
&amp;:  AND<br>
|:  OR</p>
</li>
<li>
<p>仿真与综合</p>
</li>
<li>
<p><strong>Structural Modeling - Hierarchy</strong></p>
</li>
</ul>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">module and3(input  logic a, b, c,</span><br><span class="line">            output logic y);</span><br><span class="line">  assign y = a &amp; b &amp; c;</span><br><span class="line">endmodule</span><br><span class="line">module inv(input  logic a,</span><br><span class="line">           output logic y);</span><br><span class="line">  assign y = ~a;</span><br><span class="line">endmodule</span><br><span class="line">module nand3(input  logic a, b, c, output logic y);</span><br><span class="line">  logic n1;                   // internal signal</span><br><span class="line">  and3 andgate(a, b, c, n1);  // instance of and3</span><br><span class="line">  inv  inverter(n1, y);       // instance of inv</span><br><span class="line">endmodule</span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<h3 id="42-combinational-logic-组合逻辑"><a class="anchor" href="#42-combinational-logic-组合逻辑">#</a> 4.2 Combinational Logic 组合逻辑</h3>
<p>如何使用 HDL 编写组合逻辑的行为模型</p>
<h4 id="421-bitwise-operators-位运算符"><a class="anchor" href="#421-bitwise-operators-位运算符">#</a> 4.2.1 Bitwise Operators 位运算符</h4>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module gates(input  logic [3:0]  a, b,</span><br><span class="line">             output logic [3:0] y1, y2, y3, y4, y5);</span><br><span class="line">   /* Five different two-input logic </span><br><span class="line">      gates acting on 4 bit busses */</span><br><span class="line">   assign y1 = a &amp; b;    // AND</span><br><span class="line">   assign y2 = a | b;    // OR</span><br><span class="line">   assign y3 = a ^ b;    // XOR</span><br><span class="line">   assign y4 = ~(a &amp; b); // NAND</span><br><span class="line">   assign y5 = ~(a | b); // NOR</span><br><span class="line">endmodule</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>
[N-1:0] 表示一个 N 位的 bus</p>
<h4 id="422-reduction-operators-缩位运算符"><a class="anchor" href="#422-reduction-operators-缩位运算符">#</a> 4.2.2 Reduction Operators 缩位运算符</h4>
<p>表示作用在 bus 上的多输入门<br>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module and8(input  logic [7:0] a, </span><br><span class="line">            output logic       y);</span><br><span class="line">   assign y = &amp;a;</span><br><span class="line">   // &amp;a is much easier to write than</span><br><span class="line">   // assign y = a[7] &amp; a[6] &amp; a[5] &amp; a[4] &amp;</span><br><span class="line">   //            a[3] &amp; a[2] &amp; a[1] &amp; a[0];</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h4 id="423-条件赋值"><a class="anchor" href="#423-条件赋值">#</a> 4.2.3 条件赋值</h4>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">module mux2(input  logic [3:0] d0, d1, </span><br><span class="line">            input  logic       s,</span><br><span class="line">            output logic [3:0] y);</span><br><span class="line">   assign y = s ? d1 : d0; </span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure><br>
? :      is also called a ternary operator because it<br>
operates on 3 inputs: s, d1, and d0.</p>
<h4 id="424-内部变量"><a class="anchor" href="#424-内部变量">#</a> 4.2.4 内部变量</h4>
<p>可以理解为中间变量<br>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module fulladder(input  logic a, b, cin, output logic s, cout);</span><br><span class="line">  logic p, g;   // internal nodes</span><br><span class="line">  assign p = a ^ b;</span><br><span class="line">  assign g = a &amp; b;</span><br><span class="line">  </span><br><span class="line">  assign s = p ^ cin;</span><br><span class="line">  assign cout = g | (p &amp; cin);</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<p>内部变量实际上是小的逻辑电路</p>
<h4 id="425-precedence-优先级"><a class="anchor" href="#425-precedence-优先级">#</a> 4.2.5 Precedence 优先级</h4>
<p><img data-src="%E4%BC%98%E5%85%88%E7%BA%A7.png" alt="alt text"></p>
<h4 id="426-numbers"><a class="anchor" href="#426-numbers">#</a> 4.2.6 Numbers</h4>
<p>格式：N'Bvalue</p>
<ul>
<li>N = 位数</li>
<li>B=base（几进制）</li>
<li>Number # Bits Base Decimal</li>
</ul>
<table>
<thead>
<tr>
<th>Number</th>
<th>bits</th>
<th>Base</th>
<th>Decimal</th>
<th>Stored</th>
</tr>
</thead>
<tbody>
<tr>
<td>3'b101</td>
<td>3</td>
<td>binary</td>
<td>5</td>
<td>101</td>
</tr>
<tr>
<td>3'd6</td>
<td>3</td>
<td>decimal</td>
<td>6</td>
<td>110</td>
</tr>
<tr>
<td>6'o42</td>
<td>6</td>
<td>octal</td>
<td>34</td>
<td>100010</td>
</tr>
</tbody>
</table>
<h4 id="427-z"><a class="anchor" href="#427-z">#</a> 4.2.7 Z</h4>
<ul>
<li>Z：Floating Output<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module tristate(input  logic [3:0] a, </span><br><span class="line">                input  logic       en, </span><br><span class="line">                output tri   [3:0] y);</span><br><span class="line">   assign y = en ? a : 4&#x27;bz;</span><br><span class="line">endmodule</span><br><span class="line"></span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="428-bit-manipulations-位操作"><a class="anchor" href="#428-bit-manipulations-位操作">#</a> 4.2.8 Bit Manipulations 位操作</h4>
<p>常常需要在总线的子集上操作，这些操作称为位操作，也叫位混合</p>
<h4 id="429-delays"><a class="anchor" href="#429-delays">#</a> 4.2.9 Delays</h4>
<h3 id="43-sequential-logic-时序逻辑"><a class="anchor" href="#43-sequential-logic-时序逻辑">#</a> 4.3 Sequential Logic 时序逻辑</h3>
<ul>
<li>System Verilog 使用 idioms 来表述锁存器、触发器和状态机</li>
</ul>
<p><strong>Always Statement</strong><br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">always @(sensitivity list)</span><br><span class="line">statement;</span><br><span class="line"></span><br></pre></td></tr></table></figure><br>
 无论什么时候 sensitivity list 里的事件发生时，statement 执行</p>
<h4 id="431-寄存器"><a class="anchor" href="#431-寄存器">#</a> 4.3.1 寄存器</h4>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module flop(input  logic clk, input  logic [3:0] d, output logic [3:0] q);</span><br><span class="line">always_ff @(posedge clk)</span><br><span class="line">q &lt;= d;                // pronounced “q gets d”</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h4 id="432-resettable-寄存器"><a class="anchor" href="#432-resettable-寄存器">#</a> 4.3.2 Resettable 寄存器</h4>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module flopr(input  logic clk, input  logic reset, input  logic [3:0] d, output logic [3:0] q);</span><br><span class="line">// synchronous reset</span><br><span class="line">always_ff @(posedge clk)</span><br><span class="line">    if (reset) q &lt;= 4&#x27;b0;</span><br><span class="line">    else       q &lt;= d;</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h4 id="433-registers-with-enable"><a class="anchor" href="#433-registers-with-enable">#</a> 4.3.3 Registers with Enable</h4>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module flopren(input  logic clk,input  logic reset, </span><br><span class="line">input  logic en, input  logic [3:0] d, output logic [3:0] q);</span><br><span class="line">// asynchronous reset and enable </span><br><span class="line">always_ff @(posedge clk, posedge reset)</span><br><span class="line">    if      (reset) q &lt;= 4&#x27;b0;</span><br><span class="line">    else if (en)    q &lt;= d;</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h4 id="434-multiple-寄存器"><a class="anchor" href="#434-multiple-寄存器">#</a> 4.3.4 Multiple 寄存器</h4>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">module sync(input logic clk, input logic d, output logic q);</span><br><span class="line">    logic n1;</span><br><span class="line">    always_ff @(posedge clk)</span><br><span class="line">    begin</span><br><span class="line">        n1 &lt;= d; // nonblocking</span><br><span class="line">        q &lt;= n1; // nonblocking</span><br><span class="line">    end</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h4 id="435-latches"><a class="anchor" href="#435-latches">#</a> 4.3.5 Latches</h4>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">module latch(input  logic clk, input  logic [3:0] d, output logic [3:0] q);</span><br><span class="line">always_latch</span><br><span class="line">    if (clk) q &lt;= d;</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h3 id="44-使用always语句的组合逻辑"><a class="anchor" href="#44-使用always语句的组合逻辑">#</a> 4.4 使用 always 语句的组合逻辑</h3>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// combinational logic using an always statement</span><br><span class="line">module inv(input  logic [3:0] a, </span><br><span class="line">output logic [3:0] y);</span><br><span class="line">    always_comb</span><br><span class="line">        y = ~a;</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<p>当 = 号的右边的变量发生变化时，always_comb 下的语句就重新运算，always_comb 就等于 always@（*）</p>
<h4 id="442-case语句"><a class="anchor" href="#442-case语句">#</a> 4.4.2 case 语句</h4>
<p>case 语句：和别的语言用法一样<br>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">module sevenseg(input  logic [3:0] data, </span><br><span class="line">output logic [6:0] segments);</span><br><span class="line">always_comb</span><br><span class="line">    case (data)</span><br><span class="line">        //                     abc_defg</span><br><span class="line">        0: segments =       7&#x27;b111_1110;</span><br><span class="line">        1: segments =       7&#x27;b011_0000;</span><br><span class="line">        2: segments =       7&#x27;b110_1101;</span><br><span class="line">        3: segments =       7&#x27;b111_1001;</span><br><span class="line">        4: segments =       7&#x27;b011_0011;</span><br><span class="line">        5: segments =       7&#x27;b101_1011;</span><br><span class="line">        6: segments =       7&#x27;b101_1111;</span><br><span class="line">        7: segments =       7&#x27;b111_0000;</span><br><span class="line">        8: segments =       7&#x27;b111_1111;</span><br><span class="line">        9: segments =       7&#x27;b111_0011;</span><br><span class="line">        default: segments = 7&#x27;b000_0000; // required</span><br><span class="line">    endcase</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure><br>
<strong> 别忘记了 endcase 语句</strong></p>
<h4 id="443-casez语句"><a class="anchor" href="#443-casez语句">#</a> 4.4.3 casez 语句</h4>
<p>看个例子就明白了<br>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">module priority_casez(input  logic [3:0] a, </span><br><span class="line">output logic [3:0] y);</span><br><span class="line">    always_comb</span><br><span class="line">    casez(a)</span><br><span class="line">        4&#x27;b1???: y = 4&#x27;b1000;  // ? = don’t care</span><br><span class="line">        4&#x27;b01??: y = 4&#x27;b0100;</span><br><span class="line">        4&#x27;b001?: y = 4&#x27;b0010;</span><br><span class="line">        4&#x27;b0001: y = 4&#x27;b0001;</span><br><span class="line">        default: y = 4&#x27;b0000;</span><br><span class="line">    endcase</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h4 id="444-if"><a class="anchor" href="#444-if">#</a> 4.4.4 if</h4>
<h3 id="45-辩blocking-nonblocking-assignment"><a class="anchor" href="#45-辩blocking-nonblocking-assignment">#</a> 4.5 辩：Blocking =  &amp; Nonblocking &lt;= Assignment</h3>
<p>在时序电路中使用非阻塞；在组合电路中使用阻塞</p>
<h3 id="46-信号赋值的原则"><a class="anchor" href="#46-信号赋值的原则">#</a> 4.6 信号赋值的原则</h3>
<ol>
<li>时序逻辑电路使用：always_ff@(posedge clk) nonblocking assignment &lt;=</li>
<li>简单的组合逻辑电路使用 assign</li>
<li>复杂的组合逻辑电路使用 always_comb blocking assignment =</li>
<li>对一个信号的赋值旨在一个 always 语句或者连续赋值语句中，不要多次赋值</li>
</ol>
<h3 id="47-fsms"><a class="anchor" href="#47-fsms">#</a> 4.7 FSMs</h3>
<p>常见的 FSMs 代码编写规范</p>
<p>背就完事了</p>
<ul>
<li>Divide by 3<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">module divideby3FSM (input  logic clk, </span><br><span class="line">input  logic reset, </span><br><span class="line">output logic q);</span><br><span class="line">typedef enum logic [1:0] &#123;S0, S1, S2&#125; statetype;</span><br><span class="line">statetype state, nextstate;  </span><br><span class="line">// state register</span><br><span class="line">always_ff @ (posedge clk, posedge reset)</span><br><span class="line">if (reset) state &lt;= S0;</span><br><span class="line">else       state &lt;= nextstate;</span><br><span class="line">// next state logic</span><br><span class="line">always_comb</span><br><span class="line">case (state)</span><br><span class="line">S0:      nextstate = S1;</span><br><span class="line">S1:      nextstate = S2;</span><br><span class="line">S2:      nextstate = S0;</span><br><span class="line">default: nextstate = S0;</span><br><span class="line">endcase</span><br><span class="line">// output logic</span><br><span class="line">assign q = (state == S0);</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></li>
<li>Moore FSM<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">module patternMoore(input  logic clk, </span><br><span class="line">input  logic reset, </span><br><span class="line">input  logic a,</span><br><span class="line">output logic y);</span><br><span class="line">typedef enum logic [1:0] &#123;S0, S1, S2&#125; statetype;</span><br><span class="line">statetype state, nextstate;</span><br><span class="line">// state register</span><br><span class="line">always_ff @(posedge clk, posedge reset)</span><br><span class="line">if (reset) state &lt;= S0;</span><br><span class="line">else       state &lt;= nextstate;</span><br><span class="line">// next state logic</span><br><span class="line">always_comb</span><br><span class="line">case (state)</span><br><span class="line">S0: if (a) nextstate = S0;</span><br><span class="line">else   nextstate = S1;</span><br><span class="line">S1: if (a) nextstate = S2;</span><br><span class="line">else   nextstate = S1;</span><br><span class="line">S2: if (a) nextstate = S0;</span><br><span class="line">else   nextstate = S1;</span><br><span class="line">default:   nextstate = S0;</span><br><span class="line">endcase</span><br><span class="line">// output logic</span><br><span class="line">assign y = (state == S2);</span><br><span class="line">endmodul</span><br></pre></td></tr></table></figure></li>
<li>Mealy FSM<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">module patternMealy(input  logic clk, </span><br><span class="line">input  logic reset, </span><br><span class="line">input  logic a,</span><br><span class="line">output logic y);</span><br><span class="line">typedef enum logic &#123;S0, S1&#125; statetype;</span><br><span class="line">statetype state, nextstate;</span><br><span class="line">// state register</span><br><span class="line">always_ff @(posedge clk, posedge reset)</span><br><span class="line">if (reset) state &lt;= S0;</span><br><span class="line">else       state &lt;= nextstate;</span><br><span class="line">// next state logic</span><br><span class="line">always_comb</span><br><span class="line">case (state)</span><br><span class="line">S0: if (a) nextstate = S0;</span><br><span class="line">else   nextstate = S1;</span><br><span class="line">S1: if (a) nextstate = S0;</span><br><span class="line">else   nextstate = S1;</span><br><span class="line">default:   nextstate = S0;</span><br><span class="line">endcase</span><br><span class="line">// output logic</span><br><span class="line">assign y = (a &amp; state == S1);</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="48-parameterized-modules-参数化的"><a class="anchor" href="#48-parameterized-modules-参数化的">#</a> 4.8 Parameterized Modules 参数化的</h3>
<p>2：1 MUX</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module mux2</span><br><span class="line">    #(parameter width = 8)  // name and default value</span><br><span class="line">    (input  logic [width-1:0] d0, d1, </span><br><span class="line">        input  logic             s,</span><br><span class="line">        output logic [width-1:0] y);</span><br><span class="line">    assign y = s ? d1 : d0; </span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<h3 id="49-test-bench-测试程序"><a class="anchor" href="#49-test-bench-测试程序">#</a> 4.9 Test Bench 测试程序</h3>
<p>测试程序是用于测试其他模块（device under test 被测设备）的硬件描述程序</p>
<p>有三种类型：</p>
<ul>
<li>simple</li>
<li>self-checking</li>
<li>self-checking with testvector</li>
</ul>
<p>举个例子<br>
编写下面描述语言的三种测试程序<br>
 <code>y==b'c'+ab'</code></p>
<ol>
<li>simple</li>
</ol>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">module testbench1();</span><br><span class="line">    logic a, b, c;</span><br><span class="line">    logic y;</span><br><span class="line">    // instantiate device under test</span><br><span class="line">    sillyfunction dut(a, b, c, y);</span><br><span class="line">    // apply inputs one at a time</span><br><span class="line">    initial begin</span><br><span class="line">        a = 0; b = 0; c = 0; #10;</span><br><span class="line">        c = 1; #10;</span><br><span class="line">        b = 1; c = 0; #10;</span><br><span class="line">        c = 1; #10;</span><br><span class="line">        a = 1; b = 0; c = 0; #10;</span><br><span class="line">        c = 1; #10;</span><br><span class="line">        b = 1; c = 0; #10;</span><br><span class="line">        c = 1; #10;</span><br><span class="line">    end</span><br><span class="line">endmodule</span><br></pre></td></tr></table></figure></p>
<ol start="2">
<li>self-checking<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">module testbench2();</span><br><span class="line">    logic  a, b, c, y;</span><br><span class="line">    // instantiate device under test</span><br><span class="line">    sillyfunction dut(a, b, c, y);</span><br><span class="line">    // apply inputs one at a time</span><br><span class="line">    // checking results</span><br><span class="line">    initial begin</span><br><span class="line">        a = 0; b = 0; c = 0; #10;</span><br><span class="line">        assert (y === 1) else $error(&quot;000 failed.&quot;);</span><br><span class="line">        c = 1; #10;</span><br><span class="line">        assert (y === 0) else $error(&quot;001 failed.&quot;);</span><br><span class="line">        b = 1; c = 0; #10;</span><br><span class="line">        assert (y === 0) else $error(&quot;010 failed.&quot;);</span><br><span class="line">        c = 1; #10;</span><br><span class="line">        assert (y === 0) else $error(&quot;011 failed.&quot;);</span><br><span class="line">        a = 1; b = 0; c = 0; #10;</span><br><span class="line">        assert (y === 1) else $error(&quot;100 failed.&quot;);</span><br><span class="line">        c = 1; #10;</span><br><span class="line">        assert (y === 1) else $error(&quot;101 failed.&quot;);</span><br><span class="line">        b = 1; c = 0; #10;</span><br><span class="line">        assert (y === 0) else $error(&quot;110 failed.&quot;);</span><br><span class="line">        c = 1; #10;</span><br><span class="line">        assert (y === 0) else $error(&quot;111 failed.&quot;);</span><br><span class="line">    end</span><br><span class="line">endmodul</span><br></pre></td></tr></table></figure></li>
<li>self-checking with testvector<br>
testvector: 期待的输入输出模式</li>
</ol>
<p>就是将程序运行的结果和 testvector 文件的内容进行比对</p>
<p>步骤：</p>
<ol>
<li>Generate clock for assigning inputs, reading outputs</li>
<li>Read testvectors file into array</li>
<li>Assign inputs, expected outputs</li>
<li>Compare outputs with expected outputs and report<br>
errors</li>
</ol>
<p>什么是测试程序 clock</p>
<ul>
<li>assign inputs（上升沿）</li>
<li>比较输出（下降沿）</li>
</ul>
<p>具体代码：</p>
<p>(1) generate clock<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">module testbench3();</span><br><span class="line">    logic        clk, reset;</span><br><span class="line">    logic        a, b, c, yexpected;</span><br><span class="line">    logic        y;</span><br><span class="line">    logic [31:0] vectornum, errors;    // bookkeeping variables</span><br><span class="line">    logic [3:0]  testvectors[10000:0]; // array of testvectors</span><br><span class="line">    // instantiate device under test</span><br><span class="line">    sillyfunction dut(a, b, c, y);</span><br><span class="line">    // generate clock</span><br><span class="line">    always     // no sensitivity list, so it always executes</span><br><span class="line">        begin</span><br><span class="line">        clk = 1; #5; clk = 0; #5;</span><br><span class="line">        end</span><br></pre></td></tr></table></figure></p>
<p>(2) 把 testvectors 读入 array<br>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// at start of test, load vectors and pulse reset</span><br><span class="line">initial</span><br><span class="line">    begin</span><br><span class="line">        $readmemb(&quot;example.tv&quot;, testvectors);</span><br><span class="line">        vectornum = 0; errors = 0;</span><br><span class="line">        reset = 1; #27; reset = 0;</span><br><span class="line">    end</span><br><span class="line">// Note: $readmemh reads testvector files written in</span><br><span class="line">// hexadecimal</span><br></pre></td></tr></table></figure></p>
<p>(3) 赋值<br>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"> // apply test vectors on rising edge of clk</span><br><span class="line">always @(posedge clk)</span><br><span class="line">    begin</span><br><span class="line">        #1; &#123;a, b, c, yexpected&#125; = testvectors[vectornum];</span><br><span class="line">    end</span><br></pre></td></tr></table></figure></p>
<p>(4) 比较，在下降沿<br>
 <figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">// check results on falling edge of clk</span><br><span class="line">    always @(negedge clk)</span><br><span class="line">        if (~reset) begin // skip during reset</span><br><span class="line">        if (y !== yexpected) begin  </span><br><span class="line">            $display(&quot;Error: inputs = %b&quot;, &#123;a, b, c&#125;);</span><br><span class="line">            $display(&quot;  outputs = %b (%b expected)&quot;,y,yexpected);</span><br><span class="line">        errors = errors + 1;</span><br><span class="line">    end</span><br><span class="line">// Note: to print in hexadecimal, use %h. For example,</span><br><span class="line">//       $display(“Error: inputs = %h”, &#123;a, b, c&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// increment array index and read next testvector</span><br><span class="line">        vectornum = vectornum + 1;</span><br><span class="line">        if (testvectors[vectornum] === 4&#x27;bx) begin </span><br><span class="line">            $display(&quot;%d tests completed with %d errors&quot;, </span><br><span class="line">            vectornum, errors);</span><br><span class="line">            $finish;</span><br><span class="line">        end</span><br><span class="line">    end</span><br><span class="line">endmodule</span><br><span class="line">// === and !== can compare values that are 1, 0, x, or z.</span><br></pre></td></tr></table></figure></p>
<h2 id="5-算数单元"><a class="anchor" href="#5-算数单元">#</a> 5 算数单元</h2>
<h3 id="51-加法器"><a class="anchor" href="#51-加法器">#</a> 5.1 加法器</h3>
<p><strong>Carry-lookahead 先行进位加法器</strong></p>
<ul>
<li>G = AB</li>
<li>P = A+B</li>
<li>Ci = Gi+PiCi-1</li>
</ul>
<p>可以替换 Ci-1 成含 C0 的表达式，这样就能在 C0 输入的时候，等待全部的 G P 表达式生成时得到 Ci。<br>
<img data-src="CL%E5%8A%A0%E6%B3%95%E5%99%A8.png" alt="alt text"></p>
<p><img data-src="CL%E5%8A%A0%E6%B3%95%E5%99%A8%E7%94%B5%E8%B7%AF%E5%9B%BE.png" alt="alt text"></p>
<p>计算延迟<br>
<img data-src="CL%E5%8A%A0%E6%B3%95%E5%99%A8%E5%BB%B6%E8%BF%9F.png" alt="alt text"></p>
<p>记住 4bits 的 CL 加法器各个 t 的计算方法。tand_or = 2*tFA</p>
<h3 id="52-比较器"><a class="anchor" href="#52-比较器">#</a> 5.2 比较器</h3>
<p>使用异或门和与门</p>
<p><img data-src="=%E6%AF%94%E8%BE%83%E5%99%A8.png" alt="alt text"><br>
<img data-src="%E5%B0%8F%E4%BA%8E%E6%AF%94%E8%BE%83%E5%99%A8.png" alt="alt text"></p>
<h3 id="53-位移器"><a class="anchor" href="#53-位移器">#</a> 5.3 位移器</h3>
<ul>
<li>逻辑位移</li>
<li>算数位移</li>
<li>Rotator：轮转，ROR 就是把右边的推出再从左边推入；ROL 则相反</li>
</ul>
<p>算数左移 N 位 = X 2 的 N 次方；算数右移 N 位 =/ 2 的 N 次方；</p>
<h3 id="54-算数逻辑单元alu"><a class="anchor" href="#54-算数逻辑单元alu">#</a> 5.4 算数逻辑单元 ALU</h3>
<h3 id="55-number-systems"><a class="anchor" href="#55-number-systems">#</a> 5.5 Number Systems</h3>
<p>用源码表示正数，用补码或反码表示某个正数的负数。</p>
<p>如何表示小数呢？</p>
<p>小数可以分为两种：有限位小数和无限位小数</p>
<ul>
<li>有限位小数：用点来区分整数部分和小数部分</li>
<li>浮点数：如何用 IEEE 格式表示浮点数可以看计组的笔记</li>
</ul>
<h3 id="56-计数器"><a class="anchor" href="#56-计数器">#</a> 5.6 计数器</h3>
<h3 id="57-移动寄存器"><a class="anchor" href="#57-移动寄存器">#</a> 5.7 移动寄存器</h3>
<p>每个时钟上升沿移动进入一位，出去一位</p>
<p><strong>带有 Load 的移动寄存器</strong><br>
当 Load = 1 时，就是普通的寄存器；<br>
当 Load = 0 时，是移动寄存器</p>
<h3 id="58-memory-arrays"><a class="anchor" href="#58-memory-arrays">#</a> 5.8 Memory Arrays</h3>
<p>可以高效的储存大量的数据，有三种类别：</p>
<ul>
<li>DRAM</li>
<li>SRAM</li>
<li>ROM</li>
</ul>
<p><strong>考点：ROM：PROM 可编程的只读存储器</strong></p>
<p>有多少个式子就有多少位 data 输出，每条 data 输出对应一个式子。<br>
把逻辑表达式的真值表写出来，在输出为 1 的情况下把交点描黑。</p>
<p><img data-src="PROM.png" alt="alt text"></p>
<h3 id="59-logic-arrays"><a class="anchor" href="#59-logic-arrays">#</a> 5.9 Logic Arrays</h3>
<ul>
<li>PLAs（可编程的逻辑数组）
<ul>
<li>AND array followed by OR array</li>
<li>Combinational logic only</li>
<li>Fixed internal connections</li>
</ul>
</li>
</ul>
<p><img data-src="PLAs.png" alt="alt text"><br>
 画法很简单，看图即可</p>
<ul>
<li>FPGA Field programmable gate arrays
<ul>
<li>Array of Logic Elements (LEs)</li>
<li>Combinational and sequential logic</li>
<li>Programmable internal connections</li>
</ul>
</li>
</ul>
<p>由 LEs（perform logic）、IOEs（Input/Output elements，外界接口）和 Programmable interconnection（连接 LEs 和 IOEs）</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/12/%E6%95%B0%E5%AD%97%E9%80%BB%E8%BE%91%E6%80%BB%E5%A4%8D%E4%B9%A0/" data-id="clypfitv5000tiodi6oom1gvz" data-title="数字逻辑总复习" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-计网--传输层重点复习" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/07/%E8%AE%A1%E7%BD%91--%E4%BC%A0%E8%BE%93%E5%B1%82%E9%87%8D%E7%82%B9%E5%A4%8D%E4%B9%A0/" class="article-date">
  <time class="dt-published" datetime="2024-06-07T02:48:31.000Z" itemprop="datePublished">2024-06-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/07/%E8%AE%A1%E7%BD%91--%E4%BC%A0%E8%BE%93%E5%B1%82%E9%87%8D%E7%82%B9%E5%A4%8D%E4%B9%A0/">计网--传输层重点复习</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="重点principles-of-reliable-data-transfer"><a class="anchor" href="#重点principles-of-reliable-data-transfer">#</a> 重点：Principles of Reliable Data Transfer</h2>
<h3 id="1-可靠数据传输服务模型搭建和服务实现"><a class="anchor" href="#1-可靠数据传输服务模型搭建和服务实现">#</a> 1 可靠数据传输服务模型搭建和服务实现</h3>
<ul>
<li>提供服务：主机通过应用层在某个进程发送数据到传输层，数据通过可靠的通道 channel 到达另一个主机的应用层的某个接收进程。</li>
<li>服务实现：主机发送进程调用 rdt_send () 发送数据到传输层，传输层通过可靠的数据传输协议，使用 udt_send () 发送到链路层，经过不可靠的链路传输到目标主机下的传输层然后调用 rdt_rcv () 进入传输层，最终进入应用层进程。</li>
</ul>
<p><strong>reliable data transfer protocol</strong></p>
<p>上面提到的可靠的数据传输协议，就是实现上述的服务的过程。比如 TCP 就是一种可靠的数据传输协议。</p>
<h3 id="2-建立一个可靠的数据传输协议"><a class="anchor" href="#2-建立一个可靠的数据传输协议">#</a> 2 建立一个可靠的数据传输协议</h3>
<p>这里我们会循序渐进的介绍几种 rdt，每一种都是前一种的完善和升级。</p>
<h4 id="21-rdt10"><a class="anchor" href="#21-rdt10">#</a> 2.1 rdt1.0</h4>
<p>发送端和接送端各有一个只有一个状态的 FSM，当接收到应用层发送来的数据时，打包成 package 发送到链路层；接收端从链路层接收到 package 解包成 data 发送给上层应用层。</p>
<p><img data-src="rdt1.0.png" alt="rdt1.0"></p>
<h4 id="22-rdt20"><a class="anchor" href="#22-rdt20">#</a> 2.2 rdt2.0</h4>
<p>rdt1.0 是建立在链路层的传输通道不会发生丢包的基础上的，这是不可能的事情，包传递的过程中发生位错误是非常常见的。</p>
<p>rdt2.0 是建立在发送的 package 一定会被接收到但是允许发生 bit 错误。</p>
<ul>
<li>positive acknowledgements：确认收到消息</li>
<li>negative acknowledgements：未收到请求重发消息</li>
</ul>
<p>使用这两个信息可以使得 sender 针对这两个情况进行不同的动作，这是 rdt2.0 中非常重要的基础。这种可能重传的机制被称为 ARQ</p>
<p>ARQ 协议需要三个额外的协议来处理位错误的问题：</p>
<ul>
<li>Error detection 错误检测</li>
<li>Receiver feedback 接收端反馈</li>
<li>Retransmission 重传</li>
</ul>
<p>接下来正式介绍 rdt2.0，首先来看他的 FSM，与 rdt1.0 不同的是，rdt2.0 的 sender side 的 FSM 有两个状态，receiver side 的 FSM 只有一个状态</p>
<p>先看 sender side：两个状态分别为 wait for call from above（1） 和 wait for ack or nak（2）。当处于 1 状态时，当 rdt_send (data) 消息到来时，执行  <code>sndpkt = make_pkg(data, checksum); udt_send(sndpkt);</code>  进入状态 2；当处于状态 2 时，如果收到 rdt_rcv (rcvpkt) &amp;&amp; isNAK (rcvpkt), 执行 <code>udt_send(sndpkt)</code>  重新发包；如果收到 rdt_rcv (rcvpkt) &amp;&amp; isACK (rcvpkt), 进入状态（1）</p>
<p>再看 receiver side：检查到包损坏，发送 NAK；检查到包完好，发送 ACK 并把 package 解包的 data 发送到应用层。</p>
<p><img data-src="rdt2.0.png" alt="rdt2.0"></p>
<p>看上去没什么问题，但实际上有个致命的错误！我们无法保证 ACK 或者 NAK 的位上没有发生损坏。所以我们仍然需要在包含 ACK 后 NAK 的包上添加 checksum。如果确认损坏，我们又该如何处理这种情况呢？</p>
<p>解决方法：<br>
在 data package 中添加 sequence number 序列号，这样 receiver 就可以知道接收的包是不是重发的。</p>
<p>举个例子：stop-and-wait protocol，接收的 package 的 sn 之前遇到过则是重发的，不一样或者增加则是新发的</p>
<p>应用这个解决方法，rdt2.1 产生了，能够很好的解决 ACKNAK 消息丢失的问题。</p>
<h4 id="221-rdt21"><a class="anchor" href="#221-rdt21">#</a> 2.2.1 rdt2.1</h4>
<p>sender side：<br>
<img data-src="rdt2.1.png" alt="rdt2.1"></p>
<p>初始状态是 wait for call 0 from above，接收到上层发来的 data，和 0（sn）、checksum 一起打包发送给链路层，进入状态 wait for ACK or NAK 0。</p>
<p>如果接收到反馈的 package，查看发生了损坏或者是 NAK package 重发包；如果没有发生损坏或者是 ACK 进入下一个状态：wait for call 1 from above。</p>
<p>接收到上层发来的 data，和<strong> 1</strong>（sn）、checksum 一起打包发送给链路层，进入状态 wait for ACK or NAK 1。</p>
<p>如果接收到反馈的 package，查看发生了损坏或者是 NAK package 重发包；如果没有发生损坏或者是 ACK 进入下一个状态：wait for call 0 from above。完成闭环。</p>
<p>这个 FSM 用到的 sn 码只有 0 和 1。</p>
<p>receiver side：<br>
<img data-src="rdt2.1.1.png" alt="rdt2.1.1"></p>
<p>只有两个状态。</p>
<p>初始状态是 wait for 0 from below，接收到链路层发来的包，检查包没有发生错误并且 sn 是 0，解压包把 data 向上层传递。把 ACK 消息<strong>和 checksum</strong> 打包发送给 sender side，进入下一个状态 wait for 1 from below；</p>
<p>如果接收到链路层发来的包，检查包发生错误，则把 NAK 和 checksum 打包发送给 receiver side； 如果接收到链路层发来的包，检查包没错误但是是序号为 1 的包，把 ACK 和 checksum 打包发送给 sender side。状态没有发生变化；</p>
<p>状态是 wait for 1 from below 时，处理流程和上面是完全对称的。</p>
<h4 id="222-rdt22"><a class="anchor" href="#222-rdt22">#</a> 2.2.2 rdt2.2</h4>
<p>rdt2.2，与 rdt2.1 不同的是：接收端必须包括被 ACK 消息确认的 packet 的 sequence number，sender 必须检查被接收的 ACK 消息确认的 package 的 sn。也就是说接收端返回的 ACK 和 NAK 消息也带有 sn 序列号，只有符合当前状态的 sn 才可以做出 rdt2.1 的反应。也就是处于状态 1 时收到序号为 0 的包会发送 ACK 但不会把 data 接收而是丢弃了</p>
<p><img data-src="rdt2.2.1.png" alt="rdt2.2.1"></p>
<p><img data-src="rdt2.2.2.png" alt="rdt2.2.2"></p>
<h4 id="23-rdt30"><a class="anchor" href="#23-rdt30">#</a> 2.3 rdt3.0</h4>
<p>现在要开始考虑链路层的传输会有丢包的情况，这是最可能发生的事情，所以现在的应用大多是 rdt3.0 的协议。</p>
<p>伴随着这个问题产生的还有两个顾虑：如何检测丢包以及当丢包时需要做出的反应</p>
<p>我们会把检测丢包和恢复重发的任务放在 sender side</p>
<p>那么如何检测丢包呢？sender side 在一段固定的时间内没有收到发送的 package 的 ACK，就可以认为这个包丢失了，开始重传。如果发送的 package 没有丢失，只是在链路层中遭遇了拥塞导致延迟时间超过设定的 timeout，也会触发重发，这样就会导致 duplicate data packets。幸运的是，可以采用 rdt2.2 的序号机制来无视多余的重发包。</p>
<p>具体流程可以看 FSM</p>
<p><img data-src="rdt3.0sender.png" alt="rdt3.0sender"></p>
<h3 id="3-pipelined-reliable-data-transfer-protocols"><a class="anchor" href="#3-pipelined-reliable-data-transfer-protocols">#</a> 3 Pipelined Reliable Data Transfer Protocols</h3>
<p>stop-and-wait 类型的协议性能无法满足需求，使用流水线 rdt 协议能提高性能。</p>
<p>流水线模式 sender 和 receiver 都可以发送多个 packet，不需要等待 ACK。为了实现这样的特性采用流水线技术。</p>
<p>实现方法：</p>
<ol>
<li>sequence number 的范围可以增长，且每一个在传输的 packet 都有一个独特的 sn。</li>
<li>sender 和 receiver 设立 buffer 用来发送或者接收多个包。sender 必须设立 buffer 来缓存没有 ACK 的包用来重发。receiver 也需要为接收的 packet 设立 buffer 来缓存</li>
</ol>
<h3 id="4-go-back-n-gbn"><a class="anchor" href="#4-go-back-n-gbn">#</a> 4 Go-Back-N GBN</h3>
<p>首先确定一点，GBN 协议是一个流水线 RDT 协议。但是，GBN 协议中 sender 会限制 buffer 中未 ACK 的 packet 的数量为 N。<br>
<img data-src="GBN.png" alt="GBN"><br>
sn 的范围分为三部分。一是已经发送且 ACK 的 sn [0~base-1]，二是已经发送但是没有 ACK 的 sn [ base~nextseqnum-1]，第三是未发送的待分配的 sn [ nextseqnum~n-1]。第二和第三部分之和为 N。</p>
<p>N 也被称为 window size；GBN 也被称为 sliding-window protocol。window size 是可以变化的，比如在 tcp 协议中，发生 congest 时会减小。sn 码在实际操作中是被封装在 section 中的，有位数限制。k 位的 sn 码最大为 2 的 k 次方 - 1。tcp 的 sn 码一共 32bits</p>
<p>GBN 协议的 FSM 表示如下：<br>
<img data-src="GBNsender.png" alt="GBNsender"><br>
sender 在 timeout 后，会从 base 开始重新一轮发包；如果某个 ACK 没收到，那么后面收到的 ACK 是不会更新 base 的，所以就会导致发了很多冗余的 packet。这是个问题。<br>
<img data-src="GBNreceiver.png" alt="GBNreceiver"><br>
<img data-src="GBNOp.png" alt="GBNOp"></p>
<h3 id="4-selective-repeat-sr"><a class="anchor" href="#4-selective-repeat-sr">#</a> 4 Selective Repeat SR</h3>
<p>GBN 协议也是存在缺陷的，一个 GBN 协议包的出错或导致大量的包重发活动。SR 协议能够避免不必要的包重发通过让 sender 只重发那些被发送端认为是出错的丢包的 packet。</p>
<p>为解决这个问题，SR 升级了 sn 码的属性，在【base~nextseqnum 中允许存在 ack 的 sn 并且做上标记】。SR 的 receiver 会承认 out-order 的 packet 并且发送 ACK，sender 也会接收这些 ACK。但是 receiver 的 buffer 仍然会保留这些被接受的 packet 直到比他的 sn 小的 miss 的 packet 都被接收到才不保留。</p>
<p><img data-src="SRsn.png" alt="SRsn"><br>
rcv_base 取决于期望接收到的 packet 的 sn，也就是被接受且发送 ack 的下一个 sn<br>
<img data-src="SRsendereventandactor.png" alt="SRsendereventandactor"><br>
<img data-src="SRreceivereventandactor.png" alt="SRreceivereventandactor"></p>
<p>SR 和 GNB 的不同在于，所有的接收到 packet 都会被打上 ack，base 会跳跃到最小的未被接收到的 sn 上，可能一跳一大段！但是 GBN 就不行，他没有处理 out-order 的 packet 所以一旦丢包 base 就会卡住，并且 timeout 后又从 base 开始发包一步一步的递增。SR 的 base 是具有跳跃性的！</p>
<h4 id="42-todosr的lack"><a class="anchor" href="#42-todosr的lack">#</a> 4.2 TODO：SR 的 lack</h4>
<h2 id="tcp传输协议"><a class="anchor" href="#tcp传输协议">#</a> TCP 传输协议</h2>
<h3 id="tcp-socket"><a class="anchor" href="#tcp-socket">#</a> TCP socket</h3>
<p 源ip地址、源端口号、目标ip地址、目标端口号>TCP socket 表示使用四元组:</p>
<h3 id="tcp-connection"><a class="anchor" href="#tcp-connection">#</a> TCP Connection</h3>
<ul>
<li>connect-oriented：面向连接，相互发送预备报文段，以确保数据传输的参数。</li>
<li>full-duplex service：全双工服务，如果一台主机上的进程 A 与另一台主机上的进程 B 存在一条 TCP 连接，那么应用层的数据就可以在进程 B 流向进程 A 的同时，也从进程 A 流向进程 B；</li>
<li>point-to-point：单个接收方之间的链接</li>
<li>three-way handshake：三次握手，<strong>客户端先发送一个特殊的 TCP 报文，服务器用另一个特殊的报文来响应，最后客户再用第三个特殊报文来作为响应。</strong></li>
</ul>
<p>客户进程通过使用 socket 套接字来将要发送的数据写入 send buffer，os 会把 send buffer 里的数据包装成 ip datagram，在由链路层打包成 frame 发送出去，目标服务器接受到后逐层拆解后把数据写入 TCP receive buffer ，再由 Socket 来读取数据。</p>
<p>TCP 可以从 buffer 中取出放入的 segment 中的数据最大的数量限制于 MSS（最大报文段长度）, 而 MSS 则由 MTU（链路层的最大传输单元）决定。</p>
<h3 id="tcp-segment-structure-报文段结构"><a class="anchor" href="#tcp-segment-structure-报文段结构">#</a> TCP segment structure 报文段结构</h3>
<p><strong>重点结构成员：</strong></p>
<ul>
<li>Sequence Number：32bit 的序号字段</li>
<li>Acknowledge Number：32bit 的确认号字段</li>
<li>Receive Windows：16bit 的接受窗字段，用于控制流量</li>
<li>Header Length: 4bit 的 header 长度字段，用于指示以 32bit 为单位的 TCP 的头部的长度。</li>
<li>Option: 动态调节</li>
<li>6bit 的标志字段（flag field）：
<ul>
<li>ACK：确认字段中的值是否有效；</li>
<li>RST、SYN、FIN：用于连接建立和拆除；</li>
<li>CWR、ECE：在明确拥塞通过中使用</li>
<li>PSH：被置位时，指示接收方立即将数据交给上层；</li>
<li>URG：指示 segment 中存放着被发送端上层实体设置为 “紧急” 的数据；</li>
</ul>
</li>
<li>Urgent Data Point: 16bit 的紧急数据指针字段，指出紧急数据的最后一个字节；</li>
</ul>
<h4 id="segment-number-and-acknowledgement-number"><a class="anchor" href="#segment-number-and-acknowledgement-number">#</a> segment number and acknowledgement number</h4>
<p>报文段的序号是该报文段首字节（data）的字节流编号，而不是建立在传送的报文段的序列上。</p>
<p>什么是字节流编号呢？</p>
<p>假设现在 A 主机要发送一串 50000 字节的 data 到 B 主机，但是 MSS 为 1000 字节，所以这个数据就需要拆解为 50 个 size 为 1000 字节的 segment 来多次发送，这 50000 字节流会被编号，0~49999，所以第一个 segment 的第一个字节的字节流编号就是 0，第二个 segment 的第一个字节流编号就是 1000，依次类推。</p>
<p><strong>主机 A 填充进报文段的确认号是主机 A 希望从主机 B 接收到的下一个字节的字节流序号！</strong></p>
<p><strong>由于网络中 TCP 的传输是不确定的，所以被拆分成多个 TCP 的数据不可能按原先的顺序被接收方接收，所以需要 segment number 在确定子数据包的顺序。</strong></p>
<p><strong>但是光有 segment number 是不够的， 因为在网络中不仅有发送方，还有接收方也会发送，TCP 是全双工的。所以需要确认号。这样就能保证双方接收的 data 都能按照正常的顺序进行排列</strong></p>
<h4 id="必考重点rdt可靠的数据传输"><a class="anchor" href="#必考重点rdt可靠的数据传输">#</a> 必考重点：RDT 可靠的数据传输</h4>
<p>先来看一段 TCP 发送的代码<br>
 <figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Assume sender is not constrained by TCP flow or congestion control, that data from above is less than MSS in size, and that data transfer is in one direction only. */</span></span><br><span class="line"></span><br><span class="line">NextSeqNum=InitialSeqNumber</span><br><span class="line">SendBase=InitialSeqNumber</span><br><span class="line">    </span><br><span class="line">loop (forever) &#123;</span><br><span class="line">    <span class="keyword">switch</span>(event)</span><br><span class="line">        </span><br><span class="line">        event: data received from application above</span><br><span class="line">            create TCP segment with sequence number NextSeqNum</span><br><span class="line">            <span class="keyword">if</span> (timer currently not running)</span><br><span class="line">            	start timer</span><br><span class="line">            pass segment to IP</span><br><span class="line">            NextSeqNum=NextSeqNum+length(data)</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    </span><br><span class="line">        event: timer timeout</span><br><span class="line">            retransmit not-yet-acknowledged segment with smallest sequence number</span><br><span class="line">            start timer</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">    </span><br><span class="line">        event: ACK received, with ACK field value of y</span><br><span class="line">            <span class="title function_">if</span> <span class="params">(y &gt; SendBase)</span> &#123;</span><br><span class="line">                SendBase=y</span><br><span class="line">                <span class="keyword">if</span> (there are currently any not-yet-acknowledged segments)</span><br><span class="line">                	start timer</span><br><span class="line">            &#125;</span><br><span class="line">    		<span class="keyword">break</span>;</span><br><span class="line">&#125; <span class="comment">/* end of loop forever */</span></span><br><span class="line"></span><br></pre></td></tr></table></figure></p>
<p>设置一个循环监听事件</p>
<ul>
<li>当从上层应用接收到数据时：</li>
</ul>
<ol>
<li>创建一个 TCP 数据段，序列号为 NextSeqNum。</li>
<li>如果定时器未启动，则启动定时器。</li>
<li>将数据段传递给 IP 层进行发送。</li>
<li>更新 NextSeqNum 为 NextSeqNum + length (data)，表示下一个将要发送的数据段的序列号。</li>
</ol>
<ul>
<li>当定时器超时时：</li>
</ul>
<ol>
<li>重传尚未确认的最小序列号的数据段（最早发送但未被确认的数据段）。</li>
<li>重启定时器。</li>
</ol>
<ul>
<li>当接收到 ACK 时：</li>
</ul>
<ol>
<li>检查 ACK 字段的值 y 是否大于 SendBase。</li>
<li>如果 y 大于 SendBase，则更新 SendBase 为 y，表示所有序列号小于 y 的数据段都已经被确认。</li>
<li>如果仍然有未被确认的数据段，则重启定时器。</li>
</ol>
<p><strong>超时间隔加倍</strong></p>
<p>当发生超时事件时，TCP 重传时都会将下一次的超时间隔设为先前值的两倍；当发生其他两个事件计时器重启时，TimeoutInterval 由最近的 EstimatedRTT 值与 DevRTT 值推算得到。这种修改提供了一个形式受限的拥塞控制。</p>
<p><strong>快速重传</strong></p>
<p>duplicate ACK：对一个已经发送过的 segment 进行再次的确认，重发一次 ack</p>
<p>当比期望 segment number 的失序报文段（就是发送的 segment number 和上一个 ACK 不一致）到达时，接收方立刻发送冗余 ACK（duplicate ACK），指示下一个期望字节的序号。如果 TCP 发送方接收到对相同数据的<strong>三个</strong> duplicate ACK TCP 就执行快速重传，即在报文段的定时器<strong>过期之前</strong>重传丢失的报文段，</p>
<p><strong>选择确认 selective acknowledgement</strong></p>
<p>接收端非常容易接收到 out-of-order 的 segments，那还能用当前接收到的最小 ack 作为 sendbase 吗</p>
<p>所以就需要选择确认：允许 TCP 接收端有选择的确认那些失序的报文段而不是收到什么确认什么，不是积累地确认最后一个正确接收的有序报文。</p>
<p>如何确定当前主机应该发送的 ACK 的值？</p>
<p>有以下几个原则：</p>
<ol>
<li>累积原则：ACK 如果为 n，则表示主机确认接收到 0~n-1 的序号的 segment，所以 ACK 可以是最小的未确认 segment 序号；</li>
<li>期望下一个发送：ACK 被主机视为希望下一个发送的 segment，在一些简单的 TCP 发送程序，ACK 赋值给 sendBase，用来确定每次定时器到期时第一个发送的 segment；</li>
<li>丢包和延迟：仍然发送上一个 ACK，被称为 duplicate ACK，发送超过三次触发快速重传。</li>
</ol>
<h4 id="流量控制-flow-control"><a class="anchor" href="#流量控制-flow-control">#</a> 流量控制 Flow Control</h4>
<p>发送端需要维护一个 receive window 来控制流量。receive window 用于给发送者一个指示，该接收方还有多少可用的缓存空间。因为 TCP 是全双工通信（发送端同时也是接收端，接收端同时也是发送端），所以 link 两端的 sender 都需要维护一个 receive window。</p>
<p>RcvBuffer：接收缓存的总大小<br>
 rwnd：可用的接收缓存的大小</p>
<h4 id="tcp-connect-management"><a class="anchor" href="#tcp-connect-management">#</a> TCP Connect Management</h4>
<h5 id="三次握手连接-three-way-handshake"><a class="anchor" href="#三次握手连接-three-way-handshake">#</a> 三次握手连接 three-way handshake</h5>
<p><img data-src="%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B.png" alt="三次握手"></p>
<h5 id="四次握手关闭-four-way-handshake"><a class="anchor" href="#四次握手关闭-four-way-handshake">#</a> 四次握手关闭 four-way handshake</h5>
<p><img data-src="%E5%9B%9B%E6%AC%A1%E6%8F%A1%E6%89%8B.png" alt="四次握手"></p>
<h4 id="tcp-state"><a class="anchor" href="#tcp-state">#</a> TCP State</h4>
<p><strong>客户端 TCP 经典状态</strong></p>
<p>客户端应用初始化一个 TCP 连接，发动 SYN</p>
<ul>
<li>SYN_SENT： Receive SYN &amp; ACK，send ACK</li>
<li>ESTABLISHED：Send FIN<br>
Client application initiates close connect</li>
<li>FIN_WAIT_1：Receive ACK， send nothing</li>
<li>FIN_WAIT_2：Receive FIN，send ACK</li>
<li>TIME_WAIT：wait 30 seconds</li>
<li>CLOSED</li>
</ul>
<p><strong>服务端经典状态</strong></p>
<p>Server application creates a listen socket</p>
<ul>
<li>LiSTEN: Receive SYN, send SYN &amp; ACK</li>
<li>SYN_RCVD: Receive ACK,  send nothing</li>
<li>ESTABLISHED: Receive FIN, send ACK</li>
<li>CLOSE_WAIT: Send FIN</li>
<li>LAST_ACK: Receive ACK, send nothing</li>
<li>CLOSED</li>
</ul>
<h4 id="多路复用与多路分解multiplexing-and-demultiplexing"><a class="anchor" href="#多路复用与多路分解multiplexing-and-demultiplexing">#</a> 多路复用与多路分解（Multiplexing and Demultiplexing）</h4>
<p>运输层的多路复用与多路分解，就是多主机上的进程之间（A 主机的进程 1 与 B 主机的进程 2）的运输服务。一个进程有一个或多个套接字（socket），它相当于从网络向进程传递数据和从进程向网络传递数据的门户。</p>
<ul>
<li>Multiplexing：在源主机从不同 socket 中收集 data blocks，并为每个 data block 封装首部信息（header）从而生成 segment，然后把 segment 传递到网络层；</li>
<li>Demultiplexing：在接收端，运输层会检查这些字段，标识处接收 socket，进而将 segment 定向到该 socket，即把运输层 segment 的 data 交付给正确的 socket（进程与网络的门户，也就是设备的端口）</li>
</ul>
<p>multiplexing 要求：</p>
<ol>
<li>socket 有唯一的标识符</li>
<li>segment 的 header 中有用来指示交付给的 socket 的特殊字段</li>
</ol>
<p>这些特殊字段就是源端口号字段和目的端口号字段</p>
<h4 id="必考重点tcp的拥塞控制-principles-of-congestion-control"><a class="anchor" href="#必考重点tcp的拥塞控制-principles-of-congestion-control">#</a> 必考重点：TCP 的拥塞控制 Principles of Congestion Control</h4>
<h5 id="拥塞原因和代价"><a class="anchor" href="#拥塞原因和代价">#</a> 拥塞原因和代价</h5>
<ul>
<li>当分组的到达速率接近链路容量时，分组经历巨大的排队时延；</li>
<li>发送方在遇到大时延时所进行的不必要重传会引起路由器利用其链路带宽来转发不必要的分组副本；</li>
<li>当一个分组沿一条路径被丢弃时，每个上游路由器用于转发该分组到丢弃该分组而使用的传输容量最终被浪费掉；</li>
</ul>
<h5 id="拥塞控制方法"><a class="anchor" href="#拥塞控制方法">#</a> 拥塞控制方法</h5>
<ul>
<li>end-to-end congestion control</li>
</ul>
<p>TCP segment 丢失意味着 网络拥塞，TCP 会减低窗口大小（cwnd、rwnd）。</p>
<ul>
<li>network-assisted congestion control</li>
</ul>
<p>网络层中的路由器会返回关于链路是否发生 congest 的信息给主机。下面会详细介绍一个网络辅助拥塞控制算法的应用。</p>
<h4 id="重点来叻tcp拥塞控制-congestion-control"><a class="anchor" href="#重点来叻tcp拥塞控制-congestion-control">#</a> 重点来叻：TCP 拥塞控制 Congestion Control</h4>
<p>运行在发送方的 TCP 拥塞控制机制跟踪一个额外的变量，即 congestion window（cwnd）。它规定了一个 TCP 发送方能向网络中发送流量的最大速率，用来限制主机发送流量，如果主机知道自己和目的地之间存在 congest，会降低发送的 rate</p>
<p>发送方未确认的数据量不会超过 cwnd 和 rwnd 的最小值。</p>
<p>cwnd 是动态变化的。</p>
<ul>
<li>一个丢失的报文段表意味着拥塞，因此当丢失报文段时应当降低 TCP 发送方的速率；</li>
<li>一个确认报文段指示该网络正在向接收方交付发送方的报文段，因此，当对先前未确认报文段的确认到达时，能够增加发送方的速率；</li>
</ul>
<h5 id="tcp拥塞控制算法"><a class="anchor" href="#tcp拥塞控制算法">#</a> TCP 拥塞控制算法</h5>
<p>算法包括三个部分：<strong>slow-start、congestion avoidance、fast recovery</strong></p>
<ul>
<li>slow-start：<br>
在慢启动状态下，cwnd 的值以 1 个 MSS 开始并且每当传输的 segment 首次被确认就增加 1 个 MSS。</li>
<li>如果存在一个由超时指示的丢包事件，TCP 发送方将 cwnd 设置为 1 并重新开始慢启动过程。它还将第二状态变量 ssthresh（慢启动阈值）设置为 cwnd/2</li>
<li>一旦进入拥塞避免状态，cwnd 的值大约是上次遇到拥塞时的值的一半，即距离拥塞可能并不遥远；在任意状态冗余 ACK 达到 3 个就会进入快速恢复状态的缺失报文段。<br>
<img data-src="%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6%E7%AE%97%E6%B3%95%E7%8A%B6%E6%80%81%E8%BD%AC%E6%8D%A2%E6%9C%BA.png" alt="拥塞控制算法状态转换机"></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/07/%E8%AE%A1%E7%BD%91--%E4%BC%A0%E8%BE%93%E5%B1%82%E9%87%8D%E7%82%B9%E5%A4%8D%E4%B9%A0/" data-id="clypfitv8001biodi2r2i1laq" data-title="计网--传输层重点复习" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-操作系统--进程通信与调度" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F--%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E4%B8%8E%E8%B0%83%E5%BA%A6/" class="article-date">
  <time class="dt-published" datetime="2024-06-04T07:48:31.000Z" itemprop="datePublished">2024-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F--%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E4%B8%8E%E8%B0%83%E5%BA%A6/">操作系统--进程通信与调度</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-&#x8FDB;&#x7A0B;process"><a class="anchor" href="#1-&#x8FDB;&#x7A0B;process">#</a> 1 &#x8FDB;&#x7A0B; Process</h2>
<p>&#x5982;&#x4F55;&#x5B9A;&#x4E49; process&#xFF1A;&#xFF08;process &#x7684;&#x51E0;&#x4E2A;&#x5B9A;&#x4E49;&#x7279;&#x70B9;&#xFF09;</p>
<ol>
<li>Sequence Execution &#x7A0B;&#x5E8F;&#x7684;&#x987A;&#x5E8F;&#x6267;&#x884C;&#xFF1A;&#x4E00;&#x4E2A;&#x6709;&#x72EC;&#x7ACB;&#x529F;&#x80FD;&#x7684;&#x7A0B;&#x5E8F;&#x72EC;&#x5360;&#x5904;&#x7406;&#x5668;&#x76F4;&#x81F3;&#x6700;&#x7EC8;&#x7ED3;&#x675F;&#x7684;&#x8FC7;&#x7A0B;</li>
<li>Concurrency Execution&#xFF1A;&#x5E76;&#x53D1;&#x6267;&#x884C;&#xFF0C;&#x8FDB;&#x7A0B;&#x5177;&#x6709;&#x5E76;&#x53D1;&#x6027;&#xFF0C;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E92;&#x4E0D;&#x5E72;&#x6270;&#xFF0C;&#x540C;&#x65F6;&#x8FD0;&#x884C;&#x3002;</li>
</ol>
<p><strong>The Process Model</strong></p>
<ul>
<li>Multiprogramming of four programs&#xFF08;one PC&#xFF09;</li>
<li>Conceptual model of 4 independent&#xFF0C;sequential  processes</li>
<li>Only one program active at any instant</li>
</ul>
<p><strong>Process Concept</strong></p>
<p>&#x8FDB;&#x7A0B;&#xFF1A;&#x4E00;&#x4E2A;&#x5177;&#x6709;&#x4E00;&#x5B9A;&#x72EC;&#x7ACB;&#x529F;&#x80FD;&#x7684;&#x7A0B;&#x5E8F;&#x5173;&#x4E8E;&#x67D0;&#x4E2A;&#x6570;&#x636E;&#x96C6;&#x5408;&#x7684;&#x4E00;&#x6B21;&#x6D3B;&#x52A8;&#x3002;</p>
<p><strong>&#x8FDB;&#x7A0B;&#x548C;&#x7A0B;&#x5E8F;&#x4E4B;&#x95F4;&#x7684;&#x533A;&#x522B;&#xFF1A;</strong></p>
<ol>
<li>&#x7A0B;&#x5E8F;&#x662F;&#x547D;&#x4EE4;&#x7684;&#x96C6;&#x5408;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x9759;&#x6001;&#x7684;&#x6982;&#x5FF5;&#xFF1B;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x63CF;&#x8FF0;&#x5E76;&#x53D1;&#x7684;&#x8FC7;&#x7A0B;&#xFF0C;&#x662F;&#x4E00;&#x4E2A;&#x52A8;&#x6001;&#x7684;&#x6982;&#x5FF5;&#x3002;</li>
<li>&#x8FDB;&#x7A0B;&#x5305;&#x542B;&#x7A0B;&#x5E8F;&#xFF0C;&#x6570;&#x636E;&#xFF0C;pcb&#xFF08;&#x8FDB;&#x7A0B;&#x63A7;&#x5236;&#x5757;&#xFF09;</li>
<li>&#x8FDB;&#x7A0B;&#x662F;&#x6682;&#x65F6;&#x7684;&#xFF0C;&#x6709;&#x5173;&#x95ED;&#x7684;&#x65F6;&#x523B;&#xFF1B;&#x7A0B;&#x5E8F;&#x662F;&#x6C38;&#x4E45;&#x7684;&#xFF0C;&#x4E00;&#x65E6;&#x5199;&#x597D;&#x5C31;&#x4E00;&#x76F4;&#x5B58;&#x5728;&#x3002;</li>
<li>&#x4E00;&#x4E2A;&#x7A0B;&#x5E8F;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x6765;&#x8FD0;&#x884C;&#x5404;&#x4E2A;&#x90E8;&#x5206;&#xFF1B;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x8FD0;&#x884C;&#x591A;&#x4E2A;&#x7A0B;&#x5E8F;&#xFF1B;</li>
<li>&#x8FDB;&#x7A0B;&#x4E5F;&#x53EF;&#x4EE5;&#x521B;&#x9020;&#x5176;&#x4ED6;&#x7684;&#x8FDB;&#x7A0B;&#xFF1B;</li>
</ol>
<p><strong>&#x4F55;&#x65F6;&#x521B;&#x5EFA;&#x8FDB;&#x7A0B;</strong></p>
<ol>
<li>&#x7CFB;&#x7EDF;&#x521D;&#x59CB;&#x5316;&#x65F6;&#xFF1A;&#x521B;&#x5EFA;&#x4E24;&#x79CD;&#x8FDB;&#x7A0B;&#xFF1A;</li>
</ol>
<ul>
<li>Foreground Process&#xFF1A;&#x4E0E;&#x7528;&#x6237;&#x4EA4;&#x4E92;&#x63D0;&#x4F9B;&#x670D;&#x52A1;</li>
<li>Background Process&#xFF1A;&#x5904;&#x7406;&#x7528;&#x6237;&#x8C03;&#x7528;&#x7684;&#x8C03;&#x7528;&#xFF0C;&#x53C8;&#x79F0;&#x4E3A; daemon&#xFF08;&#x5B88;&#x62A4;&#x8FDB;&#x7A0B;&#xFF09;</li>
</ul>
<ol start="2">
<li>fork&#xFF08;&#xFF09;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;</li>
<li>&#x7528;&#x6237;&#x8BF7;&#x6C42;</li>
<li>Initiation of a batch job</li>
</ol>
<h3 id="11&#x4F55;&#x65F6;&#x7EC8;&#x6B62;&#x8FDB;&#x7A0B;"><a class="anchor" href="#11&#x4F55;&#x65F6;&#x7EC8;&#x6B62;&#x8FDB;&#x7A0B;">#</a> 1.1<strong> &#x4F55;&#x65F6;&#x7EC8;&#x6B62;&#x8FDB;&#x7A0B;</strong></h3>
<p>&#x7EC8;&#x6B62;&#x8FDB;&#x7A0B;&#x7684;&#x6761;&#x4EF6;&#xFF1A;</p>
<ul>
<li>Normal exit</li>
<li>Error exit</li>
<li>Fatal error</li>
<li>Killed by another process</li>
</ul>
<h3 id="12&#x8FDB;&#x7A0B;&#x5C42;&#x6B21;"><a class="anchor" href="#12&#x8FDB;&#x7A0B;&#x5C42;&#x6B21;">#</a> 1.2<strong> &#x8FDB;&#x7A0B;&#x5C42;&#x6B21;</strong></h3>
<p>&#x7236;&#x8FDB;&#x7A0B;&#x3001;&#x5B50;&#x8FDB;&#x7A0B;&#x5F62;&#x6210;&#x7684;&#x5C42;&#x7EA7;&#x7ED3;&#x6784;&#xFF1B;<strong>window &#x6CA1;&#x6709;&#x8FDB;&#x7A0B;&#x7684;&#x5C42;&#x6B21;&#x7ED3;&#x6784;&#x7684;&#x6982;&#x5FF5;</strong></p>
<h3 id="13&#x8FDB;&#x7A0B;&#x72B6;&#x6001;"><a class="anchor" href="#13&#x8FDB;&#x7A0B;&#x72B6;&#x6001;">#</a> 1.3<strong> &#x8FDB;&#x7A0B;&#x72B6;&#x6001;</strong></h3>
<ul>
<li>Running</li>
<li>Ready</li>
<li>Blocked</li>
</ul>
<p>&#x8FDB;&#x7A0B;&#x72B6;&#x6001;&#x4E4B;&#x95F4;&#x7684;&#x76F8;&#x4E92;&#x8F6C;&#x6362;&#xFF1A;</p>
<p>Process blocks for input &#xFF1A;running -&gt; blocked<br>
Scheduler picks another process: running -&gt; ready<br>
Scheduler picks this process: ready -&gt; running<br>
Input becomes available: blocked -&gt; running</p>
<h3 id="14&#x8FDB;&#x7A0B;&#x5B9E;&#x73B0;"><a class="anchor" href="#14&#x8FDB;&#x7A0B;&#x5B9E;&#x73B0;">#</a> 1.4<strong> &#x8FDB;&#x7A0B;&#x5B9E;&#x73B0;</strong></h3>
<p>&#x5148;&#x8003;&#x8651;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7531;&#x4EC0;&#x4E48;&#x7EC4;&#x6210;&#xFF1A;</p>
<ul>
<li>User program</li>
<li>User data</li>
<li>stack &#x53D8;&#x91CF;&#x50A8;&#x5B58;&#x7684;&#x5730;&#x65B9;</li>
<li>PCB</li>
<li>Process Context
<ul>
<li>&#x5BF9;&#x6574;&#x4E2A;&#x6267;&#x884C;&#x8FDB;&#x7A0B;&#x7684;&#x6700;&#x57FA;&#x672C;&#x7684;&#x63CF;&#x8FF0;</li>
<li>&#x5206;&#x4E3A;&#xFF1A;User Context&#x3001;Register Context&#x3001;System Context</li>
</ul>
</li>
<li>Context Switch &#xFF08;CPU &#x7684;&#x8FDB;&#x7A0B;&#x5207;&#x6362;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x8FDB;&#x7A0B;&#x8C03;&#x5EA6;&#xFF09;
<ul>
<li>&#x7531;&#x7CFB;&#x7EDF;&#x7684; schedule &#x6765;&#x6267;&#x884C;</li>
<li>&#x4FDD;&#x5B58;&#x65E7;&#x8FDB;&#x7A0B;&#x7684; pcb&#xFF0C;&#x52A0;&#x8F7D;&#x65B0;&#x8FDB;&#x7A0B;&#x7684; pcb</li>
<li>&#x5237;&#x65B0; memory cache</li>
<li>&#x8F6C;&#x6362;&#x865A;&#x62DF;&#x5185;&#x5B58;&#x6620;&#x5C04;&#xFF08;memory mapping&#xFF09;</li>
<li>&#x8FDB;&#x7A0B;&#x7684;&#x5207;&#x6362;&#x662F;&#x975E;&#x5E38; cost &#x7684;</li>
</ul>
</li>
<li>PCB Table
<ul>
<li>OS &#x7EF4;&#x62A4;&#x7684;&#x8FDB;&#x7A0B;&#x8868;&#xFF0C;&#x6BCF;&#x4E00;&#x9879;&#x5C31;&#x662F;&#x8BE5;&#x8FDB;&#x7A0B;&#x7684; pcb</li>
<li>PCB table &#x7684;&#x5927;&#x5C0F;&#x53EF;&#x4EE5;&#x8861;&#x91CF;&#x7CFB;&#x7EDF;&#x7684;&#x5E76;&#x53D1;&#x6027;</li>
<li>&#x4E24;&#x79CD;&#x7EC4;&#x7EC7;&#x5F62;&#x5F0F;&#xFF1A;Link&#x3001;Index</li>
</ul>
</li>
</ul>
<h2 id="2-&#x7EBF;&#x7A0B;-thread"><a class="anchor" href="#2-&#x7EBF;&#x7A0B;-thread">#</a> 2 &#x7EBF;&#x7A0B; Thread</h2>
<h3 id="21-thread-concept"><a class="anchor" href="#21-thread-concept">#</a> 2.1 Thread concept</h3>
<p>&#x7EBF;&#x7A0B;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x8FDB;&#x7A0B;&#x7684;&#x8FDB;&#x7A0B;&#x3002;</p>
<ul>
<li>&#x539F;&#x8FDB;&#x7A0B; PCB &#x7684;&#x5185;&#x5BB9;&#x5206;&#x6210;&#x4E24;&#x90E8;&#x5206;&#xFF1A;
<ul>
<li>&#x63CF;&#x8FF0;&#x8FDB;&#x7A0B;&#x8D44;&#x6E90;&#x548C;&#x7A7A;&#x95F4;&#x7684;&#x90E8;&#x5206;&#xFF1B;</li>
<li>&#x63CF;&#x8FF0;&#x6267;&#x884C;&#x73B0;&#x573A;&#x3001;&#x72B6;&#x6001;&#x53CA;&#x8C03;&#x5EA6;&#x7684;&#x90E8;&#x5206;&#x3002;</li>
</ul>
</li>
</ul>
<p>&#x5C06;&#x7B2C;&#x4E8C;&#x90E8;&#x5206;&#x5185;&#x5BB9;&#x4F5C;&#x4E3A;&#x7EBF;&#x7A0B;&#x63A7;&#x5236;&#x5757;<strong> TCB</strong> &#x7684;&#x5185;&#x5BB9;&#xFF0C;&#x4E14;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x5185;&#x5141;&#x8BB8;&#x591A;&#x4E2A;<br>
&#x7EBF;&#x7A0B;&#x5B58;&#x5728;&#x3002;</p>
<ul>
<li>&#x65B0;&#x8FDB;&#x7A0B;&#x63CF;&#x8FF0;&#x4E3A;&#xFF1A;
<ul>
<li>&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x8FDB;&#x7A0B;&#x7A7A;&#x95F4;&#xFF0C;&#x53EF;&#x88C5;&#x5165;&#x8FDB;&#x7A0B;&#x6620;&#x50CF;&#xFF1B;</li>
<li>&#x4E00;&#x4E2A;&#x72EC;&#x7ACB;&#x7684;&#x8FDB;&#x7A0B;&#x76F8;&#x5173;&#x8054;&#x7684;&#x6267;&#x884C;&#x6587;&#x4EF6;&#xFF1B;</li>
<li>&#x8FDB;&#x7A0B;&#x6240;&#x7528;&#x7684;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF1B;</li>
<li>&#x4E00;&#x4E2A;&#x6216;&#x591A;&#x4E2A;&#x7EBF;&#x7A0B;&#x3002;&#xFF08;&#x8FDB;&#x7A0B;&#x5728;&#x521B;&#x5EFA;&#x65F6;&#x4E00;&#x822C;&#x540C;&#x65F6;&#x521B;&#x5EFA;&#x597D;&#x7B2C;&#x4E00;&#x4E2A;&#x7EBF;&#x7A0B;&#xFF0C;<br>
&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x6309;&#x9700;&#x8981;&#x7531;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x8BF7;&#x6C42;&#x521B;&#x5EFA;&#xFF09;</li>
</ul>
</li>
</ul>
<p>&#x7EBF;&#x7A0B;&#x4E0D;&#x62E5;&#x6709;&#x7CFB;&#x7EDF;&#x8D44;&#x6E90;&#xFF0C;&#x8FD9;&#x662F;&#x7EBF;&#x7A0B;&#x4E0E;&#x8FDB;&#x7A0B;&#x4E0D;&#x4E00;&#x6837;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x7EBF;&#x7A0B;&#x53EA;&#x9700;&#x8981;&#x4FDD;&#x8BC1;&#x5176;&#x8FD0;&#x884C;&#x7684;&#x57FA;&#x672C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#xFF1A;TCB&#xFF0C;pc&#xFF0C;a register set and a stack&#xFF0C;&#x5B83;&#x4E0E;&#x8BE5;&#x8FDB;&#x7A0B;&#x7684;&#x5176;&#x4ED6;&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#x8BE5;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x8D44;&#x6E90;</p>
<h3 id="22-&#x91CD;&#x70B9;&#x8FDB;&#x7A0B;&#x548C;&#x7EBF;&#x7A0B;&#x7684;&#x533A;&#x522B;"><a class="anchor" href="#22-&#x91CD;&#x70B9;&#x8FDB;&#x7A0B;&#x548C;&#x7EBF;&#x7A0B;&#x7684;&#x533A;&#x522B;">#</a> 2.2 &#x91CD;&#x70B9;&#xFF1A;&#x8FDB;&#x7A0B;&#x548C;&#x7EBF;&#x7A0B;&#x7684;&#x533A;&#x522B;</h3>
<ol>
<li>&#x8FDB;&#x7A0B;&#x662F;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x7684;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#xFF0C;&#x6240;&#x6709;&#x4E0E;&#x8BE5;&#x8FDB;&#x7A0B;&#x6709;&#x5173;&#x7684;&#x8D44;&#x6E90;&#x5206;<br>
&#x914D;&#x60C5;&#x51B5;&#xFF0C;&#x5982;&#x6253;&#x5370;&#x673A;&#x3001;I/O &#x7F13;&#x51B2;&#x961F;&#x5217;&#x7B49;&#xFF0C;&#x5747;&#x8BB0;&#x5F55;&#x5728;&#x8FDB;&#x7A0B;&#x63A7;&#x5236;&#x5757;<br>
 PCB &#x4E2D;&#xFF0C;&#x8FDB;&#x7A0B;&#x4E5F;&#x662F;&#x5206;&#x914D;&#x4E3B;&#x5B58;&#x7684;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#xFF0C;&#x5B83;&#x62E5;&#x6709;&#x4E00;&#x4E2A;&#x5B8C;&#x6574;<br>
&#x7684;&#x865A;&#x62DF;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x3002;&#x800C;&#x7EBF;&#x7A0B;&#x4E0E;&#x8D44;&#x6E90;&#x5206;&#x914D;&#x65E0;&#x5173;&#xFF0C;&#x5B83;&#x5C5E;&#x4E8E;&#x67D0;&#x4E00;&#x4E2A;<br>
&#x8FDB;&#x7A0B;&#xFF0C;&#x5E76;&#x4E0E;&#x8BE5;&#x8FDB;&#x7A0B;&#x5185;&#x7684;&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x4E00;&#x8D77;&#x5171;&#x4EAB;&#x8FDB;&#x7A0B;&#x7684;&#x8D44;&#x6E90;&#x3002;</li>
<li>&#x4E0D;&#x540C;&#x7684;&#x8FDB;&#x7A0B;&#x62E5;&#x6709;&#x4E0D;&#x540C;&#x7684;&#x865A;&#x62DF;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#xFF0C;&#x800C;&#x540C;&#x4E00;&#x8FDB;&#x7A0B;&#x4E2D;&#x7684;&#x591A;<br>
&#x4E2A;&#x7EBF;&#x7A0B;&#x5171;&#x4EAB;&#x540C;&#x4E00;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x3002;</li>
<li>&#x8FDB;&#x7A0B;&#x8C03;&#x5EA6;&#x7684;&#x5207;&#x6362;&#x5C06;&#x6D89;&#x53CA;&#x5230;&#x6709;&#x5173;&#x8D44;&#x6E90;&#x6307;&#x9488;&#x7684;&#x4FDD;&#x5B58;&#x53CA;&#x8FDB;&#x7A0B;&#x5730;&#x5740;<br>
&#x7A7A;&#x95F4;&#x7684;&#x8F6C;&#x6362;&#x7B49;&#x95EE;&#x9898;&#x3002;&#x800C;&#x7EBF;&#x7A0B;&#x7684;&#x5207;&#x6362;&#x5C06;&#x4E0D;&#x6D89;&#x53CA;&#x8D44;&#x6E90;&#x6307;&#x9488;&#x7684;&#x4FDD;<br>
&#x5B58;&#x548C;&#x5730;&#x5740;&#x7A7A;&#x95F4;&#x7684;&#x53D8;&#x5316;&#x3002;&#x6240;&#x4EE5;&#xFF0C;&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x7684;&#x5F00;&#x9500;&#x8981;&#x6BD4;&#x8FDB;&#x7A0B;&#x5207;<br>
&#x6362;&#x7684;&#x5F00;&#x9500;&#x5C0F;&#x5F97;&#x591A;&#x3002;</li>
<li>&#x8FDB;&#x7A0B;&#x7684;&#x8C03;&#x5EA6;&#x4E0E;&#x5207;&#x6362;&#x90FD;&#x662F;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x5B8C;&#x6210;&#xFF0C;&#x800C;&#x7EBF;&#x7A0B;&#x5219;<br>
&#x65E2;&#x53EF;&#x7531;&#x64CD;&#x4F5C;&#x7CFB;&#x7EDF;&#x5185;&#x6838;&#x5B8C;&#x6210;&#xFF0C;&#x4E5F;&#x53EF;&#x7531;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x8FDB;&#x884C;&#x3002;</li>
<li>&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x52A8;&#x6001;&#x521B;&#x5EFA;&#x8FDB;&#x7A0B;&#x3002;&#x88AB;&#x8FDB;&#x7A0B;&#x521B;&#x5EFA;&#x7684;&#x7EBF;&#x7A0B;&#x4E5F;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;<br>
&#x5176;&#x5B83;&#x7EBF;&#x7A0B;&#x3002;</li>
<li>&#x8FDB;&#x7A0B;&#x6709;&#x521B;&#x5EFA;&#x3001;&#x6267;&#x884C;&#x3001;&#x6D88;&#x4EA1;&#x7684;&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;&#x7EBF;&#x7A0B;&#x4E5F;&#x6709;&#x7C7B;&#x4F3C;&#x7684;<br>
&#x751F;&#x547D;&#x5468;&#x671F;&#x3002;</li>
</ol>
<h3 id="23-thread-advantage"><a class="anchor" href="#23-thread-advantage">#</a> 2.3 Thread Advantage</h3>
<ol>
<li>&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x9020;&#xFF0C;&#x5207;&#x6362;&#xFF0C;&#x7ED3;&#x675F;&#x7684;&#x5F00;&#x9500;&#x5C0F;</li>
<li>&#x7EBF;&#x7A0B;&#x901A;&#x4FE1;&#x975E;&#x5E38;&#x7B80;&#x5355;&#xFF0C;&#x56E0;&#x4E3A;&#x5171;&#x4EAB;&#x8D44;&#x6E90;&#xFF0C;&#x516C;&#x7528;&#x4E00;&#x5757;&#x865A;&#x62DF;&#x5185;&#x5B58;</li>
</ol>
<h3 id="24-thread-usage"><a class="anchor" href="#24-thread-usage">#</a> 2.4 Thread Usage</h3>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x8981;&#x4F7F;&#x7528; thread &#x5462;&#xFF1F;</p>
<ul>
<li>&#x54CD;&#x5E94;&#x6027;&#xFF1A;&#x591A;&#x4E2A;&#x6D3B;&#x52A8;&#x540C;&#x65F6;&#x8FDB;&#x884C;</li>
<li>&#x8D44;&#x6E90;&#x5171;&#x4EAB;</li>
<li>&#x5F00;&#x9500;&#x5C0F;&#xFF1A;&#x521B;&#x9020;&#x548C;&#x9500;&#x6BC1;&#x7684;&#x5F00;&#x9500;&#x5C0F;</li>
<li>&#x5728;&#x591A;&#x5904;&#x7406;&#x5668;&#x7ED3;&#x6784;&#x7684;&#x7CFB;&#x7EDF;&#x4E2D;&#x975E;&#x5E38;&#x597D;&#x7528;</li>
</ul>
<h3 id="25-thread&#x7684;&#x5B9E;&#x73B0;"><a class="anchor" href="#25-thread&#x7684;&#x5B9E;&#x73B0;">#</a> 2.5 Thread &#x7684;&#x5B9E;&#x73B0;</h3>
<p>&#x4E09;&#x79CD;&#x67B6;&#x6784;</p>
<ul>
<li>&#x7528;&#x6237;&#x7A7A;&#x95F4;</li>
<li>&#x5185;&#x6838;&#x7A7A;&#x95F4;</li>
<li>&#x4E24;&#x8005;&#x6DF7;&#x5408;</li>
</ul>
<h4 id="251-user-threads"><a class="anchor" href="#251-user-threads">#</a> 2.5.1 User Threads</h4>
<ul>
<li>&#x7EBF;&#x7A0B;&#x6253;&#x5305;&#x5728;&#x7528;&#x6237;&#x6001;&#xFF0C;&#x5185;&#x6838;&#x5B8C;&#x5168;&#x4E0D;&#x77E5;&#x9053;&#x7EBF;&#x7A0B;</li>
<li>&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x4E0D;&#x9700;&#x8981;&#x5185;&#x6838;&#x7684;&#x6743;&#x9650;&#xFF0C;&#x5207;&#x6362;&#x5F00;&#x9500;&#x5C0F;&#x4E14;&#x5FEB;&#x901F;</li>
<li>&#x95EE;&#x9898;&#xFF1A;&#x5982;&#x679C;&#x5185;&#x6838;&#x662F;&#x5355;&#x7EBF;&#x7A0B;&#x7684;&#xFF0C;&#x4EFB;&#x4F55;&#x7528;&#x6237;&#x6001;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x4E86;&#x4E00;&#x8C03;&#x6B63;&#x5728;&#x963B;&#x585E;&#x7684;&#x7CFB;&#x7EDF;&#x8C03;&#x7528;&#xFF0C;&#x5C31;&#x4F1A;&#x5BFC;&#x81F4;&#x6574;&#x4E2A;&#x8FDB;&#x7A0B;&#x8FDB;&#x5165;&#x963B;&#x585E;&#x72B6;&#x6001;&#x3002;&#x7EBF;&#x7A0B;&#x7684;&#x963B;&#x585E;&#x4F1A;&#x5BFC;&#x81F4;&#x8FDB;&#x7A0B;&#x7684;&#x963B;&#x585E;</li>
</ul>
<h4 id="252-kernel-threads"><a class="anchor" href="#252-kernel-threads">#</a> 2.5.2 Kernel Threads</h4>
<ul>
<li>&#x5185;&#x6838;&#x8D1F;&#x8D23;&#x7BA1;&#x7406;&#x7EBF;&#x7A0B;&#xFF0C;&#x8D1F;&#x8D23;&#x7EBF;&#x7A0B;&#x7684;&#x521B;&#x9020;&#x3001;&#x8C03;&#x5EA6;&#x3001;&#x9500;&#x6BC1;</li>
<li>&#x6CA1;&#x6709;&#x7EBF;&#x7A0B;&#x5E93;&#xFF0C;&#x5185;&#x6838;&#x63D0;&#x4F9B;&#x7EBF;&#x7A0B;&#x76F8;&#x5173;&#x7684; api</li>
<li>&#x5185;&#x6838;&#x4FDD;&#x6301;&#x7740;&#x8FDB;&#x7A0B;&#x548C;&#x7EBF;&#x7A0B;&#x7684; context</li>
<li>&#x7EBF;&#x7A0B;&#x5207;&#x6362;&#x9700;&#x8981;&#x5185;&#x6838;&#xFF0C;&#x6240;&#x4EE5;&#x7EBF;&#x7A0B;&#x662F;&#x8C03;&#x5EA6;&#x5668;&#x7684;&#x57FA;&#x672C;&#x5355;&#x4F4D;&#xFF0C;&#x8C03;&#x5EA6;&#x5668;&#x8C03;&#x5EA6;&#x7684;&#x662F;&#x7EBF;&#x7A0B;</li>
<li>&#x7F3A;&#x70B9;&#x662F; high cost</li>
</ul>
<h3 id="3-&#x8003;&#x8BD5;&#x91CD;&#x70B9;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;ipc"><a class="anchor" href="#3-&#x8003;&#x8BD5;&#x91CD;&#x70B9;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;ipc">#</a> 3 &#x8003;&#x8BD5;&#x91CD;&#x70B9;&#xFF1A;&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#xFF08;IPC&#xFF09;</h3>
<p><strong>&#x8FD9;&#x90E8;&#x5206;&#x91CD;&#x70B9;&#x8BA8;&#x8BBA;&#x4EE5;&#x4E0B; issue&#xFF1A;</strong></p>
<ul>
<li>&#x8FDB;&#x7A0B;&#x95F4;&#x5982;&#x4F55;&#x4F20;&#x9012;&#x4FE1;&#x606F;</li>
<li>&#x8D44;&#x6E90;&#x5171;&#x4EAB;</li>
<li>&#x8FDB;&#x7A0B;&#x540C;&#x6B65;&#xFF08;process synchronization&#xFF09;</li>
</ul>
<p>&#x5728;&#x8D44;&#x6E90;&#x5171;&#x4EAB;&#x4E2D;&#x5B58;&#x5728;&#x4E00;&#x4E2A;&#x91CD;&#x8981;&#x7684;&#x8BA4;&#x8BC6;&#xFF1A;&#x7ADE;&#x4E89;&#xFF08;Race&#xFF09;</p>
<p>&#x5B58;&#x5728;&#x7ADE;&#x4E89;&#x7684;&#x6761;&#x4EF6;&#xFF1A;</p>
<ul>
<li>
<p>&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x8BBF;&#x95EE;&#x4E34;&#x754C;&#x533A;&#x7684; data&#xFF0C;&#x5E76;&#x4E14;&#x8FDB;&#x7A0B;&#x8FD0;&#x884C;&#x7684;&#x7ED3;&#x679C;&#x9700;&#x8981;&#x591A;&#x6B65;&#x8BBF;&#x95EE;&#x4E34;&#x754C;&#x533A;</p>
</li>
<li>
<p>&#x907F;&#x514D;&#x7ADE;&#x4E89;&#x7684;&#x65B9;&#x6CD5;&#x662F;&#x907F;&#x514D;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x5BF9;&#x4E34;&#x754C;&#x533A;&#x7684; data &#x540C;&#x65F6;&#x8FDB;&#x884C;&#x8BFB;&#x5199;&#x3002;</p>
</li>
<li>
<p>&#x4E34;&#x754C;&#x8D44;&#x6E90; Critical Resource&#xFF1A;&#x4E00;&#x6B21;&#x53EA;&#x5141;&#x8BB8;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x8BBF;&#x95EE;</p>
</li>
<li>
<p>&#x4E34;&#x754C;&#x533A; Critical Region&#xFF1A;&#x8BBF;&#x95EE;&#x4E34;&#x754C;&#x8D44;&#x6E90;&#x7684;&#x4EE3;&#x7801;&#x6BB5;</p>
</li>
</ul>
<h3 id="31-&#x4E92;&#x65A5;&#x8BBF;&#x95EE;&#x8D44;&#x6E90;-mutual-exclusion"><a class="anchor" href="#31-&#x4E92;&#x65A5;&#x8BBF;&#x95EE;&#x8D44;&#x6E90;-mutual-exclusion">#</a> 3.1 &#x4E92;&#x65A5;&#x8BBF;&#x95EE;&#x8D44;&#x6E90; Mutual Exclusion</h3>
<p>&#x9020;&#x6210;&#x4E92;&#x65A5;&#x6392;&#x65A5;&#x7684;&#x56DB;&#x4E2A;&#x6761;&#x4EF6;&#xFF1A;</p>
<ol>
<li>&#x6CA1;&#x6709;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x540C;&#x65F6;&#x5B58;&#x5728;&#x5728;&#x4E34;&#x754C;&#x533A;&#xFF08;&#x4E92;&#x65A5;&#xFF09;</li>
<li>&#x6CA1;&#x6709;&#x5BF9; CPU &#x7684;&#x901F;&#x5EA6;&#x548C;&#x6570;&#x91CF;&#x8FDB;&#x884C;&#x5047;&#x8BBE;</li>
<li>&#x6CA1;&#x6709;&#x5728;&#x4E34;&#x754C;&#x533A;&#x5916;&#x8FD0;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x9501;&#x4F4F;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF08;&#x975E;&#x62A2;&#x5360;&#x5F0F;&#xFF09;</li>
<li>&#x6CA1;&#x6709;&#x8FDB;&#x7A0B;&#x5FC5;&#x987B;&#x6C38;&#x8FDC;&#x7684;&#x7B49;&#x5F85;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;</li>
</ol>
<p><strong>&#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8D44;&#x6E90;&#x4E92;&#x65A5;&#x6392;&#x65A5;&#x8BBF;&#x95EE;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x80FD;&#x591F;&#x8BA9;&#x591A;&#x4E2A;&#x8FDB;&#x7A0B;&#x540C;&#x65F6;&#x5728;&#x4E34;&#x754C;&#x533A;&#x8FD0;&#x884C;</strong></p>
<ol>
<li><strong>&#x7981;&#x7528;&#x4E2D;&#x65AD;</strong>
<ul>
<li>&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;&#x540E;&#xFF0C;&#x7981;&#x7528;&#x6240;&#x6709;&#x7684;&#x4E2D;&#x65AD;&#x76F4;&#x5230;&#x8FDB;&#x7A0B;&#x79BB;&#x5F00;&#x4E34;&#x754C;&#x533A;</li>
<li>&#x65F6;&#x949F;&#x4E2D;&#x65AD;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#x65F6;&#xFF0C;&#x8FDB;&#x7A0B;&#x5207;&#x6362;&#x4E0D;&#x4F1A;&#x53D1;&#x751F;&#xFF0C;&#x8FD9;&#x6837;&#x5728;&#x8FDB;&#x7A0B;&#x5B8C;&#x6210;&#x4E34;&#x754C;&#x533A;&#x8BBF;&#x95EE;&#x524D;&#x90FD;&#x4E0D;&#x4F1A;&#x88AB;&#x6253;&#x65AD;&#x3002;</li>
<li>&#x7981;&#x7528;&#x4E2D;&#x65AD;&#x540E;&#xFF0C;&#x6240;&#x6709;&#x7684;&#x7A0B;&#x5E8F;&#x90FD;&#x4F1A;&#x6309;&#x7167;&#x987A;&#x5E8F;&#x8FD0;&#x884C;&#xFF0C;&#x8FD9;&#x6837;&#x4E34;&#x754C;&#x533A;&#x7684; data &#x5C31;&#x80FD;&#x88AB;&#x6B63;&#x786E;&#x7684;&#x4FEE;&#x6539;&#x8BBF;&#x95EE;&#x3002;</li>
<li>&#x53EA;&#x4F1A;&#x5728; OS &#x7CFB;&#x7EDF;&#x5185;&#x4F7F;&#x7528;</li>
</ul>
</li>
<li><strong>&#x9501;&#x53D8;&#x91CF;&#x1F512;</strong>
<ul>
<li>&#x5E38;&#x89C1;&#x7684;&#x6709;&#x4E92;&#x65A5;&#x9501; Mutux Lock</li>
</ul>
</li>
<li><strong>Strict Alternation &#x4E25;&#x683C;&#x53D8;&#x66F4;</strong></li>
<li><strong>Peterson&apos;s</strong><br>
 &#x4F7F;&#x7528; turn &#x548C; interested [i]&#xFF0C;&#x5F53;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x6253;&#x7B97;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;&#x65F6;&#xFF0C;&#x4F1A;&#x68C0;&#x67E5;&#x5F53;&#x524D; turn &#x662F;&#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x8FDB;&#x7A0B;&#x548C;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x7684;&#x662F;&#x5426;&#x5BF9;&#x4E34;&#x754C;&#x533A;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x5982;&#x679C; turn &#x4E0D;&#x662F;&#x81EA;&#x5DF1;&#x7684;&#x6216;&#x8005;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x4E0D;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x624D;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#xFF1B;&#x5982;&#x679C; turn &#x662F;&#x81EA;&#x5DF1;&#x7684;&#x5E76;&#x4E14;&#x53E6;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x611F;&#x5174;&#x8DA3;&#xFF0C;&#x4F1A;&#x5361;&#x5728;&#x5FAA;&#x73AF;&#x4E2D;&#x3002;</li>
</ol>
<p>turn &#x7684;&#x4F5C;&#x7528;&#xFF1A;&#x9632;&#x6B62;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x540C;&#x65F6;&#x628A; interested &#x8BBE;&#x7F6E;&#x4E3A; true&#xFF0C;&#x5BFC;&#x81F4;&#x4E24;&#x4E2A;&#x8FDB;&#x7A0B;&#x5361;&#x5728; while &#x5FAA;&#x73AF;</p>
<ol start="5">
<li>&#x786C;&#x4EF6;&#x65B9;&#x6CD5; TSL</li>
</ol>
<h4 id="311-mutual-exclusion-with-busy-waiting"><a class="anchor" href="#311-mutual-exclusion-with-busy-waiting">#</a> 3.1.1 Mutual Exclusion with Busy Waiting</h4>
<p>&#x65B9;&#x6CD5;&#x56DB;&#x3001;&#x65B9;&#x6CD5;&#x4E94;&#x9700;&#x8981;&#x8FDB;&#x7A0B;&#x8FDB;&#x884C;&#x5FD9;&#x7B49;&#x5F85;&#xFF0C;&#x5C31;&#x662F;&#x5361; while &#x5FAA;&#x73AF;&#xFF0C;&#x8FDB;&#x7A0B;&#x6CA1;&#x6709;&#x8FDB;&#x5165; block &#x72B6;&#x6001;&#x3002;</p>
<p>&#x8FD9;&#x4F1A;&#x5BFC;&#x81F4;&#x4E00;&#x4E2A;&#x95EE;&#x9898;&#xFF1A;&#x4F18;&#x5148;&#x7EA7;&#x53CD;&#x8F6C;&#x95EE;&#x9898;&#xFF1A;&#x4F18;&#x5148;&#x7EA7;&#x4F4E;&#x7684;&#x8FDB;&#x7A0B;&#x5728; blocking &#x4F18;&#x5148;&#x7EA7;&#x9AD8;&#x7684;&#x8FDB;&#x7A0B;&#x3002;</p>
<p>&#x89E3;&#x51B3;&#xFF1A;<strong>sleep and wakeup</strong><br>
 &#x8BA9;&#x8FDB;&#x7A0B;&#x8FDB;&#x5165; block &#x72B6;&#x6001;&#xFF0C;&#x800C;&#x4E0D;&#x662F; busy waiting&#xFF1B;&#x5F53;&#x80FD;&#x591F;&#x8FDB;&#x5165;&#x4E34;&#x754C;&#x533A;&#x540E;&#x518D;&#x5524;&#x9192; wakeup</p>
<h3 id="32-&#x91CD;&#x70B9;&#x6D88;&#x8D39;&#x8005;&#x751F;&#x4EA7;&#x8005;&#x95EE;&#x9898;"><a class="anchor" href="#32-&#x91CD;&#x70B9;&#x6D88;&#x8D39;&#x8005;&#x751F;&#x4EA7;&#x8005;&#x95EE;&#x9898;">#</a> 3.2 &#x91CD;&#x70B9;&#xFF1A;&#x6D88;&#x8D39;&#x8005;&#x751F;&#x4EA7;&#x8005;&#x95EE;&#x9898;</h3>
<h4 id="321-&#x4FE1;&#x53F7;&#x91CF;&#x5FC5;&#x8003;&#x4E2D;&#x7684;&#x5FC5;&#x8003;-semaphores"><a class="anchor" href="#321-&#x4FE1;&#x53F7;&#x91CF;&#x5FC5;&#x8003;&#x4E2D;&#x7684;&#x5FC5;&#x8003;-semaphores">#</a> 3.2.1 &#x4FE1;&#x53F7;&#x91CF;&#x5FC5;&#x8003;&#x4E2D;&#x7684;&#x5FC5;&#x8003; Semaphores</h4>
<p>Semaphores = 0&#xFF1A;no wakeups were saved; some value: one or more wakeups were pending</p>
<p>&#x7531;&#x4E24;&#x90E8;&#x5206;&#x7EC4;&#x6210;&#xFF1A;</p>
<ul>
<li>an integer counter&#xFF0C;COUNT</li>
<li>a queue of pids of blocked processes&#xFF0C;Q</li>
</ul>
<p>&#x5BF9;&#x4FE1;&#x53F7;&#x91CF;&#x7684;&#x64CD;&#x4F5C;&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF1A;</p>
<ul>
<li>P () or wait () or down () &#xFF1A;&#x7533;&#x8BF7;&#x8D44;&#x6E90;&#xFF0C;&#x51CF;&#x5C11;&#x4FE1;&#x53F7;&#x91CF;</li>
<li>V () or signal () or up () : &#x91CA;&#x653E;&#x8D44;&#x6E90;&#xFF0C;&#x589E;&#x52A0;&#x4FE1;&#x53F7;&#x91CF;</li>
</ul>
<p>&#x4FE1;&#x53F7;&#x91CF;&#x4E3A;&#x6B63;&#x65F6;&#x8868;&#x793A;&#x5F53;&#x524D;&#x8D44;&#x6E90;&#x53EF;&#x4EE5;&#x88AB;&#x591A;&#x5C11;&#x8FDB;&#x7A0B;&#x8BBF;&#x95EE;&#xFF1B;&#x4FE1;&#x53F7;&#x91CF;&#x4E3A;&#x8D1F;&#x65F6;&#x8868;&#x5F53;&#x524D;&#x6709;&#x591A;&#x5C11;&#x8FDB;&#x7A0B;&#x5728;&#x7B49;&#x5F85;&#x3002;</p>
<h4 id="322-mutex-&#x4E92;&#x65A5;&#x4FE1;&#x53F7;&#x91CF;"><a class="anchor" href="#322-mutex-&#x4E92;&#x65A5;&#x4FE1;&#x53F7;&#x91CF;">#</a> 3.2.2 Mutex &#x4E92;&#x65A5;&#x4FE1;&#x53F7;&#x91CF;</h4>
<p>&#x4E3A;&#x4EC0;&#x4E48;&#x4E0D;&#x4F7F;&#x7528; Mutex&#xFF1F;</p>
<p>&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x4E3A; 1&#xFF0C;&#x4EFB;&#x4F55;&#x65F6;&#x523B;&#xFF0C;apple&#x3001;orange &#x548C; plate &#x4E09;&#x4E2A;&#x540C;&#x6B65;&#x4FE1;&#x53F7;&#x91CF;&#x4E2D;&#x6700;&#x591A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x662F; 1 &#x3002;&#x56E0;&#x6B64;&#xFF0C;&#x5728;&#x4EFB;&#x4F55;&#x65F6;&#x523B;&#xFF0C;&#x6700;&#x591A;&#x53EA;&#x6709;&#x4E00;&#x4E2A;&#x96C6;&#x6210;&#x7684; P &#x64CD;&#x4F5C;&#x4E0D;&#x4F1A;&#x88AB;&#x963B;&#x585E;&#x3002;</p>
<p>&#x5BF9;&#x4E8E;&#x7F13;&#x51B2;&#x533A;&#x5927;&#x5C0F;&#x5927;&#x4E8E; 1&#xFF08;&#x4FE1;&#x53F7;&#x91CF;&#x5141;&#x8BB8;&#x7684;&#x503C;&#x5927;&#x4E8E; 1&#xFF09;&#x7684;&#x4EE3;&#x7801;&#xFF1A;<br>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">P(plate);</span><br><span class="line">P(mutex);</span><br><span class="line">&#x5BF9;plate&#x4E34;&#x754C;&#x533A;&#x4E2D;&#x7684;&#x4E8B;&#x7269;&#x8FDB;&#x884C;&#x64CD;&#x4F5C;&#xFF1B;</span><br><span class="line">V(mutex);</span><br><span class="line">V(plate);</span><br></pre></td></tr></table></figure></p>
<p>Semaphores &#x5927;&#x4E8E; 1 &#x65F6;&#xFF0C;&#x5C31;&#x5FC5;&#x987B;&#x8BBE;&#x5B9A;&#x4E00;&#x4E2A; mutex &#x6765;&#x4FDD;&#x8BC1;&#x4E92;&#x65A5;&#x8BBF;&#x95EE;&#x7F13;&#x51B2;&#x533A;&#x3002;</p>
<p><strong>PV &#x64CD;&#x4F5C;&#x9898;&#x7684;&#x89E3;&#x9898;&#x601D;&#x8DEF;&#xFF1A;</strong></p>
<ol>
<li>&#x5173;&#x7CFB;&#x5206;&#x6790;&#xFF1A;&#x627E;&#x51FA;&#x9898;&#x76EE;&#x4E2D;&#x63CF;&#x8FF0;&#x7684;&#x5404;&#x4E2A;&#x8FDB;&#x7A0B;&#xFF1B;&#x5206;&#x6790;&#x4ED6;&#x4EEC;&#x4E4B;&#x95F4;&#x7684;&#x540C;&#x6B65;&#x3001;&#x4E92;&#x65A5;&#x5173;&#x7CFB;&#x3002;&#x627E;&#x5230;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;&#x5C31;&#x662F;&#x4E34;&#x754C;&#x533A;&#x3002;&#x4E0D;&#x80FD;&#x540C;&#x65F6;&#x53D1;&#x751F;&#x7684;&#x4E8B;&#x60C5;&#x53EF;&#x80FD;&#x6709;&#x591A;&#x4E2A;&#x3002;</li>
<li>&#x8BBE;&#x7F6E;&#x4FE1;&#x53F7;&#x91CF;&#xFF1A;&#x4E92;&#x65A5;&#x4FE1;&#x53F7;&#x91CF;&#x521D;&#x59CB;&#x503C;&#x4E3A; 1&#xFF0C;&#x540C;&#x6B65;&#x4FE1;&#x53F7;&#x91CF;&#x521D;&#x503C;&#x8981;&#x770B;&#x5BF9;&#x5E94;&#x8D44;&#x6E90;&#x7684;&#x521D;&#x59CB;&#x503C;&#x662F;&#x591A;&#x5C11;&#x3002;</li>
</ol>
<p><strong>issue</strong></p>
<ul>
<li>P&#xFF08;S&#xFF09;&#x8868;&#x793A;&#x7533;&#x8BF7;&#x8D44;&#x6E90;&#xFF1B;V&#xFF08;S&#xFF09;&#x8868;&#x793A;&#x91CA;&#x653E;&#x4E00;&#x4E2A;&#x5B57;&#x773C;</li>
<li>P&#x3001;V &#x64CD;&#x4F5C;&#x5FC5;&#x987B;&#x6210;&#x5BF9;&#x51FA;&#x73B0;&#xFF0C;&#x7533;&#x8BF7;&#x610F;&#x5473;&#x7740;&#x672A;&#x6765;&#x4E00;&#x5B9A;&#x4F1A;&#x91CA;&#x653E;&#x3002;&#x5F53;&#x4E3A;&#x4E92;&#x65A5;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x51FA;&#x73B0;&#x5728;&#x540C;&#x8FDB;&#x7A0B;&#xFF1B;&#x5F53;&#x4E3A;&#x540C;&#x6B65;&#x64CD;&#x4F5C;&#x65F6;&#xFF0C;&#x4E0D;&#x5728;&#x540C;&#x8FDB;&#x7A0B;&#x51FA;&#x73B0;&#xFF1B;</li>
<li>&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x540C;&#x6B65; P &#x548C;&#x4E92;&#x65A5; P &#x64CD;&#x4F5C;&#x5728;&#x4E00;&#x8D77;&#x65F6;&#xFF0C;&#x540C;&#x6B65; P &#x5728;&#x4E92;&#x65A5; P &#x524D;&#x9762;</li>
</ul>
<h3 id="4-monitors"><a class="anchor" href="#4-monitors">#</a> 4 Monitors</h3>
<p>&#x7A0B;&#x5E8F;&#x3001;&#x53D8;&#x91CF;&#x548C;&#x6570;&#x636E;&#x7ED3;&#x6784;&#x5728;&#x4E00;&#x4E2A; package &#x7684;&#x96C6;&#x5408;&#xFF0C;&#x53EF;&#x4EE5;&#x7406;&#x89E3;&#x4E3A;&#x4E00;&#x4E2A;&#x53EA;&#x80FD;&#x88AB;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x8BBF;&#x95EE;&#x7684;&#x4EE3;&#x7801;&#x5757;&#x3002;</p>
<p>&#x8BBF;&#x95EE; Monitor &#x7684;&#x89C4;&#x5219;:</p>
<ul>
<li>&#x8FDB;&#x7A0B;&#x548C;&#x7EBF;&#x7A0B;&#x8C03;&#x7528;&#x7A0B;&#x5E8F;&#x8BBF;&#x95EE; Monitor</li>
<li>&#x4E92;&#x65A5;&#x8BBF;&#x95EE; Monitor</li>
<li>&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x8BBF;&#x95EE; Monitor &#x7684;&#x53D8;&#x91CF;</li>
<li>Monitor &#x53EF;&#x4EE5;&#x53EA;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x5B83;&#x7684;&#x5C40;&#x90E8;&#x53D8;&#x91CF;</li>
</ul>
<p>monitor &#x5982;&#x4F55;&#x5B9E;&#x73B0;&#x8FDB;&#x7A0B;&#x540C;&#x6B65;&#x8BBF;&#x95EE;&#xFF1A;</p>
<ul>
<li>&#x4F7F;&#x7528; condition &#x53D8;&#x91CF;&#x3002;</li>
<li>&#x4F7F;&#x7528; wait&#xFF08;x&#xFF09;&#x6765;&#x7B49;&#x5F85;&#x6709;&#x4EBA;&#x4F7F;&#x7528;&#x4E86; condition &#x53D8;&#x91CF;&#xFF0C;&#x4F1A;&#x662F; condition+1&#xFF0C;&#x4F7F;&#x7528; signal&#xFF08;x&#xFF09;&#x6765;&#x4F7F;&#x7528; condition &#x53D8;&#x91CF;&#xFF0C;&#x4F1A;&#x4F7F; condition-1</li>
</ul>
<p>&#x4F7F;&#x7528; monitor &#x89E3;&#x51B3;&#x751F;&#x4EA7;&#x8005;&#x6D88;&#x8D39;&#x8005;&#x95EE;&#x9898;&#xFF1A;</p>
<ul>
<li>&#x9700;&#x8981;&#x4F7F;&#x7528; count&#xFF0C;&#x4E00;&#x822C;&#x8868;&#x793A;&#x7F13;&#x51B2;&#x533A;&#x7684;&#x6570;&#x76EE;&#x3002;</li>
<li><strong>&#x5F53; count=1 &#x65F6;&#xFF0C;&#x5C31;&#x8981; signal&#xFF08;empty&#xFF09;&#xFF0C;&#x53D1;&#x51FA;&#x7A7A;&#x4FE1;&#x53F7;&#xFF0C;&#x8BF4;&#x660E;&#x5DF2;&#x7ECF;&#x4E0D;&#x7A7A;&#x4E86;&#xFF0C;&#x8BA9; wait empty &#x7684;&#x8FDB;&#x7A0B;&#x5F97;&#x4EE5;&#x8BBF;&#x95EE; count &#x4E86;&#xFF1B;&#x5F53; count=N-1 &#x65F6;&#xFF0C;&#x5C31;&#x8981; signal&#xFF08;full&#xFF09;&#xFF0C;&#x53D1;&#x51FA;&#x6EE1;&#x4FE1;&#x53F7;&#xFF0C;&#x8BF4;&#x660E;&#x73B0;&#x5728; count &#x5DF2;&#x7ECF;&#x4E0D;&#x6EE1;&#x4E86;&#x3002;</strong></li>
</ul>
<h3 id="5-message-passing"><a class="anchor" href="#5-message-passing">#</a> 5 Message passing</h3>
<p>&#x8FDB;&#x7A0B;&#x901A;&#x4FE1;&#x7684;&#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>&#x5171;&#x4EAB; memory</li>
<li>&#x5171;&#x4EAB; file mode</li>
<li>Message passing&#xFF1A;
<ul>
<li>send and Receive</li>
<li>send&#xFF08;addr&#xFF0C;msg&#xFF09;&#xFF1B;</li>
<li>recv&#xFF08;addr&#xFF0C;msg&#xFF09;&#xFF1B;</li>
</ul>
</li>
</ul>
<h3 id="6-barrier"><a class="anchor" href="#6-barrier">#</a> 6 Barrier</h3>
<p>Barrier &#x7684;&#x4F7F;&#x7528;&#xFF1A;</p>
<ul>
<li>&#x8FDB;&#x7A0B;&#x4EEC;&#x9760;&#x8FD1; Barrier</li>
<li>&#x6240;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x5230;&#x8FBE;&#x662F;&#x624D;&#x5141;&#x8BB8;&#x6240;&#x6709;&#x7684;&#x8FDB;&#x7A0B;&#x901A;&#x8FC7; Barrier</li>
</ul>
<h3 id="7-&#x5176;&#x4ED6;&#x7684;ipc&#x95EE;&#x9898;"><a class="anchor" href="#7-&#x5176;&#x4ED6;&#x7684;ipc&#x95EE;&#x9898;">#</a> 7 &#x5176;&#x4ED6;&#x7684; IPC &#x95EE;&#x9898;</h3>
<h4 id="71-dining-philosophers&#x95EE;&#x9898;"><a class="anchor" href="#71-dining-philosophers&#x95EE;&#x9898;">#</a> 7.1 Dining Philosophers &#x95EE;&#x9898;</h4>
<h4 id="72-reader-and-writer-&#x95EE;&#x9898;"><a class="anchor" href="#72-reader-and-writer-&#x95EE;&#x9898;">#</a> 7.2 Reader And Writer &#x95EE;&#x9898;</h4>
<h3 id="8-&#x8C03;&#x5EA6;&#x95EE;&#x9898;-scheduling"><a class="anchor" href="#8-&#x8C03;&#x5EA6;&#x95EE;&#x9898;-scheduling">#</a> 8 &#x8C03;&#x5EA6;&#x95EE;&#x9898; scheduling</h3>
<h4 id="81&#x4F55;&#x65F6;&#x8C03;&#x5EA6;"><a class="anchor" href="#81&#x4F55;&#x65F6;&#x8C03;&#x5EA6;">#</a> 8.1 &#x4F55;&#x65F6;&#x8C03;&#x5EA6;</h4>
<ul>
<li>&#x65B0;&#x8FDB;&#x7A0B;&#x88AB;&#x521B;&#x5EFA;</li>
<li>&#x5B58;&#x5728;&#x8FD0;&#x884C;&#x8FDB;&#x7A0B;</li>
<li>&#x8FD0;&#x884C;&#x8FDB;&#x7A0B;&#x88AB; block</li>
<li>io &#x4E2D;&#x65AD;</li>
<li>&#x65F6;&#x949F;&#x4E2D;&#x65AD;</li>
</ul>
<p>&#x62A2;&#x5360;&#x5F0F;&#x548C;&#x975E;&#x62A2;&#x5360;&#x5F0F;&#x8C03;&#x5EA6;</p>
<p>&#x597D;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x7684;&#x5224;&#x65AD;&#x6807;&#x51C6;&#xFF1A;</p>
<ul>
<li>Fair</li>
<li>Priority</li>
<li>Efficiency</li>
<li>Encourage good behavior</li>
<li>Support heavy loads</li>
<li>Adapt to different environments</li>
</ul>
<p>&#x4E0D;&#x540C;&#x7684;&#x7CFB;&#x7EDF;&#x7684;&#x4FA7;&#x91CD;&#x70B9;&#x4E0D;&#x540C;&#xFF1A;</p>
<ul>
<li>All Systems
<ul>
<li>Fairness</li>
<li>Efficiency</li>
<li>Policy Enforcement</li>
</ul>
</li>
<li>Batch
<ul>
<li>Throughput</li>
<li>Turnaround Time</li>
<li>Waiting Time</li>
<li>Processor Utilization</li>
</ul>
</li>
<li>Interactive system
<ul>
<li>Response Time</li>
<li>Proportionality</li>
</ul>
</li>
<li>Real-Time system
<ul>
<li>meeting deadlines</li>
<li>predictability</li>
</ul>
</li>
</ul>
<h4 id="82-&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;"><a class="anchor" href="#82-&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;">#</a> 8.2 &#x8C03;&#x5EA6;&#x7B97;&#x6CD5;</h4>
<h5 id="821-first-come-first-served&#x7B97;&#x6CD5;-&#x5148;&#x8FDB;&#x5148;&#x51FA;"><a class="anchor" href="#821-first-come-first-served&#x7B97;&#x6CD5;-&#x5148;&#x8FDB;&#x5148;&#x51FA;">#</a> 8.2.1 First Come First Served &#x7B97;&#x6CD5; &#x5148;&#x8FDB;&#x5148;&#x51FA;</h5>
<ul>
<li>&#x975E;&#x62A2;&#x5360;&#x5F0F;</li>
<li>&#x5728; Batch System &#x4E2D;&#x4F7F;&#x7528;</li>
</ul>
<p>&#x7B80;&#x5355;&#x4E0D;&#x8FC7;&#x591A;&#x63CF;&#x8FF0;</p>
<p>&#x95EE;&#x9898;&#xFF1A;convoy &#x95EE;&#x9898;</p>
<h5 id="822-shortest-job-first-&#x6700;&#x77ED;&#x4F5C;&#x4E1A;&#x4F18;&#x5148;"><a class="anchor" href="#822-shortest-job-first-&#x6700;&#x77ED;&#x4F5C;&#x4E1A;&#x4F18;&#x5148;">#</a> 8.2.2 Shortest Job First &#x6700;&#x77ED;&#x4F5C;&#x4E1A;&#x4F18;&#x5148;</h5>
<ul>
<li>&#x6709;&#x62A2;&#x5360;&#x5F0F;&#x548C;&#x975E;&#x62A2;&#x5360;&#x5F0F;&#x7684;</li>
<li>&#x9700;&#x8981;&#x63D0;&#x524D;&#x77E5;&#x9053;&#x8FDB;&#x7A0B;&#x5DE5;&#x4F5C;&#x5B8C;&#x6210;&#x6240;&#x9700;&#x65F6;&#x95F4;&#xFF0C;&#x8FD9;&#x662F;&#x5F88;&#x56F0;&#x96BE;&#x7684;</li>
<li>&#x8981;&#x6C42;&#x8FDB;&#x7A0B;&#x540C;&#x65F6;&#x8FDB;&#x5165;&#x5C31;&#x7EEA;&#x6001;&#xFF0C;&#x8FD9;&#x4E5F;&#x662F;&#x975E;&#x5E38;&#x56F0;&#x96BE;&#x7684;</li>
</ul>
<p>&#x62A2;&#x5360;&#x5F0F; SJF</p>
<p>&#x6709;&#x8FDB;&#x7A0B;&#x5230;&#x8FBE;&#x65F6;&#xFF0C;&#x6BD4;&#x8F83;&#x5F53;&#x524D;&#x6267;&#x884C;&#x8FDB;&#x7A0B;&#x5269;&#x4F59;&#x8FD0;&#x884C;&#x65F6;&#x95F4;&#x548C;&#x5230;&#x8FBE;&#x8FDB;&#x7A0B;&#x7684;&#x8FD0;&#x884C;&#x65F6;&#x95F4;</p>
<h5 id="823-round-robin-&#x65F6;&#x95F4;&#x7247;&#x8F6E;&#x8F6C;&#x7B97;&#x6CD5;"><a class="anchor" href="#823-round-robin-&#x65F6;&#x95F4;&#x7247;&#x8F6E;&#x8F6C;&#x7B97;&#x6CD5;">#</a> 8.2.3 Round-robin &#x65F6;&#x95F4;&#x7247;&#x8F6E;&#x8F6C;&#x7B97;&#x6CD5;</h5>
<p>&#x65F6;&#x95F4;&#x7247;&#x7684;&#x5927;&#x5C0F;&#x7684;&#x9009;&#x62E9;&#x5F88;&#x91CD;&#x8981;&#xFF0C;&#x4E00;&#x822C;&#x662F; 10 to 100 ms</p>
<h5 id="824-&#x4F18;&#x5148;&#x7EA7;&#x8C03;&#x5EA6;"><a class="anchor" href="#824-&#x4F18;&#x5148;&#x7EA7;&#x8C03;&#x5EA6;">#</a> 8.2.4 &#x4F18;&#x5148;&#x7EA7;&#x8C03;&#x5EA6;</h5>
<p>&#x540C;&#x7EA7;&#x522B;&#x662F; FCFS&#xFF0C;&#x8FD9;&#x662F;&#x62A2;&#x5360;&#x5F0F;&#x7684;&#x3002;</p>
<h5 id="825-multi-queue-scheduling-&#x591A;&#x7EA7;&#x961F;&#x5217;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;"><a class="anchor" href="#825-multi-queue-scheduling-&#x591A;&#x7EA7;&#x961F;&#x5217;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;">#</a> 8.2.5 Multi-Queue Scheduling &#x591A;&#x7EA7;&#x961F;&#x5217;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;</h5>
<p>&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x53EA;&#x80FD;&#x6C38;&#x4E45;&#x6027;&#x8FDB;&#x51FA;&#x4E00;&#x4E2A;&#x961F;&#x5217;&#xFF0C;&#x6BCF;&#x4E2A;&#x961F;&#x5217;&#x6267;&#x884C;&#x4E0D;&#x540C;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x3002;</p>
<p>&#x591A;&#x7EA7;&#x961F;&#x5217;&#xFF1A;&#x8BE5;&#x7B97;&#x6CD5;&#x5C06;&#x7CFB;&#x7EDF;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#x4ECE;&#x4E00;&#x4E2A;&#x62C6;&#x5206;&#x4E3A;&#x82E5;&#x5E72;&#x4E2A;&#xFF0C;&#x5C06;&#x4E0D;&#x540C;&#x7C7B;&#x578B;&#x6216;&#x6027;&#x8D28;&#x7684;&#x8FDB;&#x7A0B;<strong>&#x56FA;&#x5B9A;&#x5206;&#x914D;</strong>&#x5728;&#x4E0D;&#x540C;&#x7684;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#x91C7;&#x7528;&#x4E0D;&#x540C;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#xFF0C;<strong>&#x4E00;&#x4E2A;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#x4E2D;&#x7684;&#x8FDB;&#x7A0B;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#x672C;&#x8EAB;&#x4E5F;&#x53EF;&#x4EE5;&#x8BBE;&#x7F6E;&#x4E0D;&#x540C;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x3002;</strong></p>
<p>&#x591A;&#x7EA7;&#x961F;&#x5217;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x7531;&#x4E8E;&#x8BBE;&#x7F6E;&#x591A;&#x4E2A;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#xFF0C;&#x56E0;&#x6B64;&#x5BF9;&#x6BCF;&#x4E2A;&#x5C31;&#x7EEA;&#x961F;&#x5217;&#x5C31;&#x53EF;&#x4EE5;&#x5B9E;&#x65BD;&#x4E0D;&#x540C;&#x7684;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#xFF0C;&#x56E0;&#x6B64;&#xFF0C;&#x7CFB;&#x7EDF;&#x9488;&#x5BF9;&#x4E0D;&#x540C;&#x7528;&#x6237;&#x8FDB;&#x7A0B;&#x7684;&#x9700;&#x6C42;&#xFF0C;&#x5F88;&#x5BB9;&#x6613;&#x63D0;&#x4F9B;&#x591A;&#x79CD;&#x8C03;&#x5EA6;&#x7B56;&#x7565;&#x3002;</p>
<p><strong>&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;&#x6267;&#x884C;&#x5B8C;&#x6210;&#x540E;&#x4F4E;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;&#x624D;&#x80FD;&#x5F00;&#x59CB;&#x6267;&#x884C;</strong></p>
<h5 id="826-multi-level-feedback-&#x591A;&#x7EA7;&#x53CD;&#x9988;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x6539;&#x8FDB;"><a class="anchor" href="#826-multi-level-feedback-&#x591A;&#x7EA7;&#x53CD;&#x9988;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#x6539;&#x8FDB;">#</a> 8.2.6 Multi-level Feedback &#x591A;&#x7EA7;&#x53CD;&#x9988;&#x8C03;&#x5EA6;&#x7B97;&#x6CD5;&#xFF08;&#x6539;&#x8FDB;&#xFF09;</h5>
<p>&#x57FA;&#x672C;&#x548C;&#x4E0A;&#x4E00;&#x4E2A;&#x7B97;&#x6CD5;&#x4E00;&#x6837;&#xFF0C;&#x4E0D;&#x540C;&#x7684;&#x5730;&#x65B9;&#x5728;&#x4E0E;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;&#x8FDB;&#x7A0B;&#x5F39;&#x51FA;&#x540E;&#x5982;&#x679C;&#x6CA1;&#x6709;&#x6267;&#x884C;&#x5B8C;&#x5C31;&#x5BF9;&#x63A8;&#x5165;&#x4E0B;&#x4E00;&#x4E2A;&#x4F18;&#x5148;&#x7EA7;&#x7684;&#x961F;&#x5217;</p>
<h5 id="827-guaranteed-scheduling"><a class="anchor" href="#827-guaranteed-scheduling">#</a> 8.2.7 Guaranteed Scheduling</h5>
<p>&#x4E3A;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x5206;&#x914D;&#x4E00;&#x4E2A;&#x516C;&#x5E73;&#x7684;&#x65F6;&#x95F4;&#x4EFD;&#x989D;&#x6216;&#x4F18;&#x5148;&#x7EA7;&#xFF0C;&#x8FD9;&#x4E2A;&#x4EFD;&#x989D;&#x6216;&#x4F18;&#x5148;&#x7EA7;&#x4F1A;&#x6839;&#x636E;&#x8FDB;&#x7A0B;&#x7684;&#x884C;&#x4E3A;&#x548C;&#x9700;&#x6C42;&#x52A8;&#x6001;&#x8C03;&#x6574;&#x3002;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x6CA1;&#x6709;&#x4F7F;&#x7528;&#x5B83;&#x7684;&#x5168;&#x90E8;&#x65F6;&#x95F4;&#x4EFD;&#x989D;&#xFF0C;&#x8FD9;&#x4E2A;&#x672A;&#x4F7F;&#x7528;&#x7684;&#x4EFD;&#x989D;&#x53EF;&#x80FD;&#x4F1A;&#x88AB;&#x5176;&#x4ED6;&#x9700;&#x8981;&#x66F4;&#x591A;&#x5904;&#x7406;&#x5668;&#x65F6;&#x95F4;&#x7684;&#x8FDB;&#x7A0B;&#x5229;&#x7528;&#x3002;&#x76F8;&#x53CD;&#xFF0C;&#x5982;&#x679C;&#x4E00;&#x4E2A;&#x8FDB;&#x7A0B;&#x8D85;&#x8FC7;&#x4E86;&#x5B83;&#x7684;&#x65F6;&#x95F4;&#x4EFD;&#x989D;&#xFF0C;&#x5B83;&#x7684;&#x4F18;&#x5148;&#x7EA7;&#x6216;&#x65F6;&#x95F4;&#x4EFD;&#x989D;&#x4F1A;&#x5728;&#x4E0B;&#x4E00;&#x4E2A;&#x8C03;&#x5EA6;&#x5468;&#x671F;&#x4E2D;&#x88AB;&#x964D;&#x4F4E;&#xFF0C;&#x4EE5;&#x7ED9;&#x5176;&#x4ED6;&#x8FDB;&#x7A0B;&#x66F4;&#x591A;&#x7684;&#x6267;&#x884C;&#x673A;&#x4F1A;&#x3002;</p>
<h5 id="828-lottery-scheduling"><a class="anchor" href="#828-lottery-scheduling">#</a> 8.2.8 Lottery Scheduling</h5>
<p>&#x5F88;&#x5E38;&#x7528;&#xFF01;</p>
<p>Probability-based &#xFF1A;</p>
<ul>
<li>&#x7CFB;&#x7EDF;&#x4E3A;&#x6BCF;&#x4E2A;&#x8FDB;&#x7A0B;&#x5206;&#x914D;&#x4E00;&#x5B9A;&#x6570;&#x91CF;&#x7684;&#x5F69;&#x7968;&#xFF0C;&#x800C;&#x8FDB;&#x7A0B;&#x83B7;&#x5F97; CPU &#x65F6;&#x95F4;&#x7684;&#x673A;&#x4F1A;&#x4E0E;&#x5B83;&#x6301;&#x6709;&#x7684;&#x5F69;&#x7968;&#x6570;&#x91CF;&#x6210;&#x6B63;&#x6BD4;&#x3002;&#x5F53;&#x7CFB;&#x7EDF;&#x9700;&#x8981;&#x9009;&#x62E9;&#x4E0B;&#x4E00;&#x4E2A;&#x8981;&#x6267;&#x884C;&#x7684;&#x8FDB;&#x7A0B;&#x65F6;&#xFF0C;&#x5B83;&#x4F1A;&#x8FDB;&#x884C;&#x4E00;&#x6B21; &#x201C;&#x62BD;&#x5956;&#x201D;&#xFF0C;&#x968F;&#x673A;&#x9009;&#x62E9;&#x4E00;&#x4E2A;&#x5F69;&#x7968;&#xFF0C;&#x62E5;&#x6709;&#x8BE5;&#x5F69;&#x7968;&#x7684;&#x8FDB;&#x7A0B;&#x83B7;&#x5F97;&#x6267;&#x884C;&#x673A;&#x4F1A;&#x3002;</li>
<li>&#x7ED9;&#x9AD8;&#x4F18;&#x5148;&#x7EA7;&#x6216;&#x8005;&#x77ED;&#x4EFB;&#x52A1;&#x7684;&#x8FDB;&#x7A0B;&#x66F4;&#x591A;&#x7684;&#x5F69;&#x7968;</li>
</ul>
<p>&#x4F18;&#x70B9;&#xFF1A;</p>
<h5 id="829-fair-share-scheduling"><a class="anchor" href="#829-fair-share-scheduling">#</a> 8.2.9 Fair-Share Scheduling</h5>
<p>&#x5206;&#x4E3A;&#x4E24;&#x79CD;&#xFF1A;&#x8FDB;&#x7A0B;&#x516C;&#x5E73;&#x8C03;&#x5EA6;&#xFF0C;&#x4E5F;&#x5C31;&#x662F;&#x4E4B;&#x524D;&#x8BA8;&#x8BBA;&#x7684;&#x65F6;&#x95F4;&#x7247;&#x8F6E;&#x8F6C;&#xFF1B;&#x7528;&#x6237;&#x516C;&#x5E73;&#x8C03;&#x5EA6;&#xFF0C;&#x7ED9;&#x6BCF;&#x4E2A;&#x7528;&#x6237;&#x7A0B;&#x5E8F;&#x540C;&#x7B49;&#x7684; CPU &#x8BBF;&#x95EE;&#x65F6;&#x95F4;&#x6743;&#x9650;&#x3002;</p>
<h4 id="83-scheduling-in-real-time-systems"><a class="anchor" href="#83-scheduling-in-real-time-systems">#</a> 8.3 Scheduling in Real-Time systems</h4>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/04/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F--%E8%BF%9B%E7%A8%8B%E9%80%9A%E4%BF%A1%E4%B8%8E%E8%B0%83%E5%BA%A6/" data-id="clypfitux000eiodi38yqfpe1" data-title="操作系统--进程通信与调度" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-C++练习错误知识点复习及知识回顾" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/04/C++%E7%BB%83%E4%B9%A0%E9%94%99%E8%AF%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%8D%E4%B9%A0%E5%8F%8A%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE/" class="article-date">
  <time class="dt-published" datetime="2024-06-04T02:48:31.000Z" itemprop="datePublished">2024-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/04/C++%E7%BB%83%E4%B9%A0%E9%94%99%E8%AF%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%8D%E4%B9%A0%E5%8F%8A%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE/">C++练习错误知识点复习及知识回顾</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <ol>
<li>&#x5728; C++ &#x7C7B;&#x548C;&#x5BF9;&#x8C61;&#x4E2D;&#xFF0C;&#x7F16;&#x8BD1;&#x5668;&#x53EA;&#x4F1A;&#x4E3A;&#x7C7B;&#x7684;<strong>&#x6570;&#x636E;&#x6210;&#x5458;</strong>&#x5206;&#x914D;&#x5185;&#x5B58;&#x3002;</li>
<li>C++ &#x4E2D;&#x4E0D;&#x52A0;&#x58F0;&#x660E;&#x7684;&#x6570;&#x636E;&#x6210;&#x5458;&#x548C;&#x65B9;&#x6CD5;&#x9ED8;&#x8BA4;&#x7684;&#x7EE7;&#x627F;&#x65B9;&#x5F0F;&#x662F; private&#x3002;</li>
<li>&#x7C7B;&#x7684;&#x6784;&#x9020;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x6709;&#x53C2;&#x6570;&#xFF0C;&#x6784;&#x6210;&#x6709;&#x53C2;&#x6784;&#x9020;&#xFF0C;&#x4F46;&#x662F;&#x6784;&#x9020;&#x51FD;&#x6570;&#x662F;&#x4E0D;&#x4F1A;&#x8FD4;&#x56DE;&#x8FD4;&#x56DE;&#x503C;&#x7684;&#x3002;</li>
<li>&#x6CE8;&#x610F;&#x7C7B;&#x6307;&#x9488;&#x7684;&#x521B;&#x5EFA;&#x4E0D;&#x4F1A;&#x521B;&#x5EFA;&#x7C7B;&#x5B9E;&#x4F8B;&#xFF0C;&#x4E0D;&#x4F1A;&#x5F00;&#x8F9F;&#x4EFB;&#x4F55;&#x7684;&#x5185;&#x5B58;&#x3002;</li>
<li>&#x5982;&#x4F55;&#x58F0;&#x660E; const &#x7C7B;&#x65B9;&#x6CD5;&#xFF1A; <code>void print() const</code></li>
<li>&#x53CB;&#x5143;&#x4E0D;&#x80FD;&#x4F20;&#x9012;&#xFF0C;A &#x662F; B &#x7684;&#x53CB;&#x5143;&#xFF0C;B &#x662F; C &#x7684;&#x53CB;&#x5143;&#xFF0C;A &#x4E5F;&#x4E0D;&#x662F; C &#x7684;&#x53CB;&#x5143;&#x3002;</li>
<li>&#x53CB;&#x5143;&#x4E0D;&#x5177;&#x6709;&#x4EA4;&#x6362;&#x6027;&#xFF0C;A &#x662F; B &#x7684;&#x53CB;&#x5143;&#xFF0C;B &#x4E0D;&#x662F; A &#x7684;&#x53CB;&#x5143;&#x3002;</li>
<li>&#x7C7B;&#x7684;&#x9759;&#x6001;&#x6210;&#x5458;&#xFF0C;&#x8981;&#x5728;&#x7C7B;&#x5916;&#x8FDB;&#x884C;&#x8D4B;&#x503C;&#xFF0C;&#x4E14;&#x4E3A;&#x6240;&#x6709;&#x7684;&#x5B9E;&#x4F8B;&#x5171;&#x4EAB;&#x3002;&#x8BBF;&#x95EE;&#x901A;&#x8FC7;&#x7C7B;&#x540D;&#x8FDB;&#x884C;&#x8BBF;&#x95EE;&#x3002;</li>
<li>&#x53CB;&#x5143;&#x51FD;&#x6570;&#x4E0D;&#x5C5E;&#x4E8E;&#x7C7B;&#x5B9E;&#x4F8B;&#x7684;&#x57DF;&#x3002;</li>
</ol>
<ul>
<li>&#x53CB;&#x5143;&#x51FD;&#x6570;&#x662F;&#x4E00;&#x79CD;&#x5B9A;&#x4E49;&#x5728;&#x7C7B;&#x5916;&#x90E8;&#x7684;&#x666E;&#x901A;&#x51FD;&#x6570;&#xFF0C;&#x4F46;&#x5B83;&#x9700;&#x8981;&#x5728;&#x7C7B;&#x4F53;&#x5185;&#x8FDB;&#x884C;&#x58F0;&#x660E;&#xFF0C;&#x8981;&#x4F7F;&#x7528; friend&#x3002;<strong>&#x53CB;&#x5143;&#x4E0D;&#x662F;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x51FD;&#x6570;</strong>&#xFF0C;&#x4F46;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x7C7B;&#x7684;&#x79C1;&#x6709;&#x6210;&#x5458;&#x3002;</li>
<li>&#x53CB;&#x5143;&#x7C7B;&#xFF0C;&#x4E00;&#x4E2A;&#x7C7B;&#x53EF;&#x4EE5;&#x5F53;&#x53E6;&#x4E00;&#x4E2A;&#x7C7B;&#x7684;&#x53CB;&#x5143;&#xFF0C;&#x8FD9;&#x4E2A;&#x7C7B;&#x7684;&#x6240;&#x6709;&#x6210;&#x5458;&#x51FD;&#x6570;&#x53EF;&#x4EE5;&#x8BBF;&#x95EE;&#x53E6;&#x4E00;&#x4E2A;&#x53CB;&#x5143;&#x7C7B;&#x7684;&#x79C1;&#x6709;&#x6210;&#x5458;&#x3002;</li>
</ul>
<ol start="10">
<li>&#x7C7B;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;&#x4E5F;&#x9075;&#x5B88; public&#x3001;private&#x3001;protect &#x89C4;&#x5219;&#x3002;</li>
</ol>
<p><strong>C++ &#x6587;&#x4EF6;&#x6D41;</strong></p>
<p>&#x6587;&#x4EF6;&#x6D41;&#x5C31;&#x662F;&#x5BF9;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x589E;&#x5220;&#x67E5;&#x6539;&#x7684;&#x64CD;&#x4F5C;&#xFF0C;&#x53EF;&#x5206;&#x4E3A; oftream&#x3001;ifstream&#x3001;fstream&#x3002;</p>
<ul>
<li>ofstream&#xFF1A;&#x8F93;&#x51FA;&#x6587;&#x4EF6;&#x6D41;&#xFF0C;&#x521B;&#x5EFA;&#x6587;&#x4EF6;&#x5E76;&#x5199;&#x5165;</li>
<li>ifstream&#xFF1A;&#x8F93;&#x5165;&#x6587;&#x4EF6;&#x6D41;&#xFF0C;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;</li>
<li>fstream&#xFF1A;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x7684;&#x529F;&#x80FD;&#x90FD;&#x6709;&#x3002;</li>
</ul>
<p>&#x5982;&#x4F55;&#x4F7F;&#x7528;&#x5462;&#xFF1F;</p>
<p>&#x9996;&#x5148;&#x8981;&#x5B9A;&#x4E49;&#x6587;&#x4EF6;&#x6D41;&#xFF0C;&#x4F7F;&#x7528;&#x7C7B;&#x540D;&#x5B9A;&#x4E49;&#x5373;&#x53EF;</p>
<p>&#x7136;&#x540E;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#xFF0C;&#x6253;&#x5F00;&#x7684;&#x65B9;&#x5F0F;&#x6709;&#x5F88;&#x591A;&#xFF1A;</p>
<ul>
<li>ios::in	&#x8BFB;&#x65B9;&#x5F0F;&#x6253;&#x5F00;&#x6587;&#x4EF6;</li>
<li>ios::out	&#x5199;&#x65B9;&#x5F0F;&#x6253;&#x5F00;&#x6587;&#x4EF6;</li>
<li>ios::trunc	&#x5982;&#x679C;&#x6B64;&#x6587;&#x4EF6;&#x5DF2;&#x7ECF;&#x5B58;&#x5728;&#xFF0C;&#x5C31;&#x4F1A;&#x6253;&#x5F00;&#x6587;&#x4EF6;&#x4E4B;&#x524D;&#x628A;&#x6587;&#x4EF6;&#x957F;&#x5EA6;&#x622A;&#x65AD;&#x4E3A; 0</li>
<li>ios::app	&#x5C3E;&#x90E8;&#x6700;&#x52A0;&#x65B9;&#x5F0F; (&#x5728;&#x5C3E;&#x90E8;&#x5199;&#x5165;)</li>
<li>ios::ate	&#x6587;&#x4EF6;&#x6253;&#x5F00;&#x540E;&#xFF0C;&#x5B9A;&#x4F4D;&#x5230;&#x6587;&#x4EF6;&#x5C3E;</li>
<li>ios::binary	&#x4E8C;&#x8FDB;&#x5236;&#x65B9;&#x5F0F; (&#x9ED8;&#x8BA4;&#x662F;&#x6587;&#x672C;&#x65B9;&#x5F0F;)</li>
</ul>
<p>&#x6253;&#x5F00;&#x5B8C;&#x6587;&#x4EF6;&#x540E;&#x4E00;&#x5B9A;&#x8981;&#x5224;&#x65AD;&#x6587;&#x4EF6;&#x662F;&#x5426;&#x6253;&#x5F00;&#x6210;&#x529F;</p>
<p>is_open () &#x51FD;&#x6570;</p>
<p>&#x5173;&#x95ED;&#x6587;&#x4EF6;</p>
<p>&#x5199;&#x5165;&#x6587;&#x4EF6;&#xFF0C;&#x6A21;&#x4EFF;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x6D41;&#xFF0C;&#x4F7F;&#x7528; &lt;&lt; &#x6765;&#x5199;&#xFF1B;</p>
<p>&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#xFF0C;&#x4F7F;&#x7528; &gt;&gt; &#x6765;&#x5199;&#xFF1B;<strong>&#x5343;&#x4E07;&#x6CE8;&#x610F;&#x8BFB;&#x53D6;&#x6587;&#x4EF6;&#x4E0D;&#x80FD;&#x5BF9;&#x6E90;&#x6587;&#x4EF6;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#xFF01;&#xFF01;&#xFF01;</strong></p>
<ol>
<li>
<p>&#x8FD0;&#x7B97;&#x7B26;&#x51FD;&#x6570;&#x662F;&#x4E00;&#x79CD;&#x7279;&#x6B8A;&#x7684;&#x6210;&#x5458;&#x51FD;&#x6570;&#x6216;&#x53CB;&#x5143;&#x51FD;&#x6570;&#x3002;</p>
</li>
<li>
<p>&#x7CFB;&#x7EDF;&#x9ED8;&#x8BA4;&#x63D0;&#x4F9B;&#x91CD;&#x8F7D;&#x7248;&#x672C;&#x7684;&#x8FD0;&#x7B97;&#x7B26;&#x662F; ** =   &amp;   , **</p>
</li>
<li>
<p>&#x6D41;&#x64CD;&#x4F5C;&#x7B26;&#xFF08;&#x6BD4;&#x5982; &gt;&gt; &#x548C; &lt;&lt;&#xFF09;&#x9700;&#x8981;&#x7528;&#x53CB;&#x5143;&#x51FD;&#x6570;&#x8FDB;&#x884C;&#x91CD;&#x8F7D;&#xFF0C;&#x56E0;&#x4E3A;&#x6D41;&#x64CD;&#x4F5C;&#x7B26;&#x7684;&#x5DE6;&#x503C;&#x4E0D;&#x662F;&#x6211;&#x4EEC;&#x53EF;&#x4EE5;&#x4FEE;&#x6539;&#x7684;&#x7C7B;&#xFF0C;&#x800C;&#x4E14;&#x6D41;&#x64CD;&#x4F5C;&#x7B26;&#x5177;&#x6709;&#x65B9;&#x5411;&#x6027;&#xFF0C;&#x6240;&#x4EE5;&#x53EA;&#x80FD;&#x5728;&#x7C7B;&#x5916;&#x8FDB;&#x884C;&#x91CD;&#x8F7D;&#x3002;</p>
</li>
<li>
<p>&#x4E00;&#x5143;&#x64CD;&#x4F5C;&#x7B26;&#x548C;&#x4E8C;&#x5143;&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x5DE6;&#x503C;&#x662F;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x91CD;&#x8F7D;&#x4E3A;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x51FD;&#x6570;&#xFF0C;&#x56E0;&#x4E3A;&#x5BF9;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x8FDB;&#x884C;&#x4E86;&#x4FEE;&#x6539;&#x3002;&#x5F53;&#x5BF9;&#x7C7B;&#x7684;&#x5BF9;&#x8C61;&#x4E0D;&#x8FDB;&#x884C;&#x4FEE;&#x6539;&#x65F6;&#xFF0C;&#x91CD;&#x8F7D;&#x4E3A;&#x53CB;&#x5143;&#x51FD;&#x6570;&#x3002;</p>
</li>
<li>
<p>&#x57FA;&#x7C7B;&#x6307;&#x9488;&#x6307;&#x5411;&#x5B50;&#x7C7B;&#x5BF9;&#x8C61;&#x65F6;&#xFF0C;&#x53EA;&#x80FD;&#x8C03;&#x7528;&#x57FA;&#x7C7B;&#x81EA;&#x5DF1;&#x5B9A;&#x4E49;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
<li>
<p>&#x5F53;&#x6D3E;&#x751F;&#x7C7B;&#x6307;&#x9488;&#x6307;&#x5411;&#x57FA;&#x7C7B;&#x65F6;&#xFF0C;&#x5FC5;&#x987B;&#x5C06;&#x6D3E;&#x751F;&#x7C7B;&#x6307;&#x9488;&#x5F3A;&#x8F6C;&#x4E3A;&#x57FA;&#x7C7B;&#x6307;&#x9488;&#x624D;&#x80FD;&#x8C03;&#x7528;&#x57FA;&#x7C7B;&#x7684;&#x6210;&#x5458;&#x51FD;&#x6570;&#x3002;<br>
 <code>(A)B *b = A &amp;a</code></p>
</li>
<li>
<p>&#x591A;&#x6001;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x8FDE;&#x7F16;&#x662F;&#x4F7F;&#x7528;&#x57FA;&#x7C7B;&#x6307;&#x9488;&#x8C03;&#x7528;&#x865A;&#x51FD;&#x6570;</p>
</li>
<li>
<p>&#x91CD;&#x8F7D;&#x865A;&#x51FD;&#x6570;&#x65F6;&#xFF0C;&#x51FD;&#x6570;&#x7684;&#x58F0;&#x660E;&#x8981;&#x76F8;&#x540C;</p>
</li>
<li>
<p>&#x62BD;&#x8C61;&#x7C7B;&#x4E0D;&#x80FD;&#x6709;&#x5B9E;&#x4F8B;&#xFF0C;&#x6240;&#x4EE5;&#x62BD;&#x8C61;&#x7C7B;&#x7684;&#x58F0;&#x660E;&#x9700;&#x8981;&#x4F7F;&#x7528;&#x6307;&#x9488;</p>
</li>
<li>
<p>typedef&#xFF1A;&#x7C7B;&#x578B;&#x522B;&#x540D;<br>
 <code>typedef Ctiger* TigerPtr</code> <br>
Ctiger* &#x7684;&#x522B;&#x540D; TigerPtr</p>
</li>
<li>
<p>&#x4E0D;&#x80FD;&#x76F4;&#x63A5;&#x4F7F;&#x7528; &lt;&lt;&#x8F93;&#x51FA;&#x5B57;&#x7B26;&#x4E32;&#x6307;&#x9488;&#xFF0C;&#x5F97;&#x628A; char* cast &#x6210; void*&#x3002;static_cast&lt; void*&gt;, &#x5C55;&#x793A;&#x7684;&#x662F;&#x6307;&#x9488;&#x6307;&#x5411;&#x7684;&#x5730;&#x5740;</p>
</li>
</ol>
<p><strong>&#x8F93;&#x51FA;&#x6D41;&#x3001;&#x8F93;&#x5165;&#x6D41;</strong> iostream</p>
<ul>
<li>streams</li>
<li>&#x6D41;&#x64CD;&#x4F5C;&#x7B26; &lt;&lt;&#x548C;&gt;&gt;</li>
</ul>
<p>formatted I/O&#xFF1A;&#x6807;&#x51C6;&#x5316;&#x7684; IO &#x8F93;&#x5165;&#x8F93;&#x51FA;</p>
<p>&#x4F7F;&#x7528; put &#x65B9;&#x6CD5;&#x8FDB;&#x884C;&#x5B57;&#x7B26;&#x8F93;&#x51FA;&#xFF1A;</p>
<ul>
<li>cout.put (&apos;A&apos;) &#x6216;&#x8005; cout.put (65) &#x4E5F;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; ASCLL &#x7F16;&#x7801;</li>
</ul>
<p>cin &#x7684; get &#x65B9;&#x6CD5;&#x548C; getline &#x65B9;&#x6CD5;&#xFF1A;</p>
<ul>
<li>character = cin.get ()  &#x53EF;&#x4EE5;&#x4F7F;&#x7528;&#x53D8;&#x91CF;&#x6765;&#x63A5;&#x6536; cin &#x7684;&#x8F93;&#x5165;&#xFF0C;&#x4F46;&#x662F;&#x5982;&#x679C;&#x662F; char &#x7C7B;&#x578B;&#x5219;&#x65E0;&#x6CD5;&#x63A5;&#x6536;&#x5230; EOF</li>
<li>cin.get(char a[ size],size)</li>
<li>cin.getline(char a[ size],size)</li>
<li>&#x6CE8;&#x610F;&#x5F53;&#x8D85;&#x8FC7; size &#x65F6;&#xFF0C;cin &#x4F1A;&#x8BA4;&#x4E3A;&#x53D1;&#x751F;&#x9519;&#x8BEF;&#xFF0C;&#x4F1A;&#x81EA;&#x52A8;&#x6E05;&#x7A7A;&#x7F13;&#x5B58;&#xFF0C;&#x5FFD;&#x7565;&#x4E4B;&#x540E;&#x7684;&#x8F93;&#x5165;</li>
</ul>
<p>eofbit &#x6587;&#x672B;&#x6807;&#x8BC6;&#x7B26;</p>
<p>failbit &#x9519;&#x8BEF;&#x6807;&#x8BC6;&#x7B26;</p>
<p>badbit &#x5F53;&#x53D1;&#x751F;&#x4E22;&#x5931;&#x6570;&#x636E;&#x7684;&#x9519;&#x8BEF;&#x53D1;&#x751F;&#x65F6;&#x88AB;&#x8BBE;&#x7F6E;</p>
<p>goodbit &#x5F53;&#x4E0A;&#x9762;&#x7684;&#x60C5;&#x51B5;&#x6CA1;&#x6709;&#x53D1;&#x751F;&#x65F6;&#x88AB;&#x8BBE;&#x7F6E;</p>
<p>&#x5F53;&#x8FDB;&#x884C;&#x5B8C;&#x4E00;&#x6B21;&#x8F93;&#x5165;&#x540E;&#xFF0C;&#x53EF;&#x4EE5;&#x7528; rdstate &#x65B9;&#x6CD5;&#x6765;&#x67E5;&#x770B; cin &#x7684;&#x8F93;&#x5165;&#x72B6;&#x6001;</p>
<p><strong>&#x91CD;&#x70B9;&#xFF1A;&#x6D41;&#x7684; Manipulators</strong></p>
<ul>
<li>&#x8BBE;&#x7F6E;&#x5BBD;&#x5EA6;&#x3001;&#x7CBE;&#x5EA6;&#x3001;&#x683C;&#x5F0F;&#x72B6;&#x6001;&#x3001;&#x586B;&#x5145;&#x5B57;&#x7B26;</li>
<li>&#x5237;&#x65B0;&#x6D41;</li>
<li>&#x63D2;&#x5165;&#x65B0;&#x884C;&#x5E76;&#x4E14;&#x5237;&#x65B0;&#x8F93;&#x51FA;&#x6D41;</li>
<li>&#x63D2;&#x5165;&#x7A7A;&#x5B57;&#x7B26;&#xFF0C;&#x8DF3;&#x8FC7;&#x7A7A;&#x683C;</li>
</ul>
<p>&#x4F7F;&#x7528; oct&#x3001;dec&#x3001;hex&#x3001;setbase&#xFF08;&#xFF09;&#x6765;&#x8BBE;&#x7F6E;&#x8F93;&#x51FA;&#x6570;&#x5B57;&#x7684;&#x5F62;&#x5F0F;</p>
<p>&#x4F7F;&#x7528; precision&#x3001;setprecision &#x6765;&#x8BBE;&#x7F6E;&#x8F93;&#x51FA;&#x6D6E;&#x70B9;&#x6570;&#x7684;&#x5C0F;&#x6570;&#x4F4D;</p>
<p>&#x4F7F;&#x7528; width &#x65B9;&#x6CD5;&#x3001;setw &#x6765;&#x8BBE;&#x7F6E;&#x8F93;&#x5165;&#x8F93;&#x51FA;&#x5BBD;&#x5EA6;</p>
<p>&#x4F7F;&#x7528; skipws &#x6765;&#x8DF3;&#x8FC7;&#x7A7A;&#x683C;&#x952E;&#xFF0C;&#x53EF;&#x4EE5;&#x4F7F;&#x7528; noskipws &#x6765;&#x91CD;&#x7F6E;</p>
<p>&#x4F7F;&#x7528; left&#x3001;right &#x6765;&#x8C03;&#x6574;&#x5728;&#x57DF;&#x4E2D;&#x5B57;&#x7B26;&#x51FA;&#x73B0;&#x7684;&#x4F4D;&#x7F6E;</p>
<p>&#x4F7F;&#x7528; internal &#x6765;&#x4F7F;&#x586B;&#x5145;&#x5B57;&#x7B26;&#x51FA;&#x73B0;&#x5728;&#x7B26;&#x53F7;&#x548C;&#x6570;&#x5B57;&#x4E2D;&#x95F4;</p>
<p>&#x4F7F;&#x7528; showbase &#x6765;&#x5C55;&#x793A;&#x6570;&#x5B57;&#x7684; base</p>
<p>&#x4F7F;&#x7528; showpos &#x6765;&#x663E;&#x793A;&#x6570;&#x5B57;&#x7684;&#x7B26;&#x53F7;</p>
<p>&#x4F7F;&#x7528; booleanValue &#x6765;&#x8868;&#x793A;&#x5E03;&#x5C14;&#x503C;&#x7684;&#x6570;&#x5B57;&#x5F62;&#x5F0F;&#xFF1B;&#x4F7F;&#x7528; booleanpha &#x6765;&#x8868;&#x793A;&#x5E03;&#x5C14;&#x503C;&#x7684;&#x82F1;&#x6587;&#x5F62;&#x6001;</p>
<p>&#x4FDD;&#x5B58;&#x539F;&#x6765;&#x7684;&#x683C;&#x5F0F;&#xFF1A; ios_base::fmtflags originalFormat = cout.flags ()</p>
<p>&#x6062;&#x590D;&#x539F;&#x6765;&#x7684;&#x683C;&#x5F0F;&#xFF1A;cout.flags (originalFormal)</p>
<p>&#x53EF;&#x4EE5;&#x5B9A;&#x4E49;&#x8F93;&#x51FA;&#x6D41;</p>
<p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ostream &amp; space(ostream&amp; cout){</span><br><span class="line">  cout&lt;&lt;&apos; &apos;;</span><br><span class="line">  return cout;</span><br><span class="line">}</span><br></pre></td></tr></table></figure></p>
<ol>
<li>&#x4E0D;&#x80FD;<strong>&#x88AB;&#x91CD;&#x8F7D;</strong>&#x7684;&#x64CD;&#x4F5C;&#x7B26;&#xFF1A; ?:  ::  .   .*</li>
<li>++ &#x8FD0;&#x7B97;&#x7B26;&#x91CD;&#x8F7D;&#xFF1A;</li>
</ol>
<ul>
<li><ins>A: member: A &amp; operator</ins> ();  global: A &amp; operator++(A &amp;); &#x8FD4;&#x56DE;&#x53EF;&#x4FEE;&#x6539;&#x7684;&#x5DE6;&#x503C;</li>
<li>A++: meMber: A operator++(int);  global: A operator++(A &amp;, int); &#x8FD4;&#x56DE;&#x4E0D;&#x53EF;&#x4FEE;&#x6539;&#x7684;&#x53F3;&#x503C;&#xFF0C; &#x6CE8;&#x610F;&#x8981;&#x6709;&#x865A;&#x53C2; int</li>
</ul>
<ol start="3">
<li>static &#x6210;&#x5458;&#x53D8;&#x91CF;&#x548C;&#x6210;&#x5458;&#x51FD;&#x6570;&#x6709;&#x4ED6;&#x81EA;&#x5DF1;&#x7684; class scope</li>
<li>&#x7236;&#x7C7B;&#x6307;&#x9488;&#x6307;&#x5411;&#x5B50;&#x7C7B;&#xFF0C;&#x53EA;&#x80FD;&#x8C03;&#x7528;&#x7236;&#x7C7B;&#x6307;&#x9488;&#x81EA;&#x5DF1;&#x521B;&#x5EFA;&#x7684;&#x65B9;&#x6CD5;&#x548C;&#x6210;&#x5458;</li>
</ol>
<table>
<thead>
<tr>
<th>Function  template</th>
<th>&#x51FD;&#x6570;&#x7684;&#x6A21;&#x677F;&#xFF0C;&#x9700;&#x8981;&#x5177;&#x4F53;&#x5316;</th>
</tr>
</thead>
<tbody>
<tr>
<td>Template function</td>
<td>&#x6A21;&#x677F;&#x51FD;&#x6570;&#xFF0C;&#x7531;&#x7F16;&#x8BD1;&#x5668;&#x6839;&#x636E;&#x6A21;&#x677F;&#x751F;&#x6210;&#x7684;&#x51FD;&#x6570;</td>
</tr>
<tr>
<td>Class Template</td>
<td>&#x7C7B;&#x6A21;&#x677F;&#xFF0C;&#x9700;&#x8981;&#x5177;&#x4F53;&#x5316;</td>
</tr>
<tr>
<td>Template Class</td>
<td>&#x6A21;&#x677F;&#x7C7B;&#xFF0C;&#x7531;&#x7F16;&#x8BD1;&#x5668;&#x6839;&#x636E;&#x6A21;&#x677F;&#x751F;&#x6210;&#x7684;&#x7C7B;</td>
</tr>
<tr>
<td>Const Point</td>
<td>&#x5E38;&#x91CF;&#x7684;&#x6307;&#x9488;&#xFF0C;&#x6307;&#x5411;&#x7684;&#x5730;&#x65B9;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;</td>
</tr>
<tr>
<td>Point Const</td>
<td>&#x6307;&#x9488;&#x7684;&#x5E38;&#x91CF;&#xFF0C;&#x6307;&#x9488;&#x4E0D;&#x80FD;&#x6307;&#x5411;&#x522B;&#x7684;&#x5730;&#x65B9;&#xFF0C;&#x5373;&#x6307;&#x9488;&#x7684;&#x503C;&#x4E0D;&#x80FD;&#x4FEE;&#x6539;</td>
</tr>
</tbody>
</table>
<ol start="5">
<li>&#x6A21;&#x677F;&#x4E0E;&#x7EE7;&#x627F;&#xFF1A;</li>
</ol>
<ul>
<li>&#x7C7B;&#x6A21;&#x677F;&#x53EF;&#x4EE5;&#x4ECE;&#x7C7B;&#x6A21;&#x677F;&#x4E13;&#x7528;&#x5316;&#x6D3E;&#x751F;</li>
<li>&#x7C7B;&#x6A21;&#x677F;&#x53EF;&#x4EE5;&#x4ECE;&#x975E;&#x6A21;&#x677F;&#x7C7B;&#x6D3E;&#x751F;</li>
<li>&#x7C7B;&#x6A21;&#x677F;&#x4E13;&#x7528;&#x5316;&#x53EF;&#x4EE5;&#x4ECE;&#x7C7B;&#x6A21;&#x677F;&#x4E13;&#x7528;&#x5316;&#x6D3E;&#x751F;</li>
<li>&#x975E;&#x6A21;&#x677F;&#x7C7B;&#x53EF;&#x4EE5;&#x4ECE;&#x7C7B;&#x6A21;&#x677F;&#x4E13;&#x7528;&#x5316;&#x6D3E;&#x751F;</li>
</ul>
<h2 id="&#x591A;&#x6001;"><a class="anchor" href="#&#x591A;&#x6001;">#</a> &#x591A;&#x6001;</h2>
<ul>
<li>
<p>&#x591A;&#x6001;&#x53D1;&#x751F;&#x5728;&#x8FD0;&#x884C;&#x65F6;&#xFF0C;&#x800C;&#x4E0D;&#x662F;&#x7F16;&#x8BD1;&#x65F6;</p>
</li>
<li>
<p>&#x591A;&#x6001;&#x901A;&#x8FC7;&#x865A;&#x51FD;&#x6570;&#x548C;&#x52A8;&#x6001; binding &#x5B9E;&#x73B0;</p>
</li>
<li>
<p>&#x57FA;&#x7C7B;&#x6307;&#x9488;&#x7528;&#x6765;&#x8C03;&#x7528;&#x865A;&#x51FD;&#x6570;&#x6765;&#x5B9E;&#x73B0;&#x52A8;&#x6001;&#x7ED1;&#x5B9A;</p>
</li>
<li>
<p>&#x7531;&#x4E8E;&#x865A;&#x51FD;&#x6570;&#x7684;&#x8C03;&#x7528;&#x662F;&#x901A;&#x8FC7;&#x7236;&#x7C7B;&#x6307;&#x9488;&#x6765;&#x5B9E;&#x73B0;&#x7684;&#xFF0C;&#x6240;&#x6709;&#x8981;&#x4F7F;&#x7528; -&gt; &#x6765;&#x8C03;&#x7528;&#x865A;&#x51FD;&#x6570;</p>
</li>
<li>
<p>base-class reference &#x4E5F;&#x53EF;&#x4EE5;&#x8C03;&#x7528;&#x865A;&#x51FD;&#x6570;</p>
</li>
<li>
<p>&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x62BD;&#x8C61;&#x7C7B;&#x7684;&#x5F15;&#x7528;&#xFF0C;&#x56E0;&#x4E3A;&#x62BD;&#x8C61;&#x7C7B;&#x53EF;&#x4EE5;&#x58F0;&#x660E;&#x4E3A;&#x6307;&#x9488;&#xFF1B;&#x4F46;&#x4E0D;&#x53EF;&#x4EE5;&#x521B;&#x5EFA;&#x62BD;&#x8C61;&#x7C7B;&#x7684;&#x5B9E;&#x4F8B;&#x3002;</p>
</li>
<li>
<p>&#x9759;&#x6001;&#x6210;&#x5458;&#x51FD;&#x6570;&#x53EA;&#x80FD;&#x8BBF;&#x95EE;&#x9759;&#x6001;&#x6210;&#x5458;&#x53D8;&#x91CF;&#xFF0C;&#x56E0;&#x4E3A;&#x9759;&#x6001;&#x6210;&#x5458;&#x51FD;&#x6570;&#x4E3A;&#x6240;&#x6709;&#x7C7B;&#x6240;&#x5171;&#x6709;&#xFF0C;&#x6240;&#x4EE5;&#x4E5F;&#x53EA;&#x80FD;&#x8C03;&#x7528;&#x6240;&#x6709;&#x7C7B;&#x6240;&#x5171;&#x6709;&#x7684;&#x6210;&#x5458;&#xFF0C;&#x5426;&#x5219;&#x5C31;&#x4F1A;&#x7834;&#x574F;&#x5C01;&#x88C5;&#x6027;&#x3002;</p>
</li>
<li>
<p>&#x628A;&#x4E00;&#x4E2A;&#x7C7B;&#x5F53;&#x505A;&#x4ED6;&#x7684; derived class object &#x6765;&#x4F7F;&#x7528;&#x4F1A;&#x62A5;&#x9519;&#xFF0C;&#x6BD4;&#x5982;&#x8C03;&#x7528;&#x6D3E;&#x751F;&#x7C7B;&#x7684;&#x65B9;&#x6CD5;&#x3002;</p>
</li>
<li>
<p>&#x6210;&#x5458;&#x51FD;&#x6570;&#x6A21;&#x7248;&#x4E0D;&#x80FD;&#x662F;&#x865A;&#x51FD;&#x6570;</p>
</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/04/C++%E7%BB%83%E4%B9%A0%E9%94%99%E8%AF%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E5%A4%8D%E4%B9%A0%E5%8F%8A%E7%9F%A5%E8%AF%86%E5%9B%9E%E9%A1%BE/" data-id="clypfitur0001iodiaa8t8gs7" data-title="C++练习错误知识点复习及知识回顾" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/C/" rel="tag">C++</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-编译原理--中间代码生成之控制流" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2024/06/04/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86--%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E4%B9%8B%E6%8E%A7%E5%88%B6%E6%B5%81/" class="article-date">
  <time class="dt-published" datetime="2024-06-04T02:48:31.000Z" itemprop="datePublished">2024-06-04</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2024/06/04/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86--%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E4%B9%8B%E6%8E%A7%E5%88%B6%E6%B5%81/">编译原理--中间代码生成之控制流</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="1-&#x63A7;&#x5236;&#x6D41;"><a class="anchor" href="#1-&#x63A7;&#x5236;&#x6D41;">#</a> 1 &#x63A7;&#x5236;&#x6D41;</h2>
<p>&#x63A7;&#x5236;&#x6D41;&#x662F; if-else&#x3001;while&#x3001;for &#x8FD9;&#x7C7B;&#x8BED;&#x53E5;&#xFF0C;&#x8FD9;&#x7C7B;&#x8BED;&#x53E5;&#x7684;&#x7FFB;&#x8BD1;&#x548C;&#x5BF9;&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7FFB;&#x8BD1;&#x662F;&#x7ED3;&#x5408;&#x5728;&#x4E00;&#x8D77;&#x7684;&#x3002;</p>
<h3 id="11-&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;"><a class="anchor" href="#11-&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;">#</a> 1.1 &#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;</h3>
<p>&#x9996;&#x5148;&#x6765;&#x4ECB;&#x7ECD;&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x7FFB;&#x8BD1;&#x8FC7;&#x7A0B;&#x3002;</p>
<p>&#x5E03;&#x5C14;&#x8868;&#x8FBE;&#x5F0F;&#x7531;&#x5E03;&#x5C14;&#x53D8;&#x91CF;&#x548C;&#x5173;&#x7CFB;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x5E03;&#x5C14;&#x8FD0;&#x7B97;&#x7B26;&#x6784;&#x6210;&#xFF0C;&#x5173;&#x7CFB;&#x8868;&#x8FBE;&#x5F0F;&#x7684;&#x5F62;&#x5F0F;&#x4E3A; E1 rel E2&#x3002; &#x5C5E;&#x6027; rel.op &#x8868;&#x793A;&#x5173;&#x7CFB;&#x8FD0;&#x7B97;&#x7B26;&#x7684;&#x67D0;&#x4E00;&#x79CD;&#x3002;</p>
<h3 id="12-&#x77ED;&#x8DEF;&#x4EE3;&#x7801;"><a class="anchor" href="#12-&#x77ED;&#x8DEF;&#x4EE3;&#x7801;">#</a> 1.2 &#x77ED;&#x8DEF;&#x4EE3;&#x7801;</h3>
<p>&#x5728;&#x77ED;&#x8DEF;&#x4EE3;&#x7801;&#x4E2D;&#xFF0C;&#x5E03;&#x5C14;&#x8FD0;&#x7B97;&#x7B26; &amp;&amp;&#x3001;||&#x3001;&#xFF01;&#x88AB;&#x7FFB;&#x8BD1;&#x6210;&#x8DF3;&#x8F6C;&#x6307;&#x4EE4; goto&#xFF1B;&#x8FD9;&#x4E09;&#x4E2A;&#x8FD0;&#x7B97;&#x7B26;&#x5728;&#x7FFB;&#x8BD1;&#x4E2D;&#x6CA1;&#x6709;&#x7B26;&#x53F7;&#x663E;&#x793A;&#x3002;</p>
<h3 id="13-&#x63A7;&#x5236;&#x6D41;&#x8BED;&#x53E5;"><a class="anchor" href="#13-&#x63A7;&#x5236;&#x6D41;&#x8BED;&#x53E5;">#</a> 1.3 &#x63A7;&#x5236;&#x6D41;&#x8BED;&#x53E5;</h3>
<p>&#x6807;&#x53F7;&#x662F;&#x67D0;&#x5173;&#x7CFB;&#x8868;&#x8FBE;&#x5F0F;&#x4E3A;&#x771F;&#x65F6;&#x8BE5;&#x8DF3;&#x8F6C;&#x7684;&#x5730;&#x65B9;&#x3002;</p>
<p>&#x5047;&#x8BBE;&#x6BCF;&#x6B21;&#x8C03;&#x7528; newlabel () &#x90FD;&#x4F1A;&#x4EA7;&#x751F;&#x4E00;&#x4E2A;&#x65B0;&#x7684;&#x6807;&#x53F7;&#xFF0C;&#x5E76;&#x5047;&#x8BBE; label (L) &#x4E3A;&#x5C06;&#x6807;&#x53F7; L &#x9644;&#x52A0;&#x5230;&#x5373;&#x5C06;&#x751F;&#x6210;&#x7684;&#x4E0B;&#x4E00;&#x6761;&#x4E09;&#x5730;&#x5740;&#x6307;&#x4EE4;&#x4E0A;&#x3002;</p>
<p>&#x6BD4;&#x5982;&#xFF1A;B.true = newlabel ()<br>
S.code = label(B.true)</p>
<p>&#x8BF4;&#x660E;&#x8DF3;&#x8F6C;&#x5230; B.true &#x7684;&#x6307;&#x4EE4;&#x4F1A;&#x8DF3;&#x8F6C;&#x5230; S.code &#x4E0A;&#xFF0C;&#x5C31;&#x662F;&#x8DF3;&#x8F6C;&#x7ED1;&#x5B9A;&#x3002;</p>
<p>&#x8BED;&#x6CD5; -&gt; &#x8BED;&#x6CD5;&#x89C4;&#x5219;</p>
<ol>
<li>if-stmt -&gt; if E then S1 else S2<br>
E.true = newLabel<br>
E.false = newLabel<br>
S1.next = if-stmt.next<br>
S2.next = if-stmt.next</li>
</ol>
<p>if-stmt.code = E.code||goto label E.true||S1.code||goto S1.next||goto Label E.false||S2.code||label if-stmt.next</p>
<ol>
<li>
<p>E -&gt; E1 or E2<br>
E1.true = E.true;<br>
E1.false = newLabel<br>
E2.true = E.true;<br>
E2.false = E.false<br>
E.code = E1.code||label E1.false||E2.code</p>
</li>
<li>
<p>E -&gt; E1 and E2<br>
E1.true = newLabel<br>
E1.false = E.false<br>
E2.true = E.true<br>
E2.false = E.false</p>
</li>
</ol>
<p>E.code = E1.code||label E1.true||E2.code</p>
<ol start="4">
<li>
<p>E -&gt; id1 &lt; id2<br>
E.code=if <span class="exturl" data-url="aHR0cDovL2lkMS5uYW1l">id1.name</span> &lt; <span class="exturl" data-url="aHR0cDovL2lkMi5uYW1l">id2.name</span> goto E.true || goto E.false</p>
</li>
<li>
<p>do-stmt -&gt; do S while E<br>
do-stmt.begin=newLabel;<br>
do-stmt.next=newLabel;<br>
E.true=do-stmt.begin;<br>
E.false=do-stmt.next;</p>
</li>
</ol>
<p>do-stmt.code: Label do-stmt.begin || S.code ||E.code || Label do-stmt.next</p>
<ol>
<li>while-stmt -&gt; while E do S</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2024/06/04/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86--%E4%B8%AD%E9%97%B4%E4%BB%A3%E7%A0%81%E7%94%9F%E6%88%90%E4%B9%8B%E6%8E%A7%E5%88%B6%E6%B5%81/" data-id="clypfitv5000viodibb4h64jv" data-title="编译原理--中间代码生成之控制流" class="article-share-link"><span class="fa fa-share">Share</span></a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/">Next &raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/" rel="tag">C++</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DragonOS/" rel="tag">DragonOS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/" rel="tag">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" rel="tag">操作系统</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E6%9E%B6%E6%9E%84%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">架构和设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" rel="tag">编译原理</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" rel="tag">计算机网络</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/C/" style="font-size: 10px;">C++</a> <a href="/tags/DragonOS/" style="font-size: 12.5px;">DragonOS</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F/" style="font-size: 17.5px;">操作系统</a> <a href="/tags/%E6%9E%B6%E6%9E%84%E5%92%8C%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 15px;">架构和设计模式</a> <a href="/tags/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86/" style="font-size: 20px;">编译原理</a> <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" style="font-size: 17.5px;">计算机网络</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/07/">July 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/06/">June 2024</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2024/05/">May 2024</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2024/07/12/lo%E7%BD%91%E5%8D%A1%E6%B3%A8%E5%86%8C%E7%B3%BB%E7%BB%9F%E5%8D%A1%E6%BB%9E%E6%BC%8F%E6%B4%9E%E5%88%86%E6%9E%90%E5%8F%8A%E5%85%B6%E8%A7%A3%E5%86%B3/">lo网卡注册系统卡滞漏洞分析及其解决</a>
          </li>
        
          <li>
            <a href="/2024/07/10/C-%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B%E5%AD%A6%E4%B9%A0-boost-1/">C++网络编程学习-boost(1)</a>
          </li>
        
          <li>
            <a href="/2024/06/23/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-Bottom-Up-Paring/">编译原理--Bottom-Up Paring</a>
          </li>
        
          <li>
            <a href="/2024/06/22/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-Top-Down-Parsing/">编译原理--Top-Down Parsing</a>
          </li>
        
          <li>
            <a href="/2024/06/22/%E7%BC%96%E8%AF%91%E5%8E%9F%E7%90%86-C-F-G/">编译原理--C.F.G</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2024 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.6.4.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>